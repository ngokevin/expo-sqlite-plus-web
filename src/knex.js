!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var r in n)("object"==typeof exports?exports:t)[r]=n[r]}}(window,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=152)}([function(t,e){var n=Array.isArray;t.exports=n},function(t,e){t.exports={isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isBoolean:function(t){return"boolean"==typeof t},isUndefined:function(t){return void 0===t},isObject:function(t){return"object"==typeof t&&null!==t},isFunction:function(t){return"function"==typeof t}}},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e,n){"use strict";var r,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var s=Number.isNaN||function(t){return t!=t};function a(){a.init.call(this)}t.exports=a,t.exports.once=function(t,e){return new Promise((function(n,r){function i(n){t.removeListener(e,o),r(n)}function o(){"function"==typeof t.removeListener&&t.removeListener("error",i),n([].slice.call(arguments))}y(t,e,o,{once:!0}),"error"!==e&&function(t,e,n){"function"==typeof t.on&&y(t,"error",e,n)}(t,i,{once:!0})}))},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var u=10;function c(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function l(t){return void 0===t._maxListeners?a.defaultMaxListeners:t._maxListeners}function h(t,e,n,r){var i,o,s,a;if(c(n),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),s=o[e]),void 0===s)s=o[e]=n,++t._eventsCount;else if("function"==typeof s?s=o[e]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),(i=l(t))>0&&s.length>i&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=s.length,a=u,console&&console.warn&&console.warn(a)}return t}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=f.bind(r);return i.listener=n,r.wrapFn=i,i}function d(t,e,n){var r=t._events;if(void 0===r)return[];var i=r[e];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):m(i,i.length)}function g(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function m(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function y(t,e,n,r){if("function"==typeof t.on)r.once?t.once(e,n):t.on(e,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function i(o){r.once&&t.removeEventListener(e,i),n(o)}))}}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");u=t}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},a.prototype.getMaxListeners=function(){return l(this)},a.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var s;if(e.length>0&&(s=e[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var u=i[t];if(void 0===u)return!1;if("function"==typeof u)o(u,this,e);else{var c=u.length,l=m(u,c);for(n=0;n<c;++n)o(l[n],this,e)}return!0},a.prototype.addListener=function(t,e){return h(this,t,e,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(t,e){return h(this,t,e,!0)},a.prototype.once=function(t,e){return c(e),this.on(t,p(this,t,e)),this},a.prototype.prependOnceListener=function(t,e){return c(e),this.prependListener(t,p(this,t,e)),this},a.prototype.removeListener=function(t,e){var n,r,i,o,s;if(c(e),void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){s=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,i),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,s||e)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},a.prototype.listeners=function(t){return d(this,t,!0)},a.prototype.rawListeners=function(t){return d(this,t,!1)},a.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):g.call(t,e)},a.prototype.listenerCount=g,a.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(t,e,n){var r=n(93),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e,n){const r=n(50),i=n(22),{CLIENT_ALIASES:o}=n(82),{isFunction:s}=n(1);function a(t){let e=!1;if(i(t))return!1;if(t&&s(t.toSQL))return e;if(Array.isArray(t))for(let n=0;n<t.length&&!e;n++)e=a(t[n]);else r(t)?Object.keys(t).forEach(n=>{e||(e=a(t[n]))}):e=void 0===t;return e}t.exports={addQueryContext:function(t){t.prototype.queryContext=function(t){return void 0===t?this._queryContext:(this._queryContext=t,this)}},containsUndefined:a,getUndefinedIndices:function(t){const e=[];return Array.isArray(t)?t.forEach((t,n)=>{a(t)&&e.push(n)}):r(t)?Object.keys(t).forEach(n=>{a(t[n])&&e.push(n)}):e.push(0),e},normalizeArr:function(...t){return Array.isArray(t[0])?t[0]:t},resolveClientNameWithAliases:function(t){return o[t]||t},toNumber:function(t,e){if(null==t)return e;const n=parseInt(t,10);return isNaN(n)?e:n}}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var u,c=[],l=!1,h=-1;function f(){l&&u&&(l=!1,u.length?c=u.concat(c):h=-1,c.length&&p())}function p(){if(!l){var t=a(f);l=!0;for(var e=c.length;e;){for(u=c,c=[];++h<e;)u&&u[h].run();h=-1,e=c.length}u=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function g(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new d(t,e)),1!==c.length||l||a(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){var r=n(38),i=n(65);t.exports=function(t){return null!=t&&i(t.length)&&!r(t)}},function(t,e,n){var r=n(263),i=n(273),o=n(17),s=n(0),a=n(280);t.exports=function(t){return"function"==typeof t?t:null==t?o:"object"==typeof t?s(t)?i(t[0],t[1]):r(t):a(t)}},function(t,e,n){var r=n(177),i=n(182);t.exports=function(t,e){var n=i(t,e);return r(n)?n:void 0}},function(t,e,n){var r=n(13),i=n(178),o=n(179),s=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":s&&s in Object(t)?i(t):o(t)}},function(t,e,n){var r=n(4).Symbol;t.exports=r},function(t,e,n){var r=n(41),i=n(42);t.exports=function(t,e,n,o){var s=!n;n||(n={});for(var a=-1,u=e.length;++a<u;){var c=e[a],l=o?o(n[c],t[c],c,n,t):void 0;void 0===l&&(l=t[c]),s?i(n,c,l):r(n,c,l)}return n}},function(t,e,n){var r=n(96),i=n(97),o=n(9);t.exports=function(t){return o(t)?r(t):i(t)}},function(t,e,n){var r=n(96),i=n(202),o=n(9);t.exports=function(t){return o(t)?r(t,!0):i(t)}},function(t,e){t.exports=function(t){return t}},function(t,e,n){"use strict";var r=n(49),i=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};t.exports=h;var o=Object.create(n(31));o.inherits=n(24);var s=n(114),a=n(75);o.inherits(h,s);for(var u=i(a.prototype),c=0;c<u.length;c++){var l=u[c];h.prototype[l]||(h.prototype[l]=a.prototype[l])}function h(t){if(!(this instanceof h))return new h(t);s.call(this,t),a.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",f)}function f(){this.allowHalfOpen||this._writableState.ended||r.nextTick(p,this)}function p(t){t.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),h.prototype._destroy=function(t,e){this.push(null),this.end(),r.nextTick(e,t)}},function(t,e,n){(function(t){var r=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++)n[e[r]]=Object.getOwnPropertyDescriptor(t,e[r]);return n},i=/%[sdj%]/g;e.format=function(t){if(!y(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(a(arguments[n]));return e.join(" ")}n=1;for(var r=arguments,o=r.length,s=String(t).replace(i,(function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return t}})),u=r[n];n<o;u=r[++n])g(u)||!w(u)?s+=" "+u:s+=" "+a(u);return s},e.deprecate=function(n,r){if(void 0!==t&&!0===t.noDeprecation)return n;if(void 0===t)return function(){return e.deprecate(n,r).apply(this,arguments)};var i=!1;return function(){if(!i){if(t.throwDeprecation)throw new Error(r);t.traceDeprecation?console.trace(r):console.error(r),i=!0}return n.apply(this,arguments)}};var o,s={};function a(t,n){var r={seen:[],stylize:c};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),d(n)?r.showHidden=n:n&&e._extend(r,n),b(r.showHidden)&&(r.showHidden=!1),b(r.depth)&&(r.depth=2),b(r.colors)&&(r.colors=!1),b(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=u),l(r,t,r.depth)}function u(t,e){var n=a.styles[e];return n?"["+a.colors[n][0]+"m"+t+"["+a.colors[n][1]+"m":t}function c(t,e){return t}function l(t,n,r){if(t.customInspect&&n&&E(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,t);return y(i)||(i=l(t,i,r)),i}var o=function(t,e){if(b(e))return t.stylize("undefined","undefined");if(y(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}if(m(e))return t.stylize(""+e,"number");if(d(e))return t.stylize(""+e,"boolean");if(g(e))return t.stylize("null","null")}(t,n);if(o)return o;var s=Object.keys(n),a=function(t){var e={};return t.forEach((function(t,n){e[t]=!0})),e}(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(n)),x(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return h(n);if(0===s.length){if(E(n)){var u=n.name?": "+n.name:"";return t.stylize("[Function"+u+"]","special")}if(v(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(_(n))return t.stylize(Date.prototype.toString.call(n),"date");if(x(n))return h(n)}var c,w="",C=!1,T=["{","}"];(p(n)&&(C=!0,T=["[","]"]),E(n))&&(w=" [Function"+(n.name?": "+n.name:"")+"]");return v(n)&&(w=" "+RegExp.prototype.toString.call(n)),_(n)&&(w=" "+Date.prototype.toUTCString.call(n)),x(n)&&(w=" "+h(n)),0!==s.length||C&&0!=n.length?r<0?v(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),c=C?function(t,e,n,r,i){for(var o=[],s=0,a=e.length;s<a;++s)A(e,String(s))?o.push(f(t,e,n,r,String(s),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(f(t,e,n,r,i,!0))})),o}(t,n,r,a,s):s.map((function(e){return f(t,n,r,a,e,C)})),t.seen.pop(),function(t,e,n){if(t.reduce((function(t,e){return e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1];return n[0]+e+" "+t.join(", ")+" "+n[1]}(c,w,T)):T[0]+w+T[1]}function h(t){return"["+Error.prototype.toString.call(t)+"]"}function f(t,e,n,r,i,o){var s,a,u;if((u=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?a=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(a=t.stylize("[Setter]","special")),A(r,i)||(s="["+i+"]"),a||(t.seen.indexOf(u.value)<0?(a=g(n)?l(t,u.value,null):l(t,u.value,n-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+a.split("\n").map((function(t){return"   "+t})).join("\n")):a=t.stylize("[Circular]","special")),b(s)){if(o&&i.match(/^\d+$/))return a;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function p(t){return Array.isArray(t)}function d(t){return"boolean"==typeof t}function g(t){return null===t}function m(t){return"number"==typeof t}function y(t){return"string"==typeof t}function b(t){return void 0===t}function v(t){return w(t)&&"[object RegExp]"===C(t)}function w(t){return"object"==typeof t&&null!==t}function _(t){return w(t)&&"[object Date]"===C(t)}function x(t){return w(t)&&("[object Error]"===C(t)||t instanceof Error)}function E(t){return"function"==typeof t}function C(t){return Object.prototype.toString.call(t)}function T(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(n){if(b(o)&&(o=Object({NODE_ENV:"production"}).NODE_DEBUG||""),n=n.toUpperCase(),!s[n])if(new RegExp("\\b"+n+"\\b","i").test(o)){var r=t.pid;s[n]=function(){var t=e.format.apply(e,arguments);console.error("%s %d: %s",n,r,t)}}else s[n]=function(){};return s[n]},e.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=p,e.isBoolean=d,e.isNull=g,e.isNullOrUndefined=function(t){return null==t},e.isNumber=m,e.isString=y,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=b,e.isRegExp=v,e.isObject=w,e.isDate=_,e.isError=x,e.isFunction=E,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=n(161);var O=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function j(){var t=new Date,e=[T(t.getHours()),T(t.getMinutes()),T(t.getSeconds())].join(":");return[t.getDate(),O[t.getMonth()],e].join(" ")}function A(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){console.log("%s - %s",j(),e.format.apply(e,arguments))},e.inherits=n(162),e._extend=function(t,e){if(!e||!w(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t};var N="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function S(t,e){if(!t){var n=new Error("Promise was rejected with a falsy value");n.reason=t,t=n}return e(t)}e.promisify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(N&&t[N]){var e;if("function"!=typeof(e=t[N]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,N,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var e,n,r=new Promise((function(t,r){e=t,n=r})),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push((function(t,r){t?n(t):e(r)}));try{t.apply(this,i)}catch(t){n(t)}return r}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),N&&Object.defineProperty(e,N,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,r(t))},e.promisify.custom=N,e.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function n(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var i=n.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var o=this,s=function(){return i.apply(o,arguments)};e.apply(this,n).then((function(e){t.nextTick(s,null,e)}),(function(e){t.nextTick(S,e,s)}))}return Object.setPrototypeOf(n,Object.getPrototypeOf(e)),Object.defineProperties(n,r(e)),n}}).call(this,n(8))},function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,n){(function(t){var r=n(4),i=n(198),o=e&&!e.nodeType&&e,s=o&&"object"==typeof t&&t&&!t.nodeType&&t,a=s&&s.exports===o?r.Buffer:void 0,u=(a?a.isBuffer:void 0)||i;t.exports=u}).call(this,n(43)(t))},function(t,e,n){var r=n(199),i=n(66),o=n(67),s=o&&o.isTypedArray,a=s?i(s):r;t.exports=a},function(t,e,n){var r=n(206),i=n(62),o=n(207),s=n(208),a=n(209),u=n(12),c=n(94),l=c(r),h=c(i),f=c(o),p=c(s),d=c(a),g=u;(r&&"[object DataView]"!=g(new r(new ArrayBuffer(1)))||i&&"[object Map]"!=g(new i)||o&&"[object Promise]"!=g(o.resolve())||s&&"[object Set]"!=g(new s)||a&&"[object WeakMap]"!=g(new a))&&(g=function(t){var e=u(t),n="[object Object]"==e?t.constructor:void 0,r=n?c(n):"";if(r)switch(r){case l:return"[object DataView]";case h:return"[object Map]";case f:return"[object Promise]";case p:return"[object Set]";case d:return"[object WeakMap]"}return e}),t.exports=g},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}},function(t,e,n){(function(r){e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;e.splice(1,0,n,"color: inherit");let r=0,i=0;e[0].replace(/%[a-zA-Z%]/g,t=>{"%%"!==t&&(r++,"%c"===t&&(i=r))}),e.splice(i,0,n)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(t){}},e.load=function(){let t;try{t=e.storage.getItem("debug")}catch(t){}!t&&void 0!==r&&"env"in r&&(t=Object({NODE_ENV:"production"}).DEBUG);return t},e.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage=function(){try{return localStorage}catch(t){}}(),e.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||(()=>{}),t.exports=n(238)(e);const{formatters:i}=t.exports;i.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}}).call(this,n(8))},function(t,e,n){var r=n(131),i=n(259)(r);t.exports=i},function(t,e,n){const r=n(295),i=n(51),{compileCallback:o,wrapAsIdentifier:s}=n(56),a=["asc","desc"],u=r(["=","<",">","<=",">=","<>","!=","like","not like","between","not between","ilike","not ilike","exists","not exist","rlike","not rlike","regexp","not regexp","match","&","|","^","<<",">>","~","~=","~*","!~","!~*","#","&&","@>","<@","||","&<","&>","-|-","@@","!!",["?","\\?"],["?|","\\?|"],["?&","\\?&"]],(t,e)=>{Array.isArray(e)?t[e[0]]=e[1]:t[e]=e},{});function c(t,e,n,r,a){const u=l(t,e,n,r,a);if(u)return u;switch(typeof t){case"function":return f(o(t,void 0,r,a),!0,n,r);case"object":return function(t,e,n,r){const a=[];for(const u in t){const l=t[u];if("function"==typeof l){const t=o(l,void 0,n,r);t.as=u,a.push(f(t,!0,e,n))}else l instanceof i?a.push(n.alias(`(${c(l,void 0,e,n,r)})`,s(u,e,n))):a.push(n.alias(c(l,void 0,e,n,r),s(u,e,n)))}return a.join(", ")}(t,n,r,a);case"number":return t;default:return h(t+"",n,r)}}function l(t,e,n,r,o){let s;return t instanceof i?(s=r.queryCompiler(t).toSQL(),s.bindings&&o.bindings.push(...s.bindings),f(s,e,n,r)):t&&t.isRawInstance?(t.client=r,n._queryContext&&(t.queryContext=()=>n._queryContext),s=t.toSQL(),s.bindings&&o.bindings.push(...s.bindings),s.sql):void(e&&o.bindings.push(t))}function h(t,e,n){const r=t.toLowerCase().indexOf(" as ");if(-1!==r){const i=t.slice(0,r),o=t.slice(r+4);return n.alias(h(i,e,n),s(o,e,n))}const i=[];let o=-1;const a=t.split(".");for(;++o<a.length;)t=a[o],0===o&&a.length>1?i.push(h((t||"").trim(),e,n)):i.push(s(t,e,n));return i.join(".")}function f(t,e,n,r){let i=t.sql||"";return i&&("select"===t.method||"first"===t.method)&&(e||t.as)&&(i=`(${i})`,t.as)?r.alias(i,h(t.as,n,r)):i}t.exports={columnize:function(t,e,n,r){const i=Array.isArray(t)?t:[t];let o="",s=-1;for(;++s<i.length;)s>0&&(o+=", "),o+=c(i[s],void 0,e,n,r);return o},direction:function(t,e,n,r){const i=l(t,void 0,e,n,r);return i||(-1!==a.indexOf((t||"").toLowerCase())?t:"asc")},operator:function(t,e,n,r){const i=l(t,void 0,e,n,r);if(i)return i;const o=u[(t||"").toLowerCase()];if(!o)throw new TypeError(`The operator "${t}" is not permitted`);return o},outputQuery:f,rawOrFn:function(t,e,n,r,i){return"function"==typeof t?f(o(t,e,r,i),void 0,n,r):l(t,void 0,n,r,i)||""},unwrapRaw:l,wrap:c,wrapString:h}},function(t,e,n){var r=n(197),i=n(5),o=Object.prototype,s=o.hasOwnProperty,a=o.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(t){return i(t)&&s.call(t,"callee")&&!a.call(t,"callee")};t.exports=u},function(t,e){var n=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}},function(t,e){class n extends Error{constructor(t){super(t),this.name="KnexTimeoutError"}}t.exports.KnexTimeoutError=n,t.exports.timeout=function(t,e){return new Promise((function(r,i){const o=setTimeout((function(){i(new n("operation timed out"))}),e);t.then((function(t){clearTimeout(o),r(t)}),(function(t){clearTimeout(o),i(t)}))}))}},function(t,e,n){function r(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===r(t)},e.isBoolean=function(t){return"boolean"==typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return"number"==typeof t},e.isString=function(t){return"string"==typeof t},e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return"[object RegExp]"===r(t)},e.isObject=function(t){return"object"==typeof t&&null!==t},e.isDate=function(t){return"[object Date]"===r(t)},e.isError=function(t){return"[object Error]"===r(t)||t instanceof Error},e.isFunction=function(t){return"function"==typeof t},e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=n(34).Buffer.isBuffer},function(t,e,n){var r=n(97),i=n(23),o=n(28),s=n(0),a=n(9),u=n(21),c=n(29),l=n(22),h=Object.prototype.hasOwnProperty;t.exports=function(t){if(null==t)return!0;if(a(t)&&(s(t)||"string"==typeof t||"function"==typeof t.splice||u(t)||l(t)||o(t)))return!t.length;var e=i(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(c(t))return!r(t).length;for(var n in t)if(h.call(t,n))return!1;return!0}},function(t,e,n){var r=n(48);t.exports=function(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},function(t,e,n){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=n(164),i=n(165),o=n(91);function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return c(this,t,e,n)}function c(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=f(t,e);return t}(t,e,n,r):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|d(e,n),i=(t=a(t,r)).write(e,n);i!==r&&(t=t.slice(0,i));return t}(t,e,n):function(t,e){if(u.isBuffer(e)){var n=0|p(e.length);return 0===(t=a(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?a(t,0):f(t,e);if("Buffer"===e.type&&o(e.data))return f(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function h(t,e){if(l(e),t=a(t,e<0?0:0|p(e)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function f(t,e){var n=e.length<0?0:0|p(e.length);t=a(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function p(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function d(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return U(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return F(t).length;default:if(r)return U(t).length;e=(""+e).toLowerCase(),r=!0}}function g(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return N(this,e,n);case"utf8":case"utf-8":return O(this,e,n);case"ascii":return j(this,e,n);case"latin1":case"binary":return A(this,e,n);case"base64":return T(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function m(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function y(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:b(t,e,n,r,i);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):b(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function b(t,e,n,r,i){var o,s=1,a=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,n/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var l=-1;for(o=n;o<a;o++)if(c(t,o)===c(e,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*s}else-1!==l&&(o-=o-l),l=-1}else for(n+u>a&&(n=a-u),o=n;o>=0;o--){for(var h=!0,f=0;f<u;f++)if(c(t,o+f)!==c(e,f)){h=!1;break}if(h)return o}return-1}function v(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[n+s]=a}return s}function w(t,e,n,r){return D(U(e,t.length-n),t,n,r)}function _(t,e,n,r){return D(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function x(t,e,n,r){return _(t,e,n,r)}function E(t,e,n,r){return D(F(e),t,n,r)}function C(t,e,n,r){return D(function(t,e){for(var n,r,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function T(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function O(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,s,a,u,c=t[i],l=null,h=c>239?4:c>223?3:c>191?2:1;if(i+h<=n)switch(h){case 1:c<128&&(l=c);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&c)<<6|63&o)>127&&(l=u);break;case 3:o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&(u=(15&c)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(u=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(l=u)}null===l?(l=65533,h=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=h}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=4096));return n}(r)}e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=s(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,n){return c(null,t,e,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,n){return function(t,e,n,r){return l(e),e<=0?a(t,e):void 0!==n?"string"==typeof r?a(t,e).fill(n,r):a(t,e).fill(n):a(t,e)}(null,t,e,n)},u.allocUnsafe=function(t){return h(null,t)},u.allocUnsafeSlow=function(t){return h(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=u.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var s=t[n];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},u.byteLength=d,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)m(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?O(this,0,t):g.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,n,r,i){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(e>>>=0),a=Math.min(o,s),c=this.slice(r,i),l=t.slice(e,n),h=0;h<a;++h)if(c[h]!==l[h]){o=c[h],s=l[h];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return y(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return y(this,t,e,n,!1)},u.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return v(this,t,e,n);case"utf8":case"utf-8":return w(this,t,e,n);case"ascii":return _(this,t,e,n);case"latin1":case"binary":return x(this,t,e,n);case"base64":return E(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function j(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function A(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function N(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=$(t[o]);return i}function S(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function R(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function I(t,e,n,r,i,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function k(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function q(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function P(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function L(t,e,n,r,o){return o||P(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function B(t,e,n,r,o){return o||P(t,0,n,8),i.write(t,e,n,r,52,8),n+8}u.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=u.prototype;else{var i=e-t;n=new u(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},u.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||R(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},u.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||R(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},u.prototype.readUInt8=function(t,e){return e||R(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||R(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||R(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||R(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||R(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||R(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||R(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return e||R(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||R(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){e||R(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return e||R(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||R(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||R(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||R(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||R(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||R(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||I(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},u.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||I(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},u.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):k(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):k(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):q(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):q(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);I(this,t,e,n,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},u.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);I(this,t,e,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):k(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):k(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):q(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):q(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,n){return L(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return L(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return B(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return B(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},u.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var s=u.isBuffer(t)?t:U(new u(t,r).toString()),a=s.length;for(o=0;o<n-e;++o)this[o+e]=s[o%a]}return this};var M=/[^+\/0-9A-Za-z-_]/g;function $(t){return t<16?"0"+t.toString(16):t.toString(16)}function U(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],s=0;s<r;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function F(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(M,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function D(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n(7))},function(t,e,n){var r=n(36),i=n(172),o=n(173),s=n(174),a=n(175),u=n(176);function c(t){var e=this.__data__=new r(t);this.size=e.size}c.prototype.clear=i,c.prototype.delete=o,c.prototype.get=s,c.prototype.has=a,c.prototype.set=u,t.exports=c},function(t,e,n){var r=n(167),i=n(168),o=n(169),s=n(170),a=n(171);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=s,u.prototype.set=a,t.exports=u},function(t,e,n){var r=n(20);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},function(t,e,n){var r=n(12),i=n(2);t.exports=function(t){if(!i(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},function(t,e,n){var r=n(11)(Object,"create");t.exports=r},function(t,e,n){var r=n(191);t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},function(t,e,n){var r=n(42),i=n(20),o=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var s=t[e];o.call(t,e)&&i(s,n)&&(void 0!==n||e in t)||r(t,e,n)}},function(t,e,n){var r=n(95);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){var n=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&n.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e,n){var r=n(98)(Object.getPrototypeOf,Object);t.exports=r},function(t,e,n){var r=n(20),i=n(9),o=n(44),s=n(2);t.exports=function(t,e,n){if(!s(n))return!1;var a=typeof e;return!!("number"==a?i(n)&&o(e,n.length):"string"==a&&e in n)&&r(n[e],t)}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}},function(t,e,n){var r=n(12),i=n(5);t.exports=function(t){return"symbol"==typeof t||i(t)&&"[object Symbol]"==r(t)}},function(t,e,n){"use strict";(function(e){void 0===e||!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:function(t,n,r,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,s,a=arguments.length;switch(a){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick((function(){t.call(null,n)}));case 3:return e.nextTick((function(){t.call(null,n,r)}));case 4:return e.nextTick((function(){t.call(null,n,r,i)}));default:for(o=new Array(a-1),s=0;s<o.length;)o[s++]=arguments[s];return e.nextTick((function(){t.apply(null,o)}))}}}:t.exports=e}).call(this,n(8))},function(t,e,n){var r=n(12),i=n(45),o=n(5),s=Function.prototype,a=Object.prototype,u=s.toString,c=a.hasOwnProperty,l=u.call(Object);t.exports=function(t){if(!o(t)||"[object Object]"!=r(t))return!1;var e=i(t);if(null===e)return!0;var n=c.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&u.call(n)==l}},function(t,e,n){const r=n(77),{EventEmitter:i}=n(3),o=n(78),s=n(130),a=n(79),u=n(32),c=n(50),l=n(261),h=n(262),f=n(53),p=n(54),{addQueryContext:d,normalizeArr:g}=n(6),m=n(143),y=n(290),b=n(83),{isBoolean:v,isNumber:w,isObject:_,isString:x,isFunction:E}=n(1),{lockMode:C,waitMode:T}=n(291),{augmentWithBuilderInterface:O}=n(84),j=new Set(["pluck","first","select"]),A=new Set(["with","select","columns","hintComments","where","union","join","group","order","having","limit","offset","counter","counters"]),N=new Set([C.forShare,C.forUpdate,C.forNoKeyUpdate,C.forKeyShare]);class S extends i{constructor(t){super(),this.client=t,this.and=this,this._single={},this._statements=[],this._method="select",t.config&&(b(this,5),this._debug=t.config.debug),this._joinFlag="inner",this._boolFlag="and",this._notFlag=!1,this._asColumnFlag=!1}toString(){return this.toQuery()}toSQL(t,e){return this.client.queryCompiler(this).toSQL(t||this._method,e)}clone(){const t=new this.constructor(this.client);return t._method=this._method,t._single=s(this._single),t._statements=s(this._statements),t._debug=this._debug,void 0!==this._options&&(t._options=s(this._options)),void 0!==this._queryContext&&(t._queryContext=s(this._queryContext)),void 0!==this._connection&&(t._connection=this._connection),t}timeout(t,{cancel:e}={}){return w(t)&&t>0&&(this._timeout=t,e&&(this.client.assertCanCancelQuery(),this._cancelOnTimeout=!0)),this}with(t,e,n){return I(t,e,n,"with"),this.withWrapped(t,e,n)}withWrapped(t,e,n){const[r,i]=void 0===n?[e,void 0]:[n,e];return this._statements.push({grouping:"with",type:"withWrapped",alias:t,columnList:i,value:r}),this}withRecursive(t,e,n){return I(t,e,n,"withRecursive"),this.withRecursiveWrapped(t,e,n)}withRecursiveWrapped(t,e,n){return this.withWrapped(t,e,n),this._statements[this._statements.length-1].recursive=!0,this}columns(t){return t||0===t?(this._statements.push({grouping:"columns",value:g(...arguments)}),this):this}as(t){return this._single.as=t,this}hintComment(t){if((t=Array.isArray(t)?t:[t]).some(t=>!x(t)))throw new Error("Hint comment must be a string");if(t.some(t=>t.includes("/*")||t.includes("*/")))throw new Error('Hint comment cannot include "/*" or "*/"');if(t.some(t=>t.includes("?")))throw new Error('Hint comment cannot include "?"');return this._statements.push({grouping:"hintComments",value:t}),this}withSchema(t){return this._single.schema=t,this}table(t,e={}){return this._single.table=t,this._single.only=!0===e.only,this}distinct(...t){return this._statements.push({grouping:"columns",value:g(...t),distinct:!0}),this}distinctOn(...t){if(u(t))throw new Error("distinctOn requires at least on argument");return this._statements.push({grouping:"columns",value:g(...t),distinctOn:!0}),this}join(t,e,...n){let r;const i=t instanceof S||"function"==typeof t?void 0:this._single.schema,o=this._joinType();return"function"==typeof e?(r=new m(t,o,i),e.call(r,r)):"raw"===o?r=new m(this.client.raw(t,e),"raw"):(r=new m(t,o,i),e&&r.on(e,...n)),this._statements.push(r),this}innerJoin(...t){return this._joinType("inner").join(...t)}leftJoin(...t){return this._joinType("left").join(...t)}leftOuterJoin(...t){return this._joinType("left outer").join(...t)}rightJoin(...t){return this._joinType("right").join(...t)}rightOuterJoin(...t){return this._joinType("right outer").join(...t)}outerJoin(...t){return this._joinType("outer").join(...t)}fullOuterJoin(...t){return this._joinType("full outer").join(...t)}crossJoin(...t){return this._joinType("cross").join(...t)}joinRaw(...t){return this._joinType("raw").join(...t)}get or(){return this._bool("or")}get not(){return this._not(!0)}where(t,e,n){const r=arguments.length;if(!1===t||!0===t)return this.where(1,"=",t?1:0);if("function"==typeof t)return this.whereWrapped(t);if(_(t)&&!t.isRawInstance)return this._objectWhere(t);if(t&&t.isRawInstance&&1===r)return this.whereRaw(t);if(2===r&&(n=e,e="=",null===n))return this.whereNull(t);const i=(""+e).toLowerCase().trim();if(3===r){if("in"===i||"not in"===i)return this._not("not in"===i).whereIn(t,n);if("between"===i||"not between"===i)return this._not("not between"===i).whereBetween(t,n)}return null!==n||"is"!==i&&"is not"!==i?(this._statements.push({grouping:"where",type:"whereBasic",column:t,operator:e,value:n,not:this._not(),bool:this._bool(),asColumn:this._asColumnFlag}),this):this._not("is not"===i).whereNull(t)}whereColumn(...t){return this._asColumnFlag=!0,this.where(...t),this._asColumnFlag=!1,this}orWhere(t,...e){this._bool("or");const n=t;return _(n)&&!n.isRawInstance?this.whereWrapped((function(){for(const t in n)this.andWhere(t,n[t])})):this.where(t,...e)}orWhereColumn(t,...e){this._bool("or");const n=t;return _(n)&&!n.isRawInstance?this.whereWrapped((function(){for(const t in n)this.andWhereColumn(t,"=",n[t])})):this.whereColumn(t,...e)}whereNot(t,...e){return e.length>=1&&("in"!==e[0]&&"between"!==e[0]||this.client.logger.warn('whereNot is not suitable for "in" and "between" type subqueries. You should use "not in" and "not between" instead.')),this._not(!0).where(t,...e)}whereNotColumn(...t){return this._not(!0).whereColumn(...t)}orWhereNot(...t){return this._bool("or").whereNot(...t)}orWhereNotColumn(...t){return this._bool("or").whereNotColumn(...t)}_objectWhere(t){const e=this._bool(),n=this._not()?"Not":"";for(const r in t)this[e+"Where"+n](r,t[r]);return this}whereRaw(t,e){const n=t.isRawInstance?t:this.client.raw(t,e);return this._statements.push({grouping:"where",type:"whereRaw",value:n,not:this._not(),bool:this._bool()}),this}orWhereRaw(t,e){return this._bool("or").whereRaw(t,e)}whereWrapped(t){return this._statements.push({grouping:"where",type:"whereWrapped",value:t,not:this._not(),bool:this._bool()}),this}whereExists(t){return this._statements.push({grouping:"where",type:"whereExists",value:t,not:this._not(),bool:this._bool()}),this}orWhereExists(t){return this._bool("or").whereExists(t)}whereNotExists(t){return this._not(!0).whereExists(t)}orWhereNotExists(t){return this._bool("or").whereNotExists(t)}whereIn(t,e){return Array.isArray(e)&&u(e)?this.where(this._not()):(this._statements.push({grouping:"where",type:"whereIn",column:t,value:e,not:this._not(),bool:this._bool()}),this)}orWhereIn(t,e){return this._bool("or").whereIn(t,e)}whereNotIn(t,e){return this._not(!0).whereIn(t,e)}orWhereNotIn(t,e){return this._bool("or")._not(!0).whereIn(t,e)}whereNull(t){return this._statements.push({grouping:"where",type:"whereNull",column:t,not:this._not(),bool:this._bool()}),this}orWhereNull(t){return this._bool("or").whereNull(t)}whereNotNull(t){return this._not(!0).whereNull(t)}orWhereNotNull(t){return this._bool("or").whereNotNull(t)}whereBetween(t,e){return r(Array.isArray(e),"The second argument to whereBetween must be an array."),r(2===e.length,"You must specify 2 values for the whereBetween clause"),this._statements.push({grouping:"where",type:"whereBetween",column:t,value:e,not:this._not(),bool:this._bool()}),this}whereNotBetween(t,e){return this._not(!0).whereBetween(t,e)}orWhereBetween(t,e){return this._bool("or").whereBetween(t,e)}orWhereNotBetween(t,e){return this._bool("or").whereNotBetween(t,e)}groupBy(t){return t&&t.isRawInstance?this.groupByRaw.apply(this,arguments):(this._statements.push({grouping:"group",type:"groupByBasic",value:g(...arguments)}),this)}groupByRaw(t,e){const n=t.isRawInstance?t:this.client.raw(t,e);return this._statements.push({grouping:"group",type:"groupByRaw",value:n}),this}orderBy(t,e,n=""){return Array.isArray(t)?this._orderByArray(t):(this._statements.push({grouping:"order",type:"orderByBasic",value:t,direction:e,nulls:n}),this)}_orderByArray(t){for(let e=0;e<t.length;e++){const n=t[e];_(n)?this._statements.push({grouping:"order",type:"orderByBasic",value:n.column,direction:n.order,nulls:n.nulls}):x(n)&&this._statements.push({grouping:"order",type:"orderByBasic",value:n})}return this}orderByRaw(t,e){const n=t.isRawInstance?t:this.client.raw(t,e);return this._statements.push({grouping:"order",type:"orderByRaw",value:n}),this}_union(t,e){let n=e[0],r=e[1];if(1===e.length||2===e.length&&v(r)){Array.isArray(n)||(n=[n]);for(let e=0,i=n.length;e<i;e++)this._statements.push({grouping:"union",clause:t,value:n[e],wrap:r||!1})}else n=p(e).slice(0,e.length-1),r=e[e.length-1],v(r)||(n.push(r),r=!1),this._union(t,[n,r]);return this}union(...t){return this._union("union",t)}unionAll(...t){return this._union("union all",t)}intersect(t,e){if(1===arguments.length||2===arguments.length&&v(e)){Array.isArray(t)||(t=[t]);for(let n=0,r=t.length;n<r;n++)this._statements.push({grouping:"union",clause:"intersect",value:t[n],wrap:e||!1})}else t=p(arguments).slice(0,arguments.length-1),v(e=arguments[arguments.length-1])||(t.push(e),e=!1),this.intersect(t,e);return this}having(t,e,n){return t.isRawInstance&&1===arguments.length?this.havingRaw(t):"function"==typeof t?this.havingWrapped(t):(this._statements.push({grouping:"having",type:"havingBasic",column:t,operator:e,value:n,bool:this._bool(),not:this._not()}),this)}orHaving(t,...e){this._bool("or");const n=t;return _(n)&&!n.isRawInstance?this.havingWrapped((function(){for(const t in n)this.andHaving(t,n[t])})):this.having(t,...e)}havingWrapped(t){return this._statements.push({grouping:"having",type:"havingWrapped",value:t,bool:this._bool(),not:this._not()}),this}havingNull(t){return this._statements.push({grouping:"having",type:"havingNull",column:t,not:this._not(),bool:this._bool()}),this}orHavingNull(t){return this._bool("or").havingNull(t)}havingNotNull(t){return this._not(!0).havingNull(t)}orHavingNotNull(t){return this._not(!0)._bool("or").havingNull(t)}havingExists(t){return this._statements.push({grouping:"having",type:"havingExists",value:t,not:this._not(),bool:this._bool()}),this}orHavingExists(t){return this._bool("or").havingExists(t)}havingNotExists(t){return this._not(!0).havingExists(t)}orHavingNotExists(t){return this._not(!0)._bool("or").havingExists(t)}havingBetween(t,e){return r(Array.isArray(e),"The second argument to havingBetween must be an array."),r(2===e.length,"You must specify 2 values for the havingBetween clause"),this._statements.push({grouping:"having",type:"havingBetween",column:t,value:e,not:this._not(),bool:this._bool()}),this}orHavingBetween(t,e){return this._bool("or").havingBetween(t,e)}havingNotBetween(t,e){return this._not(!0).havingBetween(t,e)}orHavingNotBetween(t,e){return this._not(!0)._bool("or").havingBetween(t,e)}havingIn(t,e){return Array.isArray(e)&&u(e)?this.where(this._not()):(this._statements.push({grouping:"having",type:"havingIn",column:t,value:e,not:this._not(),bool:this._bool()}),this)}orHavingIn(t,e){return this._bool("or").havingIn(t,e)}havingNotIn(t,e){return this._not(!0).havingIn(t,e)}orHavingNotIn(t,e){return this._bool("or")._not(!0).havingIn(t,e)}havingRaw(t,e){const n=t.isRawInstance?t:this.client.raw(t,e);return this._statements.push({grouping:"having",type:"havingRaw",value:n,bool:this._bool(),not:this._not()}),this}orHavingRaw(t,e){return this._bool("or").havingRaw(t,e)}offset(t){if(null==t||t.isRawInstance||t instanceof S)this._single.offset=t;else{const e=parseInt(t,10);if(isNaN(e))this.client.logger.warn("A valid integer must be provided to offset");else{if(e<0)throw new Error("A non-negative integer must be provided to offset.");this._single.offset=e}}return this}limit(t){const e=parseInt(t,10);return isNaN(e)?this.client.logger.warn("A valid integer must be provided to limit"):this._single.limit=e,this}count(t,e){return this._aggregate("count",t||"*",e)}min(t,e){return this._aggregate("min",t,e)}max(t,e){return this._aggregate("max",t,e)}sum(t,e){return this._aggregate("sum",t,e)}avg(t,e){return this._aggregate("avg",t,e)}countDistinct(...t){let e;return t.length>1&&c(l(t))&&([e]=t.splice(t.length-1,1)),t.length?1===t.length&&(t=t[0]):t="*",this._aggregate("count",t,{...e,distinct:!0})}sumDistinct(t,e){return this._aggregate("sum",t,{...e,distinct:!0})}avgDistinct(t,e){return this._aggregate("avg",t,{...e,distinct:!0})}increment(t,e=1){if(_(t)){for(const e in t)this._counter(e,t[e]);return this}return this._counter(t,e)}decrement(t,e=1){if(_(t)){for(const e in t)this._counter(e,-t[e]);return this}return this._counter(t,-e)}clearCounters(){return this._single.counter={},this}first(...t){if(this._method&&"select"!==this._method)throw new Error(`Cannot chain .first() on "${this._method}" query`);return this.select(g(...t)),this._method="first",this.limit(1),this}connection(t){return this._connection=t,this.client.processPassedConnection(t),this}pluck(t){if(this._method&&"select"!==this._method)throw new Error(`Cannot chain .pluck() on "${this._method}" query`);return this._method="pluck",this._single.pluck=t,this._statements.push({grouping:"columns",type:"pluck",value:t}),this}clearSelect(){return this._clearGrouping("columns"),this}clearWhere(){return this._clearGrouping("where"),this}clearGroup(){return this._clearGrouping("group"),this}clearOrder(){return this._clearGrouping("order"),this}clearHaving(){return this._clearGrouping("having"),this}clear(t){if(!A.has(t))throw new Error(`Knex Error: unknown statement '${t}'`);return t.startsWith("counter")?this.clearCounters():("select"===t&&(t="columns"),this._clearGrouping(t),this)}insert(t,e,n){return this._method="insert",u(e)||this.returning(e,n),this._single.insert=t,this}update(t,e,n){let r;const i=this._single.update||{};if(this._method="update",x(t))i[t]=e,arguments.length>2&&(r=arguments[2]);else{const e=Object.keys(t);this._single.update&&this.client.logger.warn("Update called multiple times with objects.");let n=-1;for(;++n<e.length;)i[e[n]]=t[e[n]];r=arguments[1]}return u(r)||this.returning(r,n),this._single.update=i,this}returning(t,e){return this._single.returning=t,this._single.options=e,this}onConflict(t){return"string"==typeof t&&(t=[t]),new k(this,t||!0)}delete(t,e){return this._method="del",u(t)||this.returning(t,e),this}truncate(t){return this._method="truncate",t&&(this._single.table=t),this}columnInfo(t){return this._method="columnInfo",this._single.columnInfo=t,this}forUpdate(...t){return this._single.lock=C.forUpdate,this._single.lockTables=t,this}forShare(...t){return this._single.lock=C.forShare,this._single.lockTables=t,this}forNoKeyUpdate(...t){return this._single.lock=C.forNoKeyUpdate,this._single.lockTables=t,this}forKeyShare(...t){return this._single.lock=C.forKeyShare,this._single.lockTables=t,this}skipLocked(){if(!this._isSelectQuery())throw new Error(`Cannot chain .skipLocked() on "${this._method}" query!`);if(!this._hasLockMode())throw new Error(".skipLocked() can only be used after a call to .forShare() or .forUpdate()!");if(this._single.waitMode===T.noWait)throw new Error(".skipLocked() cannot be used together with .noWait()!");return this._single.waitMode=T.skipLocked,this}noWait(){if(!this._isSelectQuery())throw new Error(`Cannot chain .noWait() on "${this._method}" query!`);if(!this._hasLockMode())throw new Error(".noWait() can only be used after a call to .forShare() or .forUpdate()!");if(this._single.waitMode===T.skipLocked)throw new Error(".noWait() cannot be used together with .skipLocked()!");return this._single.waitMode=T.noWait,this}fromJS(t){return a(t,(t,e)=>{"function"!=typeof this[e]&&this.client.logger.warn("Knex Error: unknown key "+e),Array.isArray(t)?this[e].apply(this,t):this[e](t)}),this}modify(t){return t.apply(this,[this].concat(f(arguments))),this}upsert(t,e,n){throw new Error("Upsert is not yet supported for dialect "+this.client.dialect)}_analytic(t,e,n){let i;const{schema:o}=this._single,s=this._analyticMethod();if(t="string"==typeof t?t:null,r("function"==typeof e||e.isRawInstance||Array.isArray(e)||"string"==typeof e||"object"==typeof e,"The second argument to an analytic function must be either a function, a raw,\n       an array of string or object, an object or a single string."),n&&r(Array.isArray(n)||"string"==typeof n||"object"==typeof n,"The third argument to an analytic function must be either a string, an array of string or object or an object."),E(e))i=new y(s,o,t),e.call(i,i);else if(e.isRawInstance){i={grouping:"columns",type:"analytic",method:s,raw:e,alias:t}}else{const r=Array.isArray(e)?e:[e];let o=n||[];o=Array.isArray(o)?o:[o],i={grouping:"columns",type:"analytic",method:s,order:r,alias:t,partitions:o}}return this._statements.push(i),this}rank(...t){return this._analyticMethod("rank")._analytic(...t)}denseRank(...t){return this._analyticMethod("dense_rank")._analytic(...t)}rowNumber(...t){return this._analyticMethod("row_number")._analytic(...t)}_counter(t,e){return e=parseFloat(e),this._method="update",this._single.counter=this._single.counter||{},this._single.counter[t]=e,this}_bool(t){if(1===arguments.length)return this._boolFlag=t,this;const e=this._boolFlag;return this._boolFlag="and",e}_not(t){if(1===arguments.length)return this._notFlag=t,this;const e=this._notFlag;return this._notFlag=!1,e}_joinType(t){if(1===arguments.length)return this._joinFlag=t,this;const e=this._joinFlag||"inner";return this._joinFlag="inner",e}_analyticMethod(t){return 1===arguments.length?(this._analyticFlag=t,this):this._analyticFlag||"row_number"}_aggregate(t,e,n={}){return this._statements.push({grouping:"columns",type:e.isRawInstance?"aggregateRaw":"aggregate",method:t,value:e,aggregateDistinct:n.distinct||!1,alias:n.as}),this}_clearGrouping(t){t in this._single?this._single[t]=void 0:this._statements=h(this._statements,{grouping:t})}_isSelectQuery(){return j.has(this._method)}_hasLockMode(){return N.has(this._single.lock)}}const R=t=>"function"==typeof t||t instanceof S||t&&t.isRawInstance,I=function(t,e,n,r){const[i,o]=void 0===n?[e,void 0]:[n,e];if("string"!=typeof t)throw new Error(r+"() first argument must be a string");if(R(i)&&void 0===o)return;if(!(Array.isArray(o)&&o.length>0&&o.every(t=>"string"==typeof t)))throw new Error(r+"() second argument must be a statement or non-empty column name list.");if(!R(i))throw new Error(r+"() third argument must be a function / QueryBuilder or a raw when its second argument is a column name list")};S.prototype.select=S.prototype.columns,S.prototype.column=S.prototype.columns,S.prototype.andWhereNot=S.prototype.whereNot,S.prototype.andWhereNotColumn=S.prototype.whereNotColumn,S.prototype.andWhere=S.prototype.where,S.prototype.andWhereColumn=S.prototype.whereColumn,S.prototype.andWhereRaw=S.prototype.whereRaw,S.prototype.andWhereBetween=S.prototype.whereBetween,S.prototype.andWhereNotBetween=S.prototype.whereNotBetween,S.prototype.andHaving=S.prototype.having,S.prototype.andHavingIn=S.prototype.havingIn,S.prototype.andHavingNotIn=S.prototype.havingNotIn,S.prototype.andHavingNull=S.prototype.havingNull,S.prototype.andHavingNotNull=S.prototype.havingNotNull,S.prototype.andHavingExists=S.prototype.havingExists,S.prototype.andHavingNotExists=S.prototype.havingNotExists,S.prototype.andHavingBetween=S.prototype.havingBetween,S.prototype.andHavingNotBetween=S.prototype.havingNotBetween,S.prototype.from=S.prototype.table,S.prototype.into=S.prototype.table,S.prototype.del=S.prototype.delete,O(S),d(S),S.extend=(t,e)=>{if(Object.prototype.hasOwnProperty.call(S.prototype,t))throw new Error(`Can't extend QueryBuilder with existing method ('${t}').`);o(S.prototype,{[t]:e})};class k{constructor(t,e){this.builder=t,this._columns=e}ignore(){return this.builder._single.onConflict=this._columns,this.builder._single.ignore=!0,this.builder}merge(t){return this.builder._single.onConflict=this._columns,this.builder._single.merge={updates:t},this.builder}then(){throw new Error("Incomplete onConflict clause. .onConflict() must be directly followed by either .merge() or .ignore()")}}t.exports=S},function(t,e,n){var r=n(0),i=n(81),o=n(275),s=n(113);t.exports=function(t,e){return r(t)?t:i(t,e)?[t]:o(s(t))}},function(t,e,n){var r=n(125);t.exports=function(t){var e=null==t?0:t.length;return e?r(t,1,e):[]}},function(t,e,n){var r=n(13),i=n(68),o=n(23),s=n(9),a=n(283),u=n(284),c=n(136),l=n(137),h=n(285),f=n(142),p=r?r.iterator:void 0;t.exports=function(t){if(!t)return[];if(s(t))return a(t)?h(t):i(t);if(p&&t[p])return u(t[p]());var e=o(t);return("[object Map]"==e?c:"[object Set]"==e?l:f)(t)}},function(t,e,n){const{EventEmitter:r}=n(3),i=n(25),o=n(78),s=n(50),a=n(85),{replaceRawArrBindings:u,replaceKeyBindings:c}=n(294),l=n(6),h=n(83),{nanoid:f}=n(86),{isNumber:p,isObject:d}=n(1),{augmentWithBuilderInterface:g}=n(84),m=i("knex:bindings");class y extends r{constructor(t){super(),this.client=t,this.sql="",this.bindings=[],this._wrappedBefore=void 0,this._wrappedAfter=void 0,t&&t.config&&(this._debug=t.config.debug,h(this,4))}set(t,e){return this.sql=t,this.bindings=d(e)&&!e.toSQL||void 0===e?e:[e],this}timeout(t,{cancel:e}={}){return p(t)&&t>0&&(this._timeout=t,e&&(this.client.assertCanCancelQuery(),this._cancelOnTimeout=!0)),this}wrap(t,e){return this._wrappedBefore=t,this._wrappedAfter=e,this}toString(){return this.toQuery()}toSQL(t,e){let n;if(n=Array.isArray(this.bindings)?u(this,this.client):this.bindings&&s(this.bindings)?c(this,this.client):{method:"raw",sql:this.sql,bindings:void 0===this.bindings?[]:[this.bindings]},this._wrappedBefore&&(n.sql=this._wrappedBefore+n.sql),this._wrappedAfter&&(n.sql=n.sql+this._wrappedAfter),n.options=a(this._options,o,{}),this._timeout&&(n.timeout=this._timeout,this._cancelOnTimeout&&(n.cancelOnTimeout=this._cancelOnTimeout)),n.bindings=n.bindings||[],l.containsUndefined(n.bindings)){const t=l.getUndefinedIndices(this.bindings);throw m(n.bindings),new Error(`Undefined binding(s) detected for keys [${t}] when compiling RAW query: ${n.sql}`)}return n.__knexQueryUid=f(),Object.defineProperties(n,{toNative:{value:()=>({sql:this.client.positionBindings(n.sql),bindings:this.client.prepBindings(n.bindings)}),enumerable:!1}}),n}}y.prototype.isRawInstance=!0,g(y),l.addQueryContext(y),t.exports=y},function(t,e,n){const{isObject:r}=n(1);t.exports={compileCallback:function(t,e,n,r){const i=n.queryBuilder();return t.call(i,i),n.queryCompiler(i,r.bindings).toSQL(e||i._method||"select")},wrapAsIdentifier:function(t,e,n){const r=e.queryContext();return n.wrapIdentifier((t||"").trim(),r)},formatDefault:function(t,e,n){return void 0===t?"":null===t?"null":t&&t.isRawInstance?t.toQuery():"bool"===e?("false"===t&&(t=0),`'${t?1:0}'`):"json"!==e&&"jsonb"!==e||!r(t)?n._escapeBinding(t.toString()):`'${JSON.stringify(t)}'`}}},function(t,e,n){var r=n(42),i=n(297),o=Object.prototype.hasOwnProperty,s=i((function(t,e,n){o.call(t,n)?t[n].push(e):r(t,n,[e])}));t.exports=s},function(t,e,n){const r=n(53),{isString:i}=n(1);t.exports={pushAdditional:function(t){const e=new this.constructor(this.client,this.tableCompiler,this.columnBuilder);t.call(e,r(arguments)),this.sequence.additional=(this.sequence.additional||[]).concat(e.sequence)},pushQuery:function(t){t&&(i(t)&&(t={sql:t}),t.bindings||(t.bindings=this.bindingsHolder.bindings),this.sequence.push(t),this.formatter=this.client.formatter(this._commonBuilder),this.bindings=[],this.formatter.bindings=this.bindings)},unshiftQuery:function(t){t&&(i(t)&&(t={sql:t}),t.bindings||(t.bindings=this.bindingsHolder.bindings),this.sequence.unshift(t),this.formatter=this.client.formatter(this._commonBuilder),this.bindings=[],this.formatter.bindings=this.bindings)}}},function(t,e){e.isatty=function(){return!1},e.ReadStream=function(){throw new Error("tty.ReadStream is not implemented")},e.WriteStream=function(){throw new Error("tty.ReadStream is not implemented")}},function(t,e,n){const{Pool:r,TimeoutError:i}=n(155),{EventEmitter:o}=n(3),{promisify:s}=n(19),{makeEscape:a}=n(163),u=n(166),c=n(109),l=n(112),h=n(225),f=n(119),{executeQuery:p,enrichQueryObject:d}=n(129),g=n(51),m=n(144),y=n(306),b=n(147),v=n(307),w=n(148),_=n(314),x=n(149),{KnexTimeoutError:E}=n(30),{outputQuery:C,unwrapRaw:T}=n(27),{compileCallback:O}=n(56),j=n(55),A=n(317),N=n(150),S=n(318),{POOL_CONFIG_OPTIONS:R}=n(82),I=n(320),k=n(151),q=n(25)("knex:client");class P extends o{constructor(t={}){super(),this.config=t,this.logger=new S(t),this.dialect&&!this.config.client&&this.logger.warn("Using 'this.dialect' to identify the client is deprecated and support for it will be removed in the future. Please use configuration option 'client' instead.");if(!(this.config.client||this.dialect))throw new Error("knex: Required configuration option 'client' is missing.");t.version&&(this.version=t.version),t.connection&&t.connection instanceof Function?(this.connectionConfigProvider=t.connection,this.connectionConfigExpirationChecker=()=>!0):(this.connectionSettings=u(t.connection||{}),this.connectionConfigExpirationChecker=null),this.driverName&&t.connection&&(this.initializeDriver(),(!t.pool||t.pool&&0!==t.pool.max)&&this.initializePool(t)),this.valueForUndefined=this.raw("DEFAULT"),t.useNullAsDefault&&(this.valueForUndefined=null)}formatter(t){return new N(this,t)}queryBuilder(){return new g(this)}queryCompiler(t,e){return new m(this,t,e)}schemaBuilder(){return new y(this)}schemaCompiler(t){return new b(this,t)}tableBuilder(t,e,n,r){return new v(this,t,e,n,r)}viewBuilder(t,e,n){return new I(this,t,e,n)}tableCompiler(t){return new w(this,t)}viewCompiler(t){return new k(this,t)}columnBuilder(t,e,n){return new _(this,t,e,n)}columnCompiler(t,e){return new x(this,t,e)}runner(t){return new h(this,t)}transaction(t,e,n){return new f(this,t,e,n)}raw(){return new j(this).set(...arguments)}ref(){return new A(this,...arguments)}query(t,e){const n=d(t,e,this);return p(t,n,this)}stream(t,e,n,r){const i=d(t,e,this);return this._stream(t,i,n,r)}prepBindings(t){return t}positionBindings(t){return t}postProcessResponse(t,e){return this.config.postProcessResponse?this.config.postProcessResponse(t,e):t}wrapIdentifier(t,e){return this.customWrapIdentifier(t,this.wrapIdentifierImpl,e)}customWrapIdentifier(t,e,n){return this.config.wrapIdentifier?this.config.wrapIdentifier(t,e,n):e(t)}wrapIdentifierImpl(t){return"*"!==t?`"${t.replace(/"/g,'""')}"`:"*"}initializeDriver(){try{this.driver=this._driver()}catch(t){const e=`Knex: run\n$ npm install ${this.driverName} --save`;throw this.logger.error(`${e}\n${t.message}\n${t.stack}`),new Error(`${e}\n${t.message}`)}}poolDefaults(){return{min:2,max:10,propagateCreateError:!0}}getPoolSettings(t){t=c({},t,this.poolDefaults()),R.forEach(e=>{e in t&&this.logger.warn([`Pool config option "${e}" is no longer supported.`,"See https://github.com/Vincit/tarn.js for possible pool config options."].join(" "))});const e=[this.config.acquireConnectionTimeout||6e4,t.acquireTimeoutMillis].filter(t=>void 0!==t);t.acquireTimeoutMillis=Math.min(...e);const n=async()=>{if(!this.connectionConfigProvider)return;if(!this.connectionConfigExpirationChecker||!this.connectionConfigExpirationChecker())return;const t=await this.connectionConfigProvider();t.expirationChecker?(this.connectionConfigExpirationChecker=t.expirationChecker,delete t.expirationChecker):this.connectionConfigExpirationChecker=null,this.connectionSettings=t};return Object.assign(t,{create:async()=>{await n();const e=await this.acquireRawConnection();return e.__knexUid=l("__knexUid"),t.afterCreate&&await s(t.afterCreate)(e),e},destroy:t=>{if(void 0!==t)return this.destroyRawConnection(t)},validate:t=>t.__knex__disposed?(this.logger.warn("Connection Error: "+t.__knex__disposed),!1):this.validateConnection(t)})}initializePool(t=this.config){if(this.pool)return void this.logger.warn("The pool has already been initialized");const e={...this.getPoolSettings(t.pool)};e.afterCreate&&delete e.afterCreate,this.pool=new r(e)}validateConnection(t){return!0}async acquireConnection(){if(!this.pool)throw new Error("Unable to acquire a connection");try{const t=await this.pool.acquire().promise;return q("acquired connection from pool: %s",t.__knexUid),t}catch(t){let e=t;throw t instanceof i&&(e=new E("Knex: Timeout acquiring a connection. The pool is probably full. Are you missing a .transacting(trx) call?")),e}}releaseConnection(t){q("releasing connection to pool: %s",t.__knexUid);return this.pool.release(t)||q("pool refused connection: %s",t.__knexUid),Promise.resolve()}async destroy(t){try{this.pool&&this.pool.destroy&&await this.pool.destroy(),this.pool=void 0,"function"==typeof t&&t()}catch(e){if("function"==typeof t)return t(e);throw e}}database(){return this.connectionSettings.database}toString(){return"[object KnexClient]"}assertCanCancelQuery(){if(!this.canCancelQuery)throw new Error("Query cancelling not supported for this dialect")}cancelQuery(){throw new Error("Query cancelling not supported for this dialect")}alias(t,e){return t+" as "+e}parameter(t,e,n){return"function"==typeof t?C(O(t,void 0,this,n),!0,e,this):T(t,!0,e,this,n)||"?"}parameterize(t,e,n,r){if("function"==typeof t)return this.parameter(t,n,r);t=Array.isArray(t)?t:[t];let i="",o=-1;for(;++o<t.length;)o>0&&(i+=", "),i+=this.parameter(void 0===t[o]?e:t[o],n,r);return i}values(t,e,n){return Array.isArray(t)?Array.isArray(t[0])?`(${t.map(t=>`(${this.parameterize(t,void 0,e,n)})`).join(", ")})`:`(${this.parameterize(t,void 0,e,n)})`:t&&t.isRawInstance?`(${this.parameter(t,e,n)})`:this.parameter(t,e,n)}processPassedConnection(t){}}Object.assign(P.prototype,{_escapeBinding:a({escapeString:t=>`'${t.replace(/'/g,"''")}'`}),canCancelQuery:!1}),t.exports=P},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(158);function i(t){return"number"==typeof t&&t===Math.round(t)&&t>0}e.defer=function(){let t=null,e=null;return{promise:new Promise((n,r)=>{t=n,e=r}),resolve:t,reject:e}},e.now=function(){return Date.now()},e.duration=function(t,e){return Math.abs(e-t)},e.checkOptionalTime=function(t){return void 0===t||i(t)},e.checkRequiredTime=i,e.delay=function(t){return new Promise(e=>setTimeout(e,t))},e.reflect=function(t){return t.then(t=>new r.PromiseInspection({value:t})).catch(t=>new r.PromiseInspection({error:t}))},e.tryPromise=function(t){try{const e=t();return Promise.resolve(e)}catch(t){return Promise.reject(t)}}},function(t,e,n){var r=n(11)(n(4),"Map");t.exports=r},function(t,e,n){var r=n(183),i=n(190),o=n(192),s=n(193),a=n(194);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=s,u.prototype.set=a,t.exports=u},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}},function(t,e){t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},function(t,e){t.exports=function(t){return function(e){return t(e)}}},function(t,e,n){(function(t){var r=n(93),i=e&&!e.nodeType&&e,o=i&&"object"==typeof t&&t&&!t.nodeType&&t,s=o&&o.exports===i&&r.process,a=function(){try{var t=o&&o.require&&o.require("util").types;return t||s&&s.binding&&s.binding("util")}catch(t){}}();t.exports=a}).call(this,n(43)(t))},function(t,e){t.exports=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}},function(t,e,n){var r=n(70),i=n(100),o=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols,a=s?function(t){return null==t?[]:(t=Object(t),r(s(t),(function(e){return o.call(t,e)})))}:i;t.exports=a},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}},function(t,e){t.exports=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}},function(t,e,n){var r=n(105);t.exports=function(t){var e=new t.constructor(t.byteLength);return new r(e).set(new r(t)),e}},function(t,e,n){(e=t.exports=n(114)).Stream=e,e.Readable=e,e.Writable=n(75),e.Duplex=n(18),e.Transform=n(118),e.PassThrough=n(233)},function(t,e,n){var r=n(34),i=r.Buffer;function o(t,e){for(var n in t)e[n]=t[n]}function s(t,e,n){return i(t,e,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(o(r,e),e.Buffer=s),o(i,s),s.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,n)},s.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=i(t);return void 0!==e?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},s.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},s.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},function(t,e,n){"use strict";(function(e,r,i){var o=n(49);function s(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,n){var r=t.entry;t.entry=null;for(;r;){var i=r.callback;e.pendingcb--,i(n),r=r.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}t.exports=b;var a,u=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?r:o.nextTick;b.WritableState=y;var c=Object.create(n(31));c.inherits=n(24);var l={deprecate:n(231)},h=n(115),f=n(74).Buffer,p=i.Uint8Array||function(){};var d,g=n(116);function m(){}function y(t,e){a=a||n(18),t=t||{};var r=e instanceof a;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,c=t.writableHighWaterMark,l=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(c||0===c)?c:l,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var h=!1===t.decodeStrings;this.decodeStrings=!h,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var n=t._writableState,r=n.sync,i=n.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(n),e)!function(t,e,n,r,i){--e.pendingcb,n?(o.nextTick(i,r),o.nextTick(C,t,e),t._writableState.errorEmitted=!0,t.emit("error",r)):(i(r),t._writableState.errorEmitted=!0,t.emit("error",r),C(t,e))}(t,n,r,e,i);else{var s=x(n);s||n.corked||n.bufferProcessing||!n.bufferedRequest||_(t,n),r?u(w,t,n,s,i):w(t,n,s,i)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function b(t){if(a=a||n(18),!(d.call(b,this)||this instanceof a))return new b(t);this._writableState=new y(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),h.call(this)}function v(t,e,n,r,i,o,s){e.writelen=r,e.writecb=s,e.writing=!0,e.sync=!0,n?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function w(t,e,n,r){n||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,r(),C(t,e)}function _(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=e.bufferedRequestCount,i=new Array(r),o=e.corkedRequestsFree;o.entry=n;for(var a=0,u=!0;n;)i[a]=n,n.isBuf||(u=!1),n=n.next,a+=1;i.allBuffers=u,v(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new s(e),e.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,l=n.encoding,h=n.callback;if(v(t,e,!1,e.objectMode?1:c.length,c,l,h),n=n.next,e.bufferedRequestCount--,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequest=n,e.bufferProcessing=!1}function x(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function E(t,e){t._final((function(n){e.pendingcb--,n&&t.emit("error",n),e.prefinished=!0,t.emit("prefinish"),C(t,e)}))}function C(t,e){var n=x(e);return n&&(!function(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,o.nextTick(E,t,e)):(e.prefinished=!0,t.emit("prefinish")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),n}c.inherits(b,h),y.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(y.prototype,"buffer",{get:l.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(d=Function.prototype[Symbol.hasInstance],Object.defineProperty(b,Symbol.hasInstance,{value:function(t){return!!d.call(this,t)||this===b&&(t&&t._writableState instanceof y)}})):d=function(t){return t instanceof this},b.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},b.prototype.write=function(t,e,n){var r,i=this._writableState,s=!1,a=!i.objectMode&&(r=t,f.isBuffer(r)||r instanceof p);return a&&!f.isBuffer(t)&&(t=function(t){return f.from(t)}(t)),"function"==typeof e&&(n=e,e=null),a?e="buffer":e||(e=i.defaultEncoding),"function"!=typeof n&&(n=m),i.ended?function(t,e){var n=new Error("write after end");t.emit("error",n),o.nextTick(e,n)}(this,n):(a||function(t,e,n,r){var i=!0,s=!1;return null===n?s=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||e.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(t.emit("error",s),o.nextTick(r,s),i=!1),i}(this,i,t,n))&&(i.pendingcb++,s=function(t,e,n,r,i,o){if(!n){var s=function(t,e,n){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=f.from(e,n));return e}(e,r,i);r!==s&&(n=!0,i="buffer",r=s)}var a=e.objectMode?1:r.length;e.length+=a;var u=e.length<e.highWaterMark;u||(e.needDrain=!0);if(e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else v(t,e,!1,a,r,i,o);return u}(this,i,a,t,e,n)),s},b.prototype.cork=function(){this._writableState.corked++},b.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||_(this,t))},b.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(b.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),b.prototype._write=function(t,e,n){n(new Error("_write() is not implemented"))},b.prototype._writev=null,b.prototype.end=function(t,e,n){var r=this._writableState;"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!=t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(t,e,n){e.ending=!0,C(t,e),n&&(e.finished?o.nextTick(n):t.once("finish",n));e.ended=!0,t.writable=!1}(this,r,n)},Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),b.prototype.destroy=g.destroy,b.prototype._undestroy=g.undestroy,b.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,n(8),n(90).setImmediate,n(7))},function(t,e,n){var r=n(110),i=n(46);t.exports=function(t){return r((function(e,n){var r=-1,o=n.length,s=o>1?n[o-1]:void 0,a=o>2?n[2]:void 0;for(s=t.length>3&&"function"==typeof s?(o--,s):void 0,a&&i(n[0],n[1],a)&&(s=o<3?void 0:s,o=1),e=Object(e);++r<o;){var u=n[r];u&&t(e,u,r,s)}return e}))}},function(t,e,n){"use strict";(function(e){var r=n(257);
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function i(t,e){if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0}function o(t){return e.Buffer&&"function"==typeof e.Buffer.isBuffer?e.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}var s=n(19),a=Object.prototype.hasOwnProperty,u=Array.prototype.slice,c="foo"===function(){}.name;function l(t){return Object.prototype.toString.call(t)}function h(t){return!o(t)&&("function"==typeof e.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer))))}var f=t.exports=b,p=/\s*function\s+([^\(\s]*)\s*/;function d(t){if(s.isFunction(t)){if(c)return t.name;var e=t.toString().match(p);return e&&e[1]}}function g(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function m(t){if(c||!s.isFunction(t))return s.inspect(t);var e=d(t);return"[Function"+(e?": "+e:"")+"]"}function y(t,e,n,r,i){throw new f.AssertionError({message:n,actual:t,expected:e,operator:r,stackStartFunction:i})}function b(t,e){t||y(t,!0,e,"==",f.ok)}function v(t,e,n,r){if(t===e)return!0;if(o(t)&&o(e))return 0===i(t,e);if(s.isDate(t)&&s.isDate(e))return t.getTime()===e.getTime();if(s.isRegExp(t)&&s.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==typeof t||null!==e&&"object"==typeof e){if(h(t)&&h(e)&&l(t)===l(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===i(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(o(t)!==o(e))return!1;var a=(r=r||{actual:[],expected:[]}).actual.indexOf(t);return-1!==a&&a===r.expected.indexOf(e)||(r.actual.push(t),r.expected.push(e),function(t,e,n,r){if(null==t||null==e)return!1;if(s.isPrimitive(t)||s.isPrimitive(e))return t===e;if(n&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var i=w(t),o=w(e);if(i&&!o||!i&&o)return!1;if(i)return t=u.call(t),e=u.call(e),v(t,e,n);var a,c,l=E(t),h=E(e);if(l.length!==h.length)return!1;for(l.sort(),h.sort(),c=l.length-1;c>=0;c--)if(l[c]!==h[c])return!1;for(c=l.length-1;c>=0;c--)if(a=l[c],!v(t[a],e[a],n,r))return!1;return!0}(t,e,n,r))}return n?t===e:t==e}function w(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function _(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(t){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function x(t,e,n,r){var i;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),i=function(t){var e;try{t()}catch(t){e=t}return e}(e),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),t&&!i&&y(i,n,"Missing expected exception"+r);var o="string"==typeof r,a=!t&&i&&!n;if((!t&&s.isError(i)&&o&&_(i,n)||a)&&y(i,n,"Got unwanted exception"+r),t&&i&&n&&!_(i,n)||!t&&i)throw i}f.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=function(t){return g(m(t.actual),128)+" "+t.operator+" "+g(m(t.expected),128)}(this),this.generatedMessage=!0);var e=t.stackStartFunction||y;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var n=new Error;if(n.stack){var r=n.stack,i=d(e),o=r.indexOf("\n"+i);if(o>=0){var s=r.indexOf("\n",o+1);r=r.substring(s+1)}this.stack=r}}},s.inherits(f.AssertionError,Error),f.fail=y,f.ok=b,f.equal=function(t,e,n){t!=e&&y(t,e,n,"==",f.equal)},f.notEqual=function(t,e,n){t==e&&y(t,e,n,"!=",f.notEqual)},f.deepEqual=function(t,e,n){v(t,e,!1)||y(t,e,n,"deepEqual",f.deepEqual)},f.deepStrictEqual=function(t,e,n){v(t,e,!0)||y(t,e,n,"deepStrictEqual",f.deepStrictEqual)},f.notDeepEqual=function(t,e,n){v(t,e,!1)&&y(t,e,n,"notDeepEqual",f.notDeepEqual)},f.notDeepStrictEqual=function t(e,n,r){v(e,n,!0)&&y(e,n,r,"notDeepStrictEqual",t)},f.strictEqual=function(t,e,n){t!==e&&y(t,e,n,"===",f.strictEqual)},f.notStrictEqual=function(t,e,n){t===e&&y(t,e,n,"!==",f.notStrictEqual)},f.throws=function(t,e,n){x(!0,t,e,n)},f.doesNotThrow=function(t,e,n){x(!1,t,e,n)},f.ifError=function(t){if(t)throw t},f.strict=r((function t(e,n){e||y(e,!0,n,"==",t)}),f,{equal:f.strictEqual,deepEqual:f.deepStrictEqual,notEqual:f.notStrictEqual,notDeepEqual:f.notDeepStrictEqual}),f.strict.strict=f.strict;var E=Object.keys||function(t){var e=[];for(var n in t)a.call(t,n)&&e.push(n);return e}}).call(this,n(7))},function(t,e,n){var r=n(41),i=n(14),o=n(76),s=n(9),a=n(29),u=n(15),c=Object.prototype.hasOwnProperty,l=o((function(t,e){if(a(e)||s(e))i(e,u(e),t);else for(var n in e)c.call(e,n)&&r(t,n,e[n])}));t.exports=l},function(t,e,n){t.exports=n(258)},function(t,e,n){var r=n(52),i=n(33);t.exports=function(t,e){for(var n=0,o=(e=r(e,t)).length;null!=t&&n<o;)t=t[i(e[n++])];return n&&n==o?t:void 0}},function(t,e,n){var r=n(0),i=n(48),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;t.exports=function(t,e){if(r(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!i(t))||(s.test(t)||!o.test(t)||null!=e&&t in Object(e))}},function(t,e){const n=Object.freeze({pg:"postgres",postgresql:"postgres",sqlite:"sqlite3"}),r=Object.freeze(["mssql","mysql","mysql2","oracledb","postgres","pgnative","redshift","sqlite3","cockroachdb"].concat(Object.keys(n))),i=Object.freeze({MsSQL:"mssql",MySQL:"mysql",MySQL2:"mysql2",Oracle:"oracledb",PostgreSQL:"pg",PgNative:"pgnative",Redshift:"pg-redshift",SQLite:"sqlite3",CockroachDB:"cockroachdb"}),o=Object.freeze(["maxWaitingClients","testOnBorrow","fifo","priorityRange","autostart","evictionRunIntervalMillis","numTestsPerRun","softIdleTimeoutMillis","Promise"]);t.exports={CLIENT_ALIASES:n,SUPPORTED_CLIENTS:r,POOL_CONFIG_OPTIONS:o,COMMA_NO_PAREN_REGEX:/,[\s](?![^(]*\))/g,DRIVER_NAMES:i}},function(t,e){t.exports=function(t,e){t.client.config.asyncStackTraces&&(t._asyncStack={error:new Error,lines:e})}},function(t,e,n){const r=n(130),i=n(32),{callbackify:o}=n(19),s=n(127),{formatQuery:a}=n(129);t.exports={augmentWithBuilderInterface:function(t){t.prototype.toQuery=function(t){let e=this.toSQL(this._method,t);return Array.isArray(e)||(e=[e]),e.length?e.map(e=>a(e.sql,e.bindings,t,this.client)).reduce((t,e)=>t.concat(t.endsWith(";")?"\n":";\n",e)):""},t.prototype.then=function(){let t=this.client.runner(this).run();return this.client.config.asyncStackTraces&&(t=t.catch(t=>{t.originalStack=t.stack;const e=t.stack.split("\n")[0],{error:n,lines:r}=this._asyncStack,i=n.stack.split("\n").slice(r);throw i.unshift(e),t.stack=i.join("\n"),t})),t.then.apply(t,arguments)},t.prototype.options=function(t){return this._options=this._options||[],this._options.push(r(t)||{}),this},t.prototype.connection=function(t){return this._connection=t,this.client.processPassedConnection(t),this},t.prototype.debug=function(t){return this._debug=!arguments.length||t,this},t.prototype.transacting=function(t){if(t&&t.client&&(t.client.transacting?this.client=t.client:t.client.logger.warn("Invalid transaction value: "+t.client)),i(t))throw this.client.logger.error("Invalid value on transacting call, potential bug"),Error("Invalid transacting value (null, undefined or empty object)");return this},t.prototype.stream=function(t){return this.client.runner(this).stream(t)},t.prototype.pipe=function(t,e){return this.client.runner(this).pipe(t,e)},t.prototype.asCallback=function(t){const e=this.then();return o(()=>e)(t),e},t.prototype.catch=function(t){return this.then().catch(t)},Object.defineProperty(t.prototype,Symbol.toStringTag,{get:()=>"object"}),s(t.prototype)}}},function(t,e,n){var r=n(292),i=n(26),o=n(10),s=n(293),a=n(0);t.exports=function(t,e,n){var u=a(t)?r:s,c=arguments.length<3;return u(t,o(e,4),n,c,i)}},function(t,e){t.exports={nanoid:function(t=21){let e="",n=t;for(;n--;)e+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return e},nanonum:function(t=21){let e="",n=t;for(;n--;)e+="0123456789"[10*Math.random()|0];return e}}},function(t,e,n){t.exports=n(308)},function(t,e,n){const r=n(153);r.knex=r,r.default=r,t.exports=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class r extends Error{}e.TimeoutError=r},function(t,e,n){(function(t){var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},n(160),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(7))},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){var r=n(35),i=n(64),o=n(41),s=n(195),a=n(201),u=n(99),c=n(68),l=n(204),h=n(205),f=n(102),p=n(104),d=n(23),g=n(210),m=n(211),y=n(107),b=n(0),v=n(21),w=n(215),_=n(2),x=n(217),E=n(15),C=n(16),T={};T["[object Arguments]"]=T["[object Array]"]=T["[object ArrayBuffer]"]=T["[object DataView]"]=T["[object Boolean]"]=T["[object Date]"]=T["[object Float32Array]"]=T["[object Float64Array]"]=T["[object Int8Array]"]=T["[object Int16Array]"]=T["[object Int32Array]"]=T["[object Map]"]=T["[object Number]"]=T["[object Object]"]=T["[object RegExp]"]=T["[object Set]"]=T["[object String]"]=T["[object Symbol]"]=T["[object Uint8Array]"]=T["[object Uint8ClampedArray]"]=T["[object Uint16Array]"]=T["[object Uint32Array]"]=!0,T["[object Error]"]=T["[object Function]"]=T["[object WeakMap]"]=!1,t.exports=function t(e,n,O,j,A,N){var S,R=1&n,I=2&n,k=4&n;if(O&&(S=A?O(e,j,A,N):O(e)),void 0!==S)return S;if(!_(e))return e;var q=b(e);if(q){if(S=g(e),!R)return c(e,S)}else{var P=d(e),L="[object Function]"==P||"[object GeneratorFunction]"==P;if(v(e))return u(e,R);if("[object Object]"==P||"[object Arguments]"==P||L&&!A){if(S=I||L?{}:y(e),!R)return I?h(e,a(S,e)):l(e,s(S,e))}else{if(!T[P])return A?e:{};S=m(e,P,R)}}N||(N=new r);var B=N.get(e);if(B)return B;N.set(e,S),x(e)?e.forEach((function(r){S.add(t(r,n,O,r,e,N))})):w(e)&&e.forEach((function(r,i){S.set(i,t(r,n,O,i,e,N))}));var M=q?void 0:(k?I?p:f:I?C:E)(e);return i(M||e,(function(r,i){M&&(r=e[i=r]),o(S,i,t(r,n,O,i,e,N))})),S}},function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n(7))},function(t,e){var n=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return n.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},function(t,e,n){var r=n(11),i=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=i},function(t,e,n){var r=n(196),i=n(28),o=n(0),s=n(21),a=n(44),u=n(22),c=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=o(t),l=!n&&i(t),h=!n&&!l&&s(t),f=!n&&!l&&!h&&u(t),p=n||l||h||f,d=p?r(t.length,String):[],g=d.length;for(var m in t)!e&&!c.call(t,m)||p&&("length"==m||h&&("offset"==m||"parent"==m)||f&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||a(m,g))||d.push(m);return d}},function(t,e,n){var r=n(29),i=n(200),o=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return i(t);var e=[];for(var n in Object(t))o.call(t,n)&&"constructor"!=n&&e.push(n);return e}},function(t,e){t.exports=function(t,e){return function(n){return t(e(n))}}},function(t,e,n){(function(t){var r=n(4),i=e&&!e.nodeType&&e,o=i&&"object"==typeof t&&t&&!t.nodeType&&t,s=o&&o.exports===i?r.Buffer:void 0,a=s?s.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,r=a?a(n):new t.constructor(n);return t.copy(r),r}}).call(this,n(43)(t))},function(t,e){t.exports=function(){return[]}},function(t,e,n){var r=n(71),i=n(45),o=n(69),s=n(100),a=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)r(e,o(t)),t=i(t);return e}:s;t.exports=a},function(t,e,n){var r=n(103),i=n(69),o=n(15);t.exports=function(t){return r(t,o,i)}},function(t,e,n){var r=n(71),i=n(0);t.exports=function(t,e,n){var o=e(t);return i(t)?o:r(o,n(t))}},function(t,e,n){var r=n(103),i=n(101),o=n(16);t.exports=function(t){return r(t,o,i)}},function(t,e,n){var r=n(4).Uint8Array;t.exports=r},function(t,e,n){var r=n(72);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}},function(t,e,n){var r=n(108),i=n(45),o=n(29);t.exports=function(t){return"function"!=typeof t.constructor||o(t)?{}:r(i(t))}},function(t,e,n){var r=n(2),i=Object.create,o=function(){function t(){}return function(e){if(!r(e))return{};if(i)return i(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=o},function(t,e,n){var r=n(110),i=n(20),o=n(46),s=n(16),a=Object.prototype,u=a.hasOwnProperty,c=r((function(t,e){t=Object(t);var n=-1,r=e.length,c=r>2?e[2]:void 0;for(c&&o(e[0],e[1],c)&&(r=1);++n<r;)for(var l=e[n],h=s(l),f=-1,p=h.length;++f<p;){var d=h[f],g=t[d];(void 0===g||i(g,a[d])&&!u.call(t,d))&&(t[d]=l[d])}return t}));t.exports=c},function(t,e,n){var r=n(17),i=n(219),o=n(221);t.exports=function(t,e){return o(i(t,e,r),t+"")}},function(t,e){t.exports=function(t){return function(){return t}}},function(t,e,n){var r=n(113),i=0;t.exports=function(t){var e=++i;return r(t)+e}},function(t,e,n){var r=n(224);t.exports=function(t){return null==t?"":r(t)}},function(t,e,n){"use strict";(function(e,r){var i=n(49);t.exports=v;var o,s=n(91);v.ReadableState=b;n(3).EventEmitter;var a=function(t,e){return t.listeners(e).length},u=n(115),c=n(74).Buffer,l=e.Uint8Array||function(){};var h=Object.create(n(31));h.inherits=n(24);var f=n(228),p=void 0;p=f&&f.debuglog?f.debuglog("stream"):function(){};var d,g=n(229),m=n(116);h.inherits(v,u);var y=["error","close","destroy","pause","resume"];function b(t,e){t=t||{};var r=e instanceof(o=o||n(18));this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,s=t.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(s||0===s)?s:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(d||(d=n(117).StringDecoder),this.decoder=new d(t.encoding),this.encoding=t.encoding)}function v(t){if(o=o||n(18),!(this instanceof v))return new v(t);this._readableState=new b(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),u.call(this)}function w(t,e,n,r,i){var o,s=t._readableState;null===e?(s.reading=!1,function(t,e){if(e.ended)return;if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,E(t)}(t,s)):(i||(o=function(t,e){var n;r=e,c.isBuffer(r)||r instanceof l||"string"==typeof e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));var r;return n}(s,e)),o?t.emit("error",o):s.objectMode||e&&e.length>0?("string"==typeof e||s.objectMode||Object.getPrototypeOf(e)===c.prototype||(e=function(t){return c.from(t)}(e)),r?s.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):_(t,s,e,!0):s.ended?t.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!n?(e=s.decoder.write(e),s.objectMode||0!==e.length?_(t,s,e,!1):T(t,s)):_(t,s,e,!1))):r||(s.reading=!1));return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(s)}function _(t,e,n,r){e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&E(t)),T(t,e)}Object.defineProperty(v.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),v.prototype.destroy=m.destroy,v.prototype._undestroy=m.undestroy,v.prototype._destroy=function(t,e){this.push(null),e(t)},v.prototype.push=function(t,e){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=c.from(t,e),e=""),n=!0),w(this,t,e,!1,n)},v.prototype.unshift=function(t){return w(this,t,null,!0,!1)},v.prototype.isPaused=function(){return!1===this._readableState.flowing},v.prototype.setEncoding=function(t){return d||(d=n(117).StringDecoder),this._readableState.decoder=new d(t),this._readableState.encoding=t,this};function x(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=8388608?t=8388608:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function E(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(p("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?i.nextTick(C,t):C(t))}function C(t){p("emit readable"),t.emit("readable"),N(t)}function T(t,e){e.readingMore||(e.readingMore=!0,i.nextTick(O,t,e))}function O(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(p("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function j(t){p("readable nexttick read 0"),t.read(0)}function A(t,e){e.reading||(p("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),N(t),e.flowing&&!e.reading&&t.read(0)}function N(t){var e=t._readableState;for(p("flow",e.flowing);e.flowing&&null!==t.read(););}function S(t,e){return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):n=function(t,e,n){var r;t<e.head.data.length?(r=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):r=t===e.head.data.length?e.shift():n?function(t,e){var n=e.head,r=1,i=n.data;t-=i.length;for(;n=n.next;){var o=n.data,s=t>o.length?o.length:t;if(s===o.length?i+=o:i+=o.slice(0,t),0===(t-=s)){s===o.length?(++r,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(s));break}++r}return e.length-=r,i}(t,e):function(t,e){var n=c.allocUnsafe(t),r=e.head,i=1;r.data.copy(n),t-=r.data.length;for(;r=r.next;){var o=r.data,s=t>o.length?o.length:t;if(o.copy(n,n.length-t,0,s),0===(t-=s)){s===o.length?(++i,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=o.slice(s));break}++i}return e.length-=i,n}(t,e);return r}(t,e.buffer,e.decoder),n);var n}function R(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,i.nextTick(I,e,t))}function I(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function k(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}v.prototype.read=function(t){p("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return p("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?R(this):E(this),null;if(0===(t=x(t,e))&&e.ended)return 0===e.length&&R(this),null;var r,i=e.needReadable;return p("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&p("length less than watermark",i=!0),e.ended||e.reading?p("reading or ended",i=!1):i&&(p("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=x(n,e))),null===(r=t>0?S(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&R(this)),null!==r&&this.emit("data",r),r},v.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},v.prototype.pipe=function(t,e){var n=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=t;break;case 1:o.pipes=[o.pipes,t];break;default:o.pipes.push(t)}o.pipesCount+=1,p("pipe count=%d opts=%j",o.pipesCount,e);var u=(!e||!1!==e.end)&&t!==r.stdout&&t!==r.stderr?l:v;function c(e,r){p("onunpipe"),e===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,p("cleanup"),t.removeListener("close",y),t.removeListener("finish",b),t.removeListener("drain",h),t.removeListener("error",m),t.removeListener("unpipe",c),n.removeListener("end",l),n.removeListener("end",v),n.removeListener("data",g),f=!0,!o.awaitDrain||t._writableState&&!t._writableState.needDrain||h())}function l(){p("onend"),t.end()}o.endEmitted?i.nextTick(u):n.once("end",u),t.on("unpipe",c);var h=function(t){return function(){var e=t._readableState;p("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&a(t,"data")&&(e.flowing=!0,N(t))}}(n);t.on("drain",h);var f=!1;var d=!1;function g(e){p("ondata"),d=!1,!1!==t.write(e)||d||((1===o.pipesCount&&o.pipes===t||o.pipesCount>1&&-1!==k(o.pipes,t))&&!f&&(p("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,d=!0),n.pause())}function m(e){p("onerror",e),v(),t.removeListener("error",m),0===a(t,"error")&&t.emit("error",e)}function y(){t.removeListener("finish",b),v()}function b(){p("onfinish"),t.removeListener("close",y),v()}function v(){p("unpipe"),n.unpipe(t)}return n.on("data",g),function(t,e,n){if("function"==typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?s(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}(t,"error",m),t.once("close",y),t.once("finish",b),t.emit("pipe",n),o.flowing||(p("pipe resume"),n.resume()),t},v.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n)),this;if(!t){var r=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,n);return this}var s=k(e.pipes,t);return-1===s||(e.pipes.splice(s,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n)),this},v.prototype.on=function(t,e){var n=u.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&E(this):i.nextTick(j,this))}return n},v.prototype.addListener=v.prototype.on,v.prototype.resume=function(){var t=this._readableState;return t.flowing||(p("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,i.nextTick(A,t,e))}(this,t)),this},v.prototype.pause=function(){return p("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(p("pause"),this._readableState.flowing=!1,this.emit("pause")),this},v.prototype.wrap=function(t){var e=this,n=this._readableState,r=!1;for(var i in t.on("end",(function(){if(p("wrapped end"),n.decoder&&!n.ended){var t=n.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(i){(p("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i)||(n.objectMode||i&&i.length)&&(e.push(i)||(r=!0,t.pause()))})),t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var o=0;o<y.length;o++)t.on(y[o],this.emit.bind(this,y[o]));return this._read=function(e){p("wrapped _read",e),r&&(r=!1,t.resume())},this},Object.defineProperty(v.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),v._fromList=S}).call(this,n(7),n(8))},function(t,e,n){t.exports=n(3).EventEmitter},function(t,e,n){"use strict";var r=n(49);function i(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var n=this,o=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return o||s?(e?e(t):!t||this._writableState&&this._writableState.errorEmitted||r.nextTick(i,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!e&&t?(r.nextTick(i,n,t),n._writableState&&(n._writableState.errorEmitted=!0)):e&&e(t)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(t,e,n){"use strict";var r=n(232).Buffer,i=r.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(r.isEncoding===i||!i(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=u,this.end=c,e=4;break;case"utf8":this.fillLast=a,e=4;break;case"base64":this.text=l,this.end=h,e=3;break;default:return this.write=f,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(e)}function s(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function a(t){var e=this.lastTotal-this.lastNeed,n=function(t,e,n){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"�"}}(this,t);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function u(t,e){if((t.length-e)%2==0){var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function c(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function l(t,e){var n=(t.length-e)%3;return 0===n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function h(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function f(t){return t.toString(this.encoding)}function p(t){return t&&t.length?this.write(t):""}e.StringDecoder=o,o.prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},o.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e},o.prototype.text=function(t,e){var n=function(t,e,n){var r=e.length-1;if(r<n)return 0;var i=s(e[r]);if(i>=0)return i>0&&(t.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if((i=s(e[r]))>=0)return i>0&&(t.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if((i=s(e[r]))>=0)return i>0&&(2===i?i=0:t.lastNeed=i-3),i;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e,n){"use strict";t.exports=s;var r=n(18),i=Object.create(n(31));function o(t,e){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=e&&this.push(e),r(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function s(t){if(!(this instanceof s))return new s(t);r.call(this,t),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",a)}function a(){var t=this;"function"==typeof this._flush?this._flush((function(e,n){u(t,e,n)})):u(this,null,null)}function u(t,e,n){if(e)return t.emit("error",e);if(null!=n&&t.push(n),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}i.inherits=n(24),i.inherits(s,r),s.prototype.push=function(t,e){return this._transformState.needTransform=!1,r.prototype.push.call(this,t,e)},s.prototype._transform=function(t,e,n){throw new Error("_transform() is not implemented")},s.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},s.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},s.prototype._destroy=function(t,e){var n=this;r.prototype._destroy.call(this,t,(function(t){e(t),n.emit("close")}))}},function(t,e,n){const{EventEmitter:r}=n(3),i=n(25),o=n(112),{callbackify:s}=n(19),a=n(120),{timeout:u,KnexTimeoutError:c}=n(30),l=n(127),h=i("knex:tx");const f=["read uncommitted","read committed","snapshot","repeatable read","serializable"];class p extends r{constructor(t,e,n={userParams:{},doNotRejectOnRollback:!0},r=null){super(),this.userParams=n.userParams,this.doNotRejectOnRollback=n.doNotRejectOnRollback;const i=this.txid=o("trx");this.client=t,this.logger=t.logger,this.outerTx=r,this.trxClient=void 0,this._completed=!1,this._debug=t.config&&t.config.debug,n.isolationLevel&&this.setIsolationLevel(n.isolationLevel),h("%s: Starting %s transaction",i,r?"nested":"top level"),this._lastChild=Promise.resolve();const s=(r?r._lastChild:Promise.resolve()).then(()=>this._evaluateContainer(n,e));this._promise=s.then(t=>t),r&&(r._lastChild=s.catch(()=>{}))}isCompleted(){return this._completed||this.outerTx&&this.outerTx.isCompleted()||!1}begin(t){return(this.isolationLevel?this.query(t,`SET TRANSACTION ISOLATION LEVEL ${this.isolationLevel};`):Promise.resolve()).then(()=>this.query(t,"BEGIN;"))}savepoint(t){return this.query(t,`SAVEPOINT ${this.txid};`)}commit(t,e){return this.query(t,"COMMIT;",1,e)}release(t,e){return this.query(t,`RELEASE SAVEPOINT ${this.txid};`,1,e)}setIsolationLevel(t){if(!f.includes(t))throw new Error("Invalid isolationLevel, supported isolation levels are: "+JSON.stringify(f));return this.isolationLevel=t,this}rollback(t,e){return u(this.query(t,"ROLLBACK",2,e),5e3).catch(t=>{if(!(t instanceof c))return Promise.reject(t);this._rejecter(e)})}rollbackTo(t,e){return u(this.query(t,"ROLLBACK TO SAVEPOINT "+this.txid,2,e),5e3).catch(t=>{if(!(t instanceof c))return Promise.reject(t);this._rejecter(e)})}query(t,e,n,r){const i=this.trxClient.query(t,e).catch(t=>{n=2,r=t,this._completed=!0,h("%s error running transaction query",this.txid)}).then(t=>{if(1===n&&this._resolver(r),2===n){if(void 0===r){if(this.doNotRejectOnRollback&&/^ROLLBACK\b/i.test(e))return void this._resolver();r=new Error("Transaction rejected with non-error: "+r)}this._rejecter(r)}return t});return 1!==n&&2!==n||(this._completed=!0),i}debug(t){return this._debug=!arguments.length||t,this}async _evaluateContainer(t,e){return this.acquireConnection(t,t=>{const n=this.trxClient=function(t,e,n){const r=Object.create(e.constructor.prototype);r.version=e.version,r.config=e.config,r.driver=e.driver,r.connectionSettings=e.connectionSettings,r.transacting=!0,r.valueForUndefined=e.valueForUndefined,r.logger=e.logger,r.on("start",(function(n){t.emit("start",n),e.emit("start",n)})),r.on("query",(function(n){t.emit("query",n),e.emit("query",n)})),r.on("query-error",(function(n,r){t.emit("query-error",n,r),e.emit("query-error",n,r)})),r.on("query-response",(function(n,r,i){t.emit("query-response",n,r,i),e.emit("query-response",n,r,i)}));const i=r.query;r.query=function(e,o){const s=t.isCompleted();return new Promise((function(a,u){try{if(e!==n)throw new Error("Invalid connection for transaction query.");s&&d(t,o),a(i.call(r,e,o))}catch(t){u(t)}}))};const o=r.stream;return r.stream=function(e,i,s,a){const u=t.isCompleted();return new Promise((function(c,l){try{if(e!==n)throw new Error("Invalid connection for transaction query.");u&&d(t,i),c(o.call(r,e,i,s,a))}catch(t){l(t)}}))},r.acquireConnection=function(){return Promise.resolve(n)},r.releaseConnection=function(){return Promise.resolve()},r}(this,this.client,t),r=this.client.transacting?this.savepoint(t):this.begin(t),i=new Promise((t,e)=>{this._resolver=t,this._rejecter=e});return r.then(()=>function(t,e,n){const r=a(n);r.context.withUserParams=()=>{throw new Error("Cannot set user params on a transaction - it can only inherit params from main knex instance")},r.isTransaction=!0,r.userParams=t.userParams||{},r.context.transaction=function(e,n){return n?void 0===n.doNotRejectOnRollback&&(n.doNotRejectOnRollback=!0):n={doNotRejectOnRollback:!0},this._transaction(e,n,t)},r.savepoint=function(t,e){return r.transaction(t,e)},t.client.transacting?(r.commit=n=>t.release(e,n),r.rollback=n=>t.rollbackTo(e,n)):(r.commit=n=>t.commit(e,n),r.rollback=n=>t.rollback(e,n));return r.isCompleted=()=>t.isCompleted(),r}(this,t,n)).then(t=>{let n;t.executionPromise=i;try{n=e(t)}catch(t){n=Promise.reject(t)}return n&&n.then&&"function"==typeof n.then&&n.then(e=>t.commit(e)).catch(e=>t.rollback(e)),null}).catch(t=>this._rejecter(t)),i})}async acquireConnection(t,e){const n=t&&t.connection,r=n||await this.client.acquireConnection();try{return r.__knexTxId=this.txid,await e(r)}finally{n?h("%s: not releasing external connection",this.txid):(h("%s: releasing connection",this.txid),this.client.releaseConnection(r))}}then(t,e){return this._promise.then(t,e)}catch(...t){return this._promise.catch(...t)}asCallback(t){return s(()=>this._promise)(t),this._promise}}function d(t,e){const n="string"==typeof e?e:e&&e.sql;throw h("%s: Transaction completed: %s",t.txid,n),new Error("Transaction query already complete, run with DEBUG=knex:tx for more info")}l(p.prototype),t.exports=p},function(t,e,n){const{EventEmitter:r}=n(3),i=n(240),o=n(121),s=n(241),a=n(247),{isObject:u}=n(1),c={client:{get(){return this.context.client},set(t){this.context.client=t},configurable:!0},userParams:{get(){return this.context.userParams},set(t){this.context.userParams=t},configurable:!0},schema:{get(){return this.client.schemaBuilder()},configurable:!0},migrate:{get:()=>null,configurable:!0},seed:{get:()=>null,configurable:!0},fn:{get(){return new i(this.client)},configurable:!0}},l=["raw","batchInsert","transaction","transactionProvider","initialize","destroy","ref","withUserParams","queryBuilder","disableProcessing","enableProcessing"];for(const t of l)c[t]={value:function(...e){return this.context[t](...e)},configurable:!0};function h(t){const e=t.context||{};Object.assign(e,{queryBuilder(){return this.client.queryBuilder()},raw(){return this.client.raw.apply(this.client,arguments)},batchInsert(t,e,n=1e3){return a(this,t,e,n)},transaction(t,e){!e&&u(t)&&(e=t,t=null);const n=Object.assign({},e);return n.userParams=this.userParams||{},void 0===n.doNotRejectOnRollback&&(n.doNotRejectOnRollback=!0),this._transaction(t,n)},_transaction(t,e,n=null){if(t){return this.client.transaction(t,e,n)}return new Promise((t,r)=>{this.client.transaction(t,e,n).catch(r)})},transactionProvider(t){let e;return()=>(e||(e=this.transaction(void 0,t)),e)},initialize(t){return this.client.initializePool(t)},destroy(t){return this.client.destroy(t)},ref(t){return this.client.ref(t)},disableProcessing(){this.userParams.isProcessingDisabled||(this.userParams.wrapIdentifier=this.client.config.wrapIdentifier,this.userParams.postProcessResponse=this.client.config.postProcessResponse,this.client.config.wrapIdentifier=null,this.client.config.postProcessResponse=null,this.userParams.isProcessingDisabled=!0)},enableProcessing(){this.userParams.isProcessingDisabled&&(this.client.config.wrapIdentifier=this.userParams.wrapIdentifier,this.client.config.postProcessResponse=this.userParams.postProcessResponse,this.userParams.isProcessingDisabled=!1)},withUserParams(e){const n=function(t){const e=Object.create(Object.getPrototypeOf(t),Object.getOwnPropertyDescriptors(t)),n={},r=((t,e)=>g(n,t,e)).bind(e);return Object.assign(r,t),r.context=n,r}(t);return this.client&&(n.client=Object.create(this.client.constructor.prototype),s(n.client,this.client),n.client.config=Object.assign({},this.client.config)),p(n,n.client),f("query",t,n),f("query-error",t,n),f("query-response",t,n),f("start",t,n),n.userParams=e,n}}),t.context||(t.context=e)}function f(t,e,n){e.listeners(t).forEach(e=>{n.on(t,e)})}function p(t,e){for(let e=0;e<o.length;e++){const n=o[e];t[n]=function(){const t=this.queryBuilder();return t[n].apply(t,arguments)}}Object.defineProperties(t,c),h(t),t.client=e,t.userParams={};const n=new r;for(const e in n)t[e]=n[e];t._internalListeners&&t._internalListeners.forEach(({eventName:e,listener:n})=>{t.client.removeListener(e,n)}),t._internalListeners=[],d(t,"start",e=>{t.emit("start",e)}),d(t,"query",e=>{t.emit("query",e)}),d(t,"query-error",(e,n)=>{t.emit("query-error",e,n)}),d(t,"query-response",(e,n,r)=>{t.emit("query-response",e,n,r)})}function d(t,e,n){t.client.on(e,n),t._internalListeners.push({eventName:e,listener:n})}function g(t,e,n){const r=t.queryBuilder();return e||t.client.logger.warn("calling knex without a tableName is deprecated. Use knex.queryBuilder() instead."),e?r.table(e,n):r}t.exports=function(t){function e(t,n){return g(e.context,t,n)}return p(e,t),e}},function(t,e){t.exports=["with","withRecursive","select","as","columns","column","from","fromJS","into","withSchema","table","distinct","join","joinRaw","innerJoin","leftJoin","leftOuterJoin","rightJoin","rightOuterJoin","outerJoin","fullOuterJoin","crossJoin","where","andWhere","orWhere","whereNot","orWhereNot","whereRaw","whereWrapped","havingWrapped","orWhereRaw","whereExists","orWhereExists","whereNotExists","orWhereNotExists","whereIn","orWhereIn","whereNotIn","orWhereNotIn","whereNull","orWhereNull","whereNotNull","orWhereNotNull","whereBetween","whereNotBetween","andWhereBetween","andWhereNotBetween","orWhereBetween","orWhereNotBetween","groupBy","groupByRaw","orderBy","orderByRaw","union","unionAll","intersect","having","havingRaw","orHaving","orHavingRaw","offset","limit","count","countDistinct","min","max","sum","sumDistinct","avg","avgDistinct","increment","decrement","first","debug","pluck","clearSelect","clearWhere","clearGroup","clearOrder","clearHaving","insert","update","returning","del","delete","truncate","transacting","connection"]},function(t,e,n){var r=n(42),i=n(20);t.exports=function(t,e,n){(void 0!==n&&!i(t[e],n)||void 0===n&&!(e in t))&&r(t,e,n)}},function(t,e,n){var r=n(243)();t.exports=r},function(t,e){t.exports=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}},function(t,e){t.exports=function(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}},function(t,e,n){var r=n(249);t.exports=function(t){var e=r(t),n=e%1;return e==e?n?e-n:e:0}},function(t,e,n){const r=n(128);t.exports=Promise.prototype.finally?t=>Object.assign(t,{finally(t){return this.then().finally(t)}}):r},function(t,e){t.exports=function(){}},function(t,e,n){const r=n(25)("knex:query"),i=n(25)("knex:bindings"),{isString:o}=n(1);function s(t,e,n,r){e=null==e?[]:[].concat(e);let i=0;return t.replace(/\\?\?/g,t=>{if("\\?"===t)return"?";if(i===e.length)return t;const o=e[i++];return r._escapeBinding(o,{timeZone:n})})}t.exports={enrichQueryObject:function(t,e,n){const s=o(e)?{sql:e}:e;s.bindings=n.prepBindings(s.bindings),s.sql=n.positionBindings(s.sql);const{__knexUid:a,__knexTxId:u}=t;var c,l;return n.emit("query",Object.assign({__knexUid:a,__knexTxId:u},s)),c=s.sql,l=u,r(c.replace(/%/g,"%%"),l),i(s.bindings,u),s},executeQuery:function(t,e,n){return n._query(t,e).catch(r=>{throw r.message=s(e.sql,e.bindings,void 0,n)+" - "+r.message,n.emit("query-error",r,Object.assign({__knexUid:t.__knexUid,__knexTxId:t.__knexUid},e)),r})},formatQuery:s}},function(t,e,n){var r=n(92);t.exports=function(t){return r(t,4)}},function(t,e,n){var r=n(123),i=n(15);t.exports=function(t,e){return t&&r(t,e,i)}},function(t,e,n){var r=n(26);t.exports=function(t,e){var n=[];return r(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}},function(t,e,n){var r=n(265),i=n(5);t.exports=function t(e,n,o,s,a){return e===n||(null==e||null==n||!i(e)&&!i(n)?e!=e&&n!=n:r(e,n,o,s,t,a))}},function(t,e,n){var r=n(266),i=n(135),o=n(269);t.exports=function(t,e,n,s,a,u){var c=1&n,l=t.length,h=e.length;if(l!=h&&!(c&&h>l))return!1;var f=u.get(t),p=u.get(e);if(f&&p)return f==e&&p==t;var d=-1,g=!0,m=2&n?new r:void 0;for(u.set(t,e),u.set(e,t);++d<l;){var y=t[d],b=e[d];if(s)var v=c?s(b,y,d,e,t,u):s(y,b,d,t,e,u);if(void 0!==v){if(v)continue;g=!1;break}if(m){if(!i(e,(function(t,e){if(!o(m,e)&&(y===t||a(y,t,n,s,u)))return m.push(e)}))){g=!1;break}}else if(y!==b&&!a(y,b,n,s,u)){g=!1;break}}return u.delete(t),u.delete(e),g}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}},function(t,e,n){var r=n(2);t.exports=function(t){return t==t&&!r(t)}},function(t,e){t.exports=function(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}},function(t,e,n){var r=n(52),i=n(28),o=n(0),s=n(44),a=n(65),u=n(33);t.exports=function(t,e,n){for(var c=-1,l=(e=r(e,t)).length,h=!1;++c<l;){var f=u(e[c]);if(!(h=null!=t&&n(t,f)))break;t=t[f]}return h||++c!=l?h:!!(l=null==t?0:t.length)&&a(l)&&s(f,l)&&(o(t)||i(t))}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw new TypeError("Expected a function");return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}},function(t,e,n){var r=n(289),i=n(15);t.exports=function(t){return null==t?[]:r(t,i(t))}},function(t,e,n){const r=n(77);function i(t,e,n,r,i){if("function"==typeof n)return{type:"onWrapped",value:n,bool:e};switch(arguments.length){case 3:return{type:"onRaw",value:n,bool:e};case 4:return{type:t,column:n,operator:"=",value:r,bool:e};default:return{type:t,column:n,operator:r,value:i,bool:e}}}class o{constructor(t,e,n){this.schema=n,this.table=t,this.joinType=e,this.and=this,this.clauses=[]}get or(){return this._bool("or")}on(t){if("object"==typeof t&&"function"!=typeof t.toSQL){const e=Object.keys(t);let n=-1;const r="or"===this._bool()?"orOn":"on";for(;++n<e.length;)this[r](e[n],t[e[n]]);return this}const e=i("onBasic",this._bool(),...arguments);return e&&this.clauses.push(e),this}using(t){return this.clauses.push({type:"onUsing",column:t,bool:this._bool()})}orOn(t,e,n){return this._bool("or").on.apply(this,arguments)}onVal(t){if("object"==typeof t&&"function"!=typeof t.toSQL){const e=Object.keys(t);let n=-1;const r="or"===this._bool()?"orOnVal":"onVal";for(;++n<e.length;)this[r](e[n],t[e[n]]);return this}const e=i("onVal",this._bool(),...arguments);return e&&this.clauses.push(e),this}andOnVal(){return this.onVal(...arguments)}orOnVal(){return this._bool("or").onVal(...arguments)}onBetween(t,e){return r(Array.isArray(e),"The second argument to onBetween must be an array."),r(2===e.length,"You must specify 2 values for the onBetween clause"),this.clauses.push({type:"onBetween",column:t,value:e,bool:this._bool(),not:this._not()}),this}onNotBetween(t,e){return this._not(!0).onBetween(t,e)}orOnBetween(t,e){return this._bool("or").onBetween(t,e)}orOnNotBetween(t,e){return this._bool("or")._not(!0).onBetween(t,e)}onIn(t,e){return Array.isArray(e)&&0===e.length?this.on(1,"=",0):(this.clauses.push({type:"onIn",column:t,value:e,not:this._not(),bool:this._bool()}),this)}onNotIn(t,e){return this._not(!0).onIn(t,e)}orOnIn(t,e){return this._bool("or").onIn(t,e)}orOnNotIn(t,e){return this._bool("or")._not(!0).onIn(t,e)}onNull(t){return this.clauses.push({type:"onNull",column:t,not:this._not(),bool:this._bool()}),this}orOnNull(t){return this._bool("or").onNull(t)}onNotNull(t){return this._not(!0).onNull(t)}orOnNotNull(t){return this._not(!0)._bool("or").onNull(t)}onExists(t){return this.clauses.push({type:"onExists",value:t,not:this._not(),bool:this._bool()}),this}orOnExists(t){return this._bool("or").onExists(t)}onNotExists(t){return this._not(!0).onExists(t)}orOnNotExists(t){return this._not(!0)._bool("or").onExists(t)}type(t){return this.joinType=t,this}_bool(t){if(1===arguments.length)return this._boolFlag=t,this;const e=this._boolFlag||"and";return this._boolFlag="and",e}_not(t){if(1===arguments.length)return this._notFlag=t,this;const e=this._notFlag;return this._notFlag=!1,e}}Object.assign(o.prototype,{grouping:"join"}),o.prototype.andOn=o.prototype.on,o.prototype.andOnIn=o.prototype.onIn,o.prototype.andOnNotIn=o.prototype.onNotIn,o.prototype.andOnNull=o.prototype.onNull,o.prototype.andOnNotNull=o.prototype.onNotNull,o.prototype.andOnExists=o.prototype.onExists,o.prototype.andOnNotExists=o.prototype.onNotExists,o.prototype.andOnBetween=o.prototype.onBetween,o.prototype.andOnNotBetween=o.prototype.onNotBetween,t.exports=o},function(t,e,n){const r=n(6),i=n(55),o=n(51),s=n(143),a=n(25),u=n(78),c=n(296),l=n(57),h=n(145),f=n(32),p=n(146),d=n(302),g=n(85),{nanoid:m}=n(86),{isString:y,isUndefined:b}=n(1),{columnize:v,direction:w,operator:_,wrap:x,unwrapRaw:E,rawOrFn:C}=n(27),T=a("knex:bindings"),O=["columns","join","where","union","group","having","order","limit","offset","lock","waitMode"];t.exports=class{constructor(t,e,n){this.client=t,this.method=e._method||"select",this.options=e._options,this.single=e._single,this.timeout=e._timeout||!1,this.cancelOnTimeout=e._cancelOnTimeout||!1,this.grouped=l(e._statements,"grouping"),this.formatter=t.formatter(e),this._emptyInsertValue="default values",this.first=this.select,this.bindings=n||[],this.formatter.bindings=this.bindings,this.bindingsHolder=this,this.builder=this.formatter.builder}toSQL(t,e){this._undefinedInWhereClause=!1,this.undefinedBindingsInfo=[];const n=this[t=t||this.method]()||"",r={method:t,options:g(this.options,u,{}),timeout:this.timeout,cancelOnTimeout:this.cancelOnTimeout,bindings:this.bindingsHolder.bindings||[],__knexQueryUid:m()};if(Object.defineProperties(r,{toNative:{value:()=>({sql:this.client.positionBindings(r.sql),bindings:this.client.prepBindings(r.bindings)}),enumerable:!1}}),y(n)?r.sql=n:u(r,n),"select"!==t&&"first"!==t||this.single.as&&(r.as=this.single.as),this._undefinedInWhereClause)throw T(r.bindings),new Error(`Undefined binding(s) detected when compiling ${t.toUpperCase()}. Undefined column(s): [${this.undefinedBindingsInfo.join(", ")}] query: ${r.sql}`);return r}select(){let t=this.with();const e=O.map(t=>this[t](this));return t+=c(e).join(" "),t}pluck(){let t=this.single.pluck;return-1!==t.indexOf(".")&&(t=t.split(".").slice(-1)[0]),{sql:this.select(),pluck:t}}insert(){const t=this.single.insert||[];let e=this.with()+`insert into ${this.tableName} `;if(Array.isArray(t)){if(0===t.length)return""}else if("object"==typeof t&&f(t))return e+this._emptyInsertValue;const n=this._prepInsert(t);if("string"==typeof n)e+=n;else if(n.columns.length){e+="("+v(n.columns,this.builder,this.client,this.bindingsHolder),e+=") values (";let t=-1;for(;++t<n.values.length;)0!==t&&(e+="), ("),e+=this.client.parameterize(n.values[t],this.client.valueForUndefined,this.builder,this.bindingsHolder);e+=")"}else 1===t.length&&t[0]?e+=this._emptyInsertValue:e="";return e}update(){const t=this.with(),{tableName:e}=this,n=this._prepUpdate(this.single.update),r=this.where();return t+`update ${this.single.only?"only ":""}${e} set `+n.join(", ")+(r?" "+r:"")}_hintComments(){let t=this.grouped.hintComments||[];return t=t.map(t=>c(t.value).join(" ")),t=c(t).join(" "),t?`/*+ ${t} */ `:""}columns(){let t="";if(this.onlyUnions())return"";const e=this._hintComments(),n=this.grouped.columns||[];let r=-1,i=[];if(n)for(;++r<n.length;){const e=n[r];e.distinct&&(t="distinct "),e.distinctOn?t=this.distinctOn(e.value):"aggregate"===e.type?i.push(...this.aggregate(e)):"aggregateRaw"===e.type?i.push(this.aggregateRaw(e)):"analytic"===e.type?i.push(this.analytic(e)):e.value&&e.value.length>0&&i.push(v(e.value,this.builder,this.client,this.bindingsHolder))}return 0===i.length&&(i=["*"]),`select ${e}${t}`+i.join(", ")+(this.tableName?` from ${this.single.only?"only ":""}${this.tableName}`:"")}_aggregate(t,{aliasSeparator:e=" as ",distinctParentheses:n}={}){const r=t.value,i=t.method,o=t.aggregateDistinct?"distinct ":"",s=t=>x(t,void 0,this.builder,this.client,this.bindingsHolder),a=(t,n)=>n?t+e+s(n):t,u=(t,e)=>{let r=t.map(s).join(", ");if(o){const t=n?"(":" ",e=n?")":"";r=o.trim()+t+r+e}return a(`${i}(${r})`,e)},c=(t,e)=>{const n=`${i}(${o+s(t)})`;return a(n,e)};if(Array.isArray(r))return[u(r)];if("object"==typeof r){if(t.alias)throw new Error("When using an object explicit alias can not be used");return Object.entries(r).map(([t,e])=>Array.isArray(e)?u(e,t):c(e,t))}const l=r.toLowerCase().indexOf(" as ");let h=r,{alias:f}=t;if(-1!==l){if(h=r.slice(0,l),f)throw new Error("Found multiple aliases for same column: "+h);f=r.slice(l+4)}return[c(h,f)]}aggregate(t){return this._aggregate(t)}aggregateRaw(t){const e=t.aggregateDistinct?"distinct ":"";return`${t.method}(${e+E(t.value,void 0,this.builder,this.client,this.bindingsHolder)})`}join(){let t="",e=-1;const n=this.grouped.join;if(!n)return"";for(;++e<n.length;){const r=n[e],o=!r.schema||r.table instanceof i?r.table:`${r.schema}.${r.table}`;if(e>0&&(t+=" "),"raw"===r.joinType)t+=E(r.table,void 0,this.builder,this.client,this.bindingsHolder);else{t+=r.joinType+" join "+x(o,void 0,this.builder,this.client,this.bindingsHolder);let e=-1;for(;++e<r.clauses.length;){const n=r.clauses[e];t+=e>0?` ${n.bool} `:` ${"onUsing"===n.type?"using":"on"} `;const i=this[n.type](n);i&&(t+=i)}}}return t}onBetween(t){return x(t.column,void 0,this.builder,this.client,this.bindingsHolder)+" "+this._not(t,"between")+" "+t.value.map(t=>this.client.parameter(t,this.builder,this.bindingsHolder)).join(" and ")}onNull(t){return x(t.column,void 0,this.builder,this.client,this.bindingsHolder)+" is "+this._not(t,"null")}onExists(t){return this._not(t,"exists")+" ("+C(t.value,void 0,this.builder,this.client,this.bindingsHolder)+")"}onIn(t){return Array.isArray(t.column)?this.multiOnIn(t):x(t.column,void 0,this.builder,this.client,this.bindingsHolder)+" "+this._not(t,"in ")+this.wrap(this.client.parameterize(t.value,void 0,this.builder,this.bindingsHolder))}multiOnIn(t){let e=-1,n=`(${v(t.column,this.builder,this.client,this.bindingsHolder)}) `;for(n+=this._not(t,"in ")+"((";++e<t.value.length;)0!==e&&(n+="),("),n+=this.client.parameterize(t.value[e],void 0,this.builder,this.bindingsHolder);return n+"))"}where(){const t=this.grouped.where;if(!t)return;const e=[];let n=-1;for(;++n<t.length;){const i=t[n];Object.prototype.hasOwnProperty.call(i,"value")&&r.containsUndefined(i.value)&&(this.undefinedBindingsInfo.push(i.column),this._undefinedInWhereClause=!0);const o=this[i.type](i);o&&(0===e.length?e[0]="where":e.push(i.bool),e.push(o))}return e.length>1?e.join(" "):""}group(){return this._groupsOrders("group")}order(){return this._groupsOrders("order")}having(){const t=this.grouped.having;if(!t)return"";const e=["having"];for(let n=0,r=t.length;n<r;n++){const r=t[n],i=this[r.type](r);i&&(0===e.length&&(e[0]="where"),(e.length>1||1===e.length&&"having"!==e[0])&&e.push(r.bool),e.push(i))}return e.length>1?e.join(" "):""}havingRaw(t){return this._not(t,"")+E(t.value,void 0,this.builder,this.client,this.bindingsHolder)}havingWrapped(t){const e=C(t.value,"where",this.builder,this.client,this.bindingsHolder);return e&&this._not(t,"")+"("+e.slice(6)+")"||""}havingBasic(t){return this._not(t,"")+x(t.column,void 0,this.builder,this.client,this.bindingsHolder)+" "+_(t.operator,this.builder,this.client,this.bindingsHolder)+" "+this.client.parameter(t.value,this.builder,this.bindingsHolder)}havingNull(t){return x(t.column,void 0,this.builder,this.client,this.bindingsHolder)+" is "+this._not(t,"null")}havingExists(t){return this._not(t,"exists")+" ("+C(t.value,void 0,this.builder,this.client,this.bindingsHolder)+")"}havingBetween(t){return x(t.column,void 0,this.builder,this.client,this.bindingsHolder)+" "+this._not(t,"between")+" "+t.value.map(t=>this.client.parameter(t,this.builder,this.bindingsHolder)).join(" and ")}havingIn(t){return Array.isArray(t.column)?this.multiHavingIn(t):x(t.column,void 0,this.builder,this.client,this.bindingsHolder)+" "+this._not(t,"in ")+this.wrap(this.client.parameterize(t.value,void 0,this.builder,this.bindingsHolder))}multiHavingIn(t){let e=-1,n=`(${v(t.column,this.builder,this.client,this.bindingsHolder)}) `;for(n+=this._not(t,"in ")+"((";++e<t.value.length;)0!==e&&(n+="),("),n+=this.client.parameterize(t.value[e],void 0,this.builder,this.bindingsHolder);return n+"))"}union(){const t=this.onlyUnions(),e=this.grouped.union;if(!e)return"";let n="";for(let r=0,i=e.length;r<i;r++){const i=e[r];r>0&&(n+=" "),(r>0||!t)&&(n+=i.clause+" ");const o=C(i.value,void 0,this.builder,this.client,this.bindingsHolder);o&&(i.wrap&&(n+="("),n+=o,i.wrap&&(n+=")"))}return n}onlyUnions(){return!this.grouped.columns&&this.grouped.union&&!this.tableName}limit(){return!this.single.limit&&0!==this.single.limit?"":"limit "+this.client.parameter(this.single.limit,this.builder,this.bindingsHolder)}offset(){return this.single.offset?"offset "+this.client.parameter(this.single.offset,this.builder,this.bindingsHolder):""}del(){const{tableName:t}=this,e=this.with(),n=this.where(),r=this.join();return e+`delete ${r?t+" ":""}from ${this.single.only?"only ":""}${t}`+(r?" "+r:"")+(n?" "+n:"")}truncate(){return"truncate "+this.tableName}lock(){if(this.single.lock)return this[this.single.lock]()}waitMode(){if(this.single.waitMode)return this[this.single.waitMode]()}skipLocked(){throw new Error(".skipLocked() is currently only supported on MySQL 8.0+ and PostgreSQL 9.5+")}noWait(){throw new Error(".noWait() is currently only supported on MySQL 8.0+, MariaDB 10.3.0+ and PostgreSQL 9.5+")}distinctOn(t){throw new Error(".distinctOn() is currently only supported on PostgreSQL")}onWrapped(t){const e=this,n=new s;t.value.call(n,n);let r="";for(let t=0;t<n.clauses.length;t++){const i=n.clauses[t];t>0&&(r+=` ${i.bool} `);const o=e[i.type](i);o&&(r+=o)}return r.length?`(${r})`:""}onBasic(t){return x(t.column,void 0,this.builder,this.client,this.bindingsHolder)+" "+_(t.operator,this.builder,this.client,this.bindingsHolder)+" "+x(t.value,void 0,this.builder,this.client,this.bindingsHolder)}onVal(t){return x(t.column,void 0,this.builder,this.client,this.bindingsHolder)+" "+_(t.operator,this.builder,this.client,this.bindingsHolder)+" "+this.client.parameter(t.value,this.builder,this.bindingsHolder)}onRaw(t){return E(t.value,void 0,this.builder,this.client,this.bindingsHolder)}onUsing(t){return"("+v(t.column,this.builder,this.client,this.bindingsHolder)+")"}whereIn(t){let e;e=Array.isArray(t.column)?`(${v(t.column,this.builder,this.client,this.bindingsHolder)})`:x(t.column,void 0,this.builder,this.client,this.bindingsHolder);const n=this.client.values(t.value,this.builder,this.bindingsHolder);return`${e} ${this._not(t,"in ")}${n}`}whereNull(t){return x(t.column,void 0,this.builder,this.client,this.bindingsHolder)+" is "+this._not(t,"null")}whereBasic(t){return this._not(t,"")+x(t.column,void 0,this.builder,this.client,this.bindingsHolder)+" "+_(t.operator,this.builder,this.client,this.bindingsHolder)+" "+(t.asColumn?x(t.value,void 0,this.builder,this.client,this.bindingsHolder):this.client.parameter(t.value,this.builder,this.bindingsHolder))}whereExists(t){return this._not(t,"exists")+" ("+C(t.value,void 0,this.builder,this.client,this.bindingsHolder)+")"}whereWrapped(t){const e=C(t.value,"where",this.builder,this.client,this.bindingsHolder);return e&&this._not(t,"")+"("+e.slice(6)+")"||""}whereBetween(t){return x(t.column,void 0,this.builder,this.client,this.bindingsHolder)+" "+this._not(t,"between")+" "+t.value.map(t=>this.client.parameter(t,this.builder,this.bindingsHolder)).join(" and ")}whereRaw(t){return this._not(t,"")+E(t.value,void 0,this.builder,this.client,this.bindingsHolder)}wrap(t){return"("!==t.charAt(0)?`(${t})`:t}analytic(t){let e="";const n=this;return e+=t.method+"() over (",t.raw?e+=t.raw:(t.partitions.length&&(e+="partition by ",e+=p(t.partitions,(function(t){return y(t)?n.formatter.columnize(t):n.formatter.columnize(t.column)+(t.order?" "+t.order:"")})).join(", ")+" "),e+="order by ",e+=p(t.order,(function(t){return y(t)?n.formatter.columnize(t):n.formatter.columnize(t.column)+(t.order?" "+t.order:"")})).join(", ")),e+=")",t.alias&&(e+=" as "+t.alias),e}with(){if(!this.grouped.with||!this.grouped.with.length)return"";const t=this.grouped.with;if(!t)return;const e=[];let n=-1,r=!1;for(;++n<t.length;){const i=t[n];i.recursive&&(r=!0);const o=this[i.type](i);e.push(o)}return`with ${r?"recursive ":""}${e.join(", ")} `}withWrapped(t){const e=C(t.value,void 0,this.builder,this.client,this.bindingsHolder),n=t.columnList?"("+v(t.columnList,this.builder,this.client,this.bindingsHolder)+")":"";return e&&v(t.alias,this.builder,this.client,this.bindingsHolder)+n+" as ("+e+")"||""}_not(t,e){return t.not?"not "+e:e}_prepInsert(t){const e=C(t,void 0,this.builder,this.client,this.bindingsHolder);if(e)return e;let n=[];const r=[];Array.isArray(t)||(t=t?[t]:[]);let i=-1;for(;++i<t.length&&null!=t[i];){0===i&&(n=Object.keys(t[i]).sort());const e=new Array(n.length),o=Object.keys(t[i]);let s=-1;for(;++s<o.length;){const a=o[s];let u=n.indexOf(a);if(-1===u){n=n.concat(a).sort(),u=n.indexOf(a);let t=-1;for(;++t<r.length;)r[t].splice(u,0,void 0);e.splice(u,0,void 0)}e[u]=t[i][a]}r.push(e)}return{columns:n,values:r}}_prepUpdate(t={}){const{counter:e={}}=this.single;for(const n of Object.keys(e)){if(h(t,n)){this.client.logger.warn("increment/decrement called for a column that has already been specified in main .update() call. Ignoring increment/decrement and using value from .update() call.");continue}let r=e[n];const i=r<0?"-":"+";"-"===i&&(r=-r),t[n]=this.client.raw(`?? ${i} ?`,[n,r])}t=d(t,b);const n=[],r=Object.keys(t);let i=-1;for(;++i<r.length;)n.push(x(r[i],void 0,this.builder,this.client,this.bindingsHolder)+" = "+this.client.parameter(t[r[i]],this.builder,this.bindingsHolder));if(f(n))throw new Error(["Empty .update() call detected!","Update data does not contain any values to update.","This will result in a faulty query.",this.single.table?`Table: ${this.single.table}.`:"",this.single.update?`Columns: ${Object.keys(this.single.update)}.`:""].join(" "));return n}_formatGroupsItemValue(t,e){const{formatter:n}=this;let r="";return"last"===e?r=" is null":"first"===e&&(r=" is not null"),t instanceof i?E(t,void 0,this.builder,this.client,this.bindingsHolder):t instanceof o||e?"("+n.columnize(t)+r+")":n.columnize(t)}_groupsOrders(t){const e=this.grouped[t];if(!e)return"";const n=e.map(e=>this._formatGroupsItemValue(e.value,e.nulls)+("order"===t&&"orderByRaw"!==e.type?" "+w(e.direction,this.builder,this.client,this.bindingsHolder):""));return n.length?t+" by "+n.join(", "):""}get tableName(){if(!this._tableName){let t=this.single.table;const e=this.single.schema;if(t&&e){const n=t instanceof i,r="function"==typeof t;t instanceof o||n||r||(t=`${e}.${t}`)}this._tableName=t?x(t,t instanceof o,this.builder,this.client,this.bindingsHolder):""}return this._tableName}}},function(t,e,n){var r=n(300),i=n(140);t.exports=function(t,e){return null!=t&&i(t,e,r)}},function(t,e,n){var r=n(47),i=n(10),o=n(301),s=n(0);t.exports=function(t,e){return(s(t)?r:o)(t,i(e,3))}},function(t,e,n){const{pushQuery:r,pushAdditional:i,unshiftQuery:o}=n(58);class s{constructor(t,e){this.builder=e,this._commonBuilder=this.builder,this.client=t,this.schema=e._schema,this.bindings=[],this.bindingsHolder=this,this.formatter=t.formatter(e),this.formatter.bindings=this.bindings,this.sequence=[]}createSchema(){h("createSchema")}createSchemaIfNotExists(){h("createSchemaIfNotExists")}dropSchema(){h("dropSchema")}dropSchemaIfExists(){h("dropSchemaIfExists")}dropTable(t){this.pushQuery(this.dropTablePrefix+this.formatter.wrap(l(this.schema,t)))}dropTableIfExists(t){this.pushQuery(this.dropTablePrefix+"if exists "+this.formatter.wrap(l(this.schema,t)))}dropView(t){this._dropView(t,!1,!1)}dropViewIfExists(t){this._dropView(t,!0,!1)}dropMaterializedView(t){throw new Error("materialized views are not supported by this dialect.")}dropMaterializedViewIfExists(t){throw new Error("materialized views are not supported by this dialect.")}renameView(t,e){throw new Error("rename view is not supported by this dialect (instead drop then create another view).")}refreshMaterializedView(){throw new Error("materialized views are not supported by this dialect.")}_dropView(t,e,n){this.pushQuery((n?this.dropMaterializedViewPrefix:this.dropViewPrefix)+(e?"if exists ":"")+this.formatter.wrap(l(this.schema,t)))}raw(t,e){this.sequence.push(this.client.raw(t,e).toSQL())}toSQL(){const t=this.builder._sequence;for(let e=0,n=t.length;e<n;e++){const n=t[e];this[n.method].apply(this,n.args)}return this.sequence}async generateDdlCommands(){const t=this.toSQL();return{pre:[],sql:Array.isArray(t)?t:[t],post:[]}}}function a(t){const e=this.builder.queryContext();void 0!==e&&void 0===t.queryContext()&&t.queryContext(e),t.setSchema(this.schema);const n=t.toSQL();for(let t=0,e=n.length;t<e;t++)this.sequence.push(n[t])}function u(t){return"createLike"===t?function(e,n,r){const i=this.client.tableBuilder(t,e,n,r);a.call(this,i)}:function(e,n){const r=this.client.tableBuilder(t,e,null,n);a.call(this,r)}}function c(t){return function(e,n){const r=this.client.viewBuilder(t,e,n);a.call(this,r)}}function l(t,e){return t?`${t}.${e}`:e}function h(t){throw new Error(t+" is not supported for this dialect (only PostgreSQL supports it currently).")}s.prototype.dropTablePrefix="drop table ",s.prototype.dropViewPrefix="drop view ",s.prototype.dropMaterializedViewPrefix="drop materialized view ",s.prototype.alterViewPrefix="alter view ",s.prototype.alterTable=u("alter"),s.prototype.createTable=u("create"),s.prototype.createTableIfNotExists=u("createIfNot"),s.prototype.createTableLike=u("createLike"),s.prototype.createView=c("create"),s.prototype.createViewOrReplace=c("createOrReplace"),s.prototype.createMaterializedView=c("createMaterializedView"),s.prototype.alterView=c("alter"),s.prototype.pushQuery=r,s.prototype.pushAdditional=i,s.prototype.unshiftQuery=o,t.exports=s},function(t,e,n){const{pushAdditional:r,pushQuery:i,unshiftQuery:o}=n(58),s=n(6),a=n(57),u=n(309),c=n(32),l=n(53);class h{constructor(t,e){this.client=t,this.tableBuilder=e,this._commonBuilder=this.tableBuilder,this.method=e._method,this.schemaNameRaw=e._schemaName,this.tableNameRaw=e._tableName,this.tableNameLikeRaw=e._tableNameLike,this.single=e._single,this.grouped=a(e._statements,"grouping"),this.formatter=t.formatter(e),this.bindings=[],this.formatter.bindings=this.bindings,this.bindingsHolder=this,this.sequence=[],this._formatting=t.config&&t.config.formatting}toSQL(){return this[this.method](),this.sequence}create(t,e){const n=this.getColumns().map(t=>t.toSQL()),r=this.getColumnTypes(n);this.createAlterTableMethods&&this.alterTableForCreate(r),this.createQuery(r,t,e),this.columnQueries(n),delete this.single.comment,this.alterTable()}createIfNot(){this.create(!0)}createLike(){this.create(!1,!0)}createLikeIfNot(){this.create(!0,!0)}alter(){const t=this.getColumns().map(t=>t.toSQL()),e=this.getColumns("alter"),n=e.map(t=>t.toSQL()),r=this.getColumnTypes(t),i=this.getColumnTypes(n);this.addColumns(r),this.alterColumns(i,e),this.columnQueries(t),this.columnQueries(n),this.alterTable()}foreign(t){if(t.inTable&&t.references){const e=t.keyName?this.formatter.wrap(t.keyName):this._indexCommand("foreign",this.tableNameRaw,t.column),n=this.formatter.columnize(t.column),r=this.formatter.columnize(t.references),i=this.formatter.wrap(t.inTable),o=t.onUpdate?(this.lowerCase?" on update ":" ON UPDATE ")+t.onUpdate:"",s=t.onDelete?(this.lowerCase?" on delete ":" ON DELETE ")+t.onDelete:"",a=t.deferrable?this.lowerCase?` deferrable initially ${t.deferrable.toLowerCase()} `:` DEFERRABLE INITIALLY ${t.deferrable.toUpperCase()} `:"";this.lowerCase?this.pushQuery((this.forCreate?"":`alter table ${this.tableName()} add `)+"constraint "+e+" foreign key ("+n+") references "+i+" ("+r+")"+a+o+s):this.pushQuery((this.forCreate?"":`ALTER TABLE ${this.tableName()} ADD `)+"CONSTRAINT "+e+" FOREIGN KEY ("+n+") REFERENCES "+i+" ("+r+")"+a+o+s)}}getColumnTypes(t){return t.reduce((function(t,e){const n=e[0];return t.sql.push(n.sql),t.bindings.concat(n.bindings),t}),{sql:[],bindings:[]})}columnQueries(t){const e=t.reduce((function(t,e){const n=l(e);return c(n)?t:t.concat(n)}),[]);for(const t of e)this.pushQuery(t)}addColumns(t,e){if(e=e||this.addColumnsPrefix,t.sql.length>0){const n=t.sql.map(t=>e+t);this.pushQuery({sql:(this.lowerCase?"alter table ":"ALTER TABLE ")+this.tableName()+" "+n.join(", "),bindings:t.bindings})}}alterColumns(t,e){t.sql.length>0&&this.addColumns(t,this.alterColumnsPrefix,e)}getColumns(t){const e=this.grouped.columns||[];t=t||"add";const n=this.tableBuilder.queryContext();return e.filter(e=>e.builder._method===t).map(t=>(void 0!==n&&void 0===t.builder.queryContext()&&t.builder.queryContext(n),this.client.columnCompiler(this,t.builder)))}tableName(){const t=this.schemaNameRaw?`${this.schemaNameRaw}.${this.tableNameRaw}`:this.tableNameRaw;return this.formatter.wrap(t)}tableNameLike(){const t=this.schemaNameRaw?`${this.schemaNameRaw}.${this.tableNameLikeRaw}`:this.tableNameLikeRaw;return this.formatter.wrap(t)}alterTable(){const t=this.grouped.alterTable||[];for(let e=0,n=t.length;e<n;e++){const n=t[e];this[n.method]?this[n.method].apply(this,n.args):this.client.logger.error(`Debug: ${n.method} does not exist`)}for(const t in this.single)"function"==typeof this[t]&&this[t](this.single[t])}alterTableForCreate(t){this.forCreate=!0;const e=this.sequence,n=this.grouped.alterTable||[];this.grouped.alterTable=[];for(let e=0,r=n.length;e<r;e++){const r=n[e];u(this.createAlterTableMethods,r.method)<0?this.grouped.alterTable.push(r):this[r.method]?(this.sequence=[],this[r.method].apply(this,r.args),t.sql.push(this.sequence[0].sql)):this.client.logger.error(`Debug: ${r.method} does not exist`)}this.sequence=e,this.forCreate=!1}dropIndex(t){this.pushQuery("drop index"+t)}dropUnique(){throw new Error("Method implemented in the dialect driver")}dropForeign(){throw new Error("Method implemented in the dialect driver")}dropColumn(){const t=s.normalizeArr.apply(null,arguments),e=(Array.isArray(t)?t:[t]).map(t=>this.dropColumnPrefix+this.formatter.wrap(t));this.pushQuery((this.lowerCase?"alter table ":"ALTER TABLE ")+this.tableName()+" "+e.join(", "))}_setNullableState(t,e){const n=this.tableName(),r=this.formatter.columnize(t),i=this.alterColumnsPrefix;return this.pushQuery({sql:"SELECT 1",output:()=>this.client.queryBuilder().from(this.tableNameRaw).columnInfo(t).then(t=>{if(c(t))throw new Error(`.setNullable: Column ${r} does not exist in table ${n}.`);const o=e?"null":"not null",s=t.type+(t.maxLength?`(${t.maxLength})`:""),a=null!==t.defaultValue&&void 0!==t.defaultValue?`default '${t.defaultValue}'`:"",u=`alter table ${n} ${i} ${r} ${s} ${o} ${a}`;return this.client.raw(u)})})}setNullable(t){return this._setNullableState(t,!0)}dropNullable(t){return this._setNullableState(t,!1)}_indexCommand(t,e,n){Array.isArray(n)||(n=n?[n]:[]);const r=(e.replace(/\.|-/g,"_")+"_"+n.join("_")+"_"+t).toLowerCase();return this.formatter.wrap(r)}}h.prototype.pushQuery=i,h.prototype.pushAdditional=r,h.prototype.unshiftQuery=o,h.prototype.lowerCase=!0,h.prototype.createAlterTableMethods=null,h.prototype.addColumnsPrefix="add column ",h.prototype.alterColumnsPrefix="alter column ",h.prototype.modifyColumnPrefix="modify column ",h.prototype.dropColumnPrefix="drop column ",t.exports=h},function(t,e,n){const r=n(58),i=n(57),o=n(315),s=n(145),a=n(53),{toNumber:u}=n(6),{formatDefault:c}=n(56);class l{constructor(t,e,n){this.client=t,this.tableCompiler=e,this.columnBuilder=n,this._commonBuilder=this.columnBuilder,this.args=n._args,this.type=n._type.toLowerCase(),this.grouped=i(n._statements,"grouping"),this.modified=n._modifiers,this.isIncrements=-1!==this.type.indexOf("increments"),this.formatter=t.formatter(n),this.bindings=[],this.formatter.bindings=this.bindings,this.bindingsHolder=this,this.sequence=[],this.modifiers=[]}defaults(t){if(Object.prototype.hasOwnProperty.call(this._defaultMap,t))return this._defaultMap[t].bind(this)();throw new Error("There is no default for the specified identifier "+t)}toSQL(){return this.pushQuery(this.compileColumn()),this.sequence.additional&&(this.sequence=this.sequence.concat(this.sequence.additional)),this.sequence}compileColumn(){return this.formatter.wrap(this.getColumnName())+" "+this.getColumnType()+this.getModifiers()}getColumnName(){return o(this.args)||this.defaults("columnName")}getColumnType(){if(!this._columnType){const t=this[this.type];this._columnType="function"==typeof t?t.apply(this,a(this.args)):t}return this._columnType}getModifiers(){const t=[];for(let e=0,n=this.modifiers.length;e<n;e++){const n=this.modifiers[e];if((!this.isIncrements||this.isIncrements&&"comment"===n)&&s(this.modified,n)){const e=this[n].apply(this,this.modified[n]);e&&t.push(e)}}return t.length>0?" "+t.join(" "):""}varchar(t){return`varchar(${u(t,255)})`}floating(t,e){return`float(${u(t,8)}, ${u(e,2)})`}decimal(t,e){if(null===t)throw new Error("Specifying no precision on decimal columns is not supported for that SQL dialect.");return`decimal(${u(t,8)}, ${u(e,2)})`}specifictype(t){return t}nullable(t){return!1===t?"not null":"null"}notNullable(){return this.nullable(!1)}defaultTo(t){return"default "+c(t,this.type,this.client)}}l.prototype.binary="blob",l.prototype.bool="boolean",l.prototype.date="date",l.prototype.datetime="datetime",l.prototype.time="time",l.prototype.timestamp="timestamp",l.prototype.geometry="geometry",l.prototype.geography="geography",l.prototype.point="point",l.prototype.enu="varchar",l.prototype.bit=l.prototype.json="text",l.prototype.uuid="char(36)",l.prototype.increments=({primaryKey:t=!0}={})=>"integer not null"+(t?" primary key":"")+" autoincrement",l.prototype.bigincrements=({primaryKey:t=!0}={})=>"integer not null"+(t?" primary key":"")+" autoincrement",l.prototype.integer=l.prototype.smallint=l.prototype.mediumint="integer",l.prototype.biginteger="bigint",l.prototype.text="text",l.prototype.tinyint="tinyint",l.prototype.pushQuery=r.pushQuery,l.prototype.pushAdditional=r.pushAdditional,l.prototype.unshiftQuery=r.unshiftQuery,l.prototype._defaultMap={columnName:function(){if(!this.isIncrements)throw new Error(`You did not specify a column name for the ${this.type} column.`);return"id"}},t.exports=l},function(t,e,n){const{columnize:r,wrap:i}=n(27);t.exports=class{constructor(t,e){this.client=t,this.builder=e,this.bindings=[]}columnize(t){return r(t,this.builder,this.client,this)}wrap(t,e){return i(t,e,this.builder,this.client,this)}}},function(t,e,n){const{pushQuery:r}=n(58),i=n(57),{columnize:o}=n(27);class s{constructor(t,e){this.client=t,this.viewBuilder=e,this._commonBuilder=this.viewBuilder,this.method=e._method,this.schemaNameRaw=e._schemaName,this.viewNameRaw=e._viewName,this.single=e._single,this.selectQuery=e._selectQuery,this.columns=e._columns,this.grouped=i(e._statements,"grouping"),this.formatter=t.formatter(e),this.bindings=[],this.formatter.bindings=this.bindings,this.bindingsHolder=this,this.sequence=[]}toSQL(){return this[this.method](),this.sequence}create(){this.createQuery(this.columns,this.selectQuery)}createOrReplace(){throw new Error("replace views is not supported by this dialect.")}createMaterializedView(){throw new Error("materialized views are not supported by this dialect.")}createQuery(t,e,n,r){const i="create "+(n?"materialized ":"")+"view "+(r?"or replace ":""),s=[];for(const e of t)s.push(o(e,this.viewBuilder,this.client,this.bindingsHolder));let a=i+this.viewName()+" ("+s.join(", ")+")";switch(a+=" as ",a+=e.toString(),this.single.checkOption){case"default_option":a+=" with check option";break;case"local":a+=" with local check option";break;case"cascaded":a+=" with cascaded check option"}this.pushQuery({sql:a})}renameView(t,e){throw new Error("rename view is not supported by this dialect (instead drop, then create another view).")}refreshMaterializedView(){throw new Error("materialized views are not supported by this dialect.")}alter(){this.alterView()}alterView(){const t=this.grouped.alterView||[];for(let e=0,n=t.length;e<n;e++){const n=t[e];this[n.method]?this[n.method].apply(this,n.args):this.client.logger.error(`Debug: ${n.method} does not exist`)}for(const t in this.single)"function"==typeof this[t]&&this[t](this.single[t])}renameColumn(t,e){throw new Error("rename column of views is not supported by this dialect.")}defaultTo(t,e){throw new Error("change default values of views is not supported by this dialect.")}viewName(){const t=this.schemaNameRaw?`${this.schemaNameRaw}.${this.viewNameRaw}`:this.viewNameRaw;return this.formatter.wrap(t)}}s.prototype.pushQuery=r,t.exports=s},function(t,e,n){"use strict";n.r(e);var r=n(88),i=n.n(r);i()({client:"sqlite3"});e.default=i.a},function(t,e,n){const r=n(154);t.exports=r},function(t,e,n){const r=n(60),i=n(51),o=n(121),s=n(120),{KnexTimeoutError:a}=n(30),{resolveConfig:u}=n(321);function c(t){const{resolvedConfig:e,Dialect:n}=u(...arguments),r=s(new n(e));return e.userParams&&(r.userParams=e.userParams),r}c.Client=r,c.KnexTimeoutError=a,c.QueryBuilder={extend:function(t,e){i.extend(t,e),o.push(t)}},t.exports=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(156);e.Pool=r.Pool;const i=n(89);e.TimeoutError=i.TimeoutError,t.exports={Pool:r.Pool,TimeoutError:i.TimeoutError}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(157),i=n(159),o=n(61),s=n(3),a=n(90);function u(t,e){const n=t.indexOf(e);return-1!==n&&(t.splice(n,1),!0)}e.Pool=class{constructor(t){if(this.destroyed=!1,this.emitter=new s.EventEmitter,!(t=t||{}).create)throw new Error("Tarn: opt.create function most be provided");if(!t.destroy)throw new Error("Tarn: opt.destroy function most be provided");if("number"!=typeof t.min||t.min<0||t.min!==Math.round(t.min))throw new Error("Tarn: opt.min must be an integer >= 0");if("number"!=typeof t.max||t.max<=0||t.max!==Math.round(t.max))throw new Error("Tarn: opt.max must be an integer > 0");if(t.min>t.max)throw new Error("Tarn: opt.max is smaller than opt.min");if(!o.checkOptionalTime(t.acquireTimeoutMillis))throw new Error("Tarn: invalid opt.acquireTimeoutMillis "+JSON.stringify(t.acquireTimeoutMillis));if(!o.checkOptionalTime(t.createTimeoutMillis))throw new Error("Tarn: invalid opt.createTimeoutMillis "+JSON.stringify(t.createTimeoutMillis));if(!o.checkOptionalTime(t.destroyTimeoutMillis))throw new Error("Tarn: invalid opt.destroyTimeoutMillis "+JSON.stringify(t.destroyTimeoutMillis));if(!o.checkOptionalTime(t.idleTimeoutMillis))throw new Error("Tarn: invalid opt.idleTimeoutMillis "+JSON.stringify(t.idleTimeoutMillis));if(!o.checkOptionalTime(t.reapIntervalMillis))throw new Error("Tarn: invalid opt.reapIntervalMillis "+JSON.stringify(t.reapIntervalMillis));if(!o.checkOptionalTime(t.createRetryIntervalMillis))throw new Error("Tarn: invalid opt.createRetryIntervalMillis "+JSON.stringify(t.createRetryIntervalMillis));const e={create:!0,validate:!0,destroy:!0,log:!0,min:!0,max:!0,acquireTimeoutMillis:!0,createTimeoutMillis:!0,destroyTimeoutMillis:!0,idleTimeoutMillis:!0,reapIntervalMillis:!0,createRetryIntervalMillis:!0,propagateCreateError:!0};for(const n of Object.keys(t))if(!e[n])throw new Error("Tarn: unsupported option opt."+n);this.creator=t.create,this.destroyer=t.destroy,this.validate="function"==typeof t.validate?t.validate:()=>!0,this.log=t.log||(()=>{}),this.acquireTimeoutMillis=t.acquireTimeoutMillis||3e4,this.createTimeoutMillis=t.createTimeoutMillis||3e4,this.destroyTimeoutMillis=t.destroyTimeoutMillis||5e3,this.idleTimeoutMillis=t.idleTimeoutMillis||3e4,this.reapIntervalMillis=t.reapIntervalMillis||1e3,this.createRetryIntervalMillis=t.createRetryIntervalMillis||200,this.propagateCreateError=!!t.propagateCreateError,this.min=t.min,this.max=t.max,this.used=[],this.free=[],this.pendingCreates=[],this.pendingAcquires=[],this.pendingDestroys=[],this.pendingValidations=[],this.destroyed=!1,this.interval=null,this.eventId=1}numUsed(){return this.used.length}numFree(){return this.free.length}numPendingAcquires(){return this.pendingAcquires.length}numPendingValidations(){return this.pendingValidations.length}numPendingCreates(){return this.pendingCreates.length}acquire(){const t=this.eventId++;this._executeEventHandlers("acquireRequest",t);const e=new r.PendingOperation(this.acquireTimeoutMillis);return this.pendingAcquires.push(e),e.promise=e.promise.then(e=>(this._executeEventHandlers("acquireSuccess",t,e),e)).catch(n=>(this._executeEventHandlers("acquireFail",t,n),u(this.pendingAcquires,e),Promise.reject(n))),this._tryAcquireOrCreate(),e}release(t){this._executeEventHandlers("release",t);for(let e=0,n=this.used.length;e<n;++e){const n=this.used[e];if(n.resource===t)return this.used.splice(e,1),this.free.push(n.resolve()),this._tryAcquireOrCreate(),!0}return!1}isEmpty(){return 0===[this.numFree(),this.numUsed(),this.numPendingAcquires(),this.numPendingValidations(),this.numPendingCreates()].reduce((t,e)=>t+e)}check(){const t=o.now(),e=[],n=this.min-this.used.length,r=this.free.length-n;let i=0;this.free.forEach(n=>{o.duration(t,n.timestamp)>=this.idleTimeoutMillis&&i<r?(i++,this._destroy(n.resource)):e.push(n)}),this.free=e,this.isEmpty()&&this._stopReaping()}destroy(){const t=this.eventId++;return this._executeEventHandlers("poolDestroyRequest",t),this._stopReaping(),this.destroyed=!0,o.reflect(Promise.all(this.pendingCreates.map(t=>o.reflect(t.promise))).then(()=>new Promise((t,e)=>{if(0===this.numPendingValidations())return void t();const n=setInterval(()=>{0===this.numPendingValidations()&&(a.clearInterval(n),t())},100)})).then(()=>Promise.all(this.used.map(t=>o.reflect(t.promise)))).then(()=>Promise.all(this.pendingAcquires.map(t=>(t.abort(),o.reflect(t.promise))))).then(()=>Promise.all(this.free.map(t=>o.reflect(this._destroy(t.resource))))).then(()=>Promise.all(this.pendingDestroys.map(t=>t.promise))).then(()=>{this.free=[],this.pendingAcquires=[]})).then(e=>(this._executeEventHandlers("poolDestroySuccess",t),this.emitter.removeAllListeners(),e))}on(t,e){this.emitter.on(t,e)}removeListener(t,e){this.emitter.removeListener(t,e)}removeAllListeners(t){this.emitter.removeAllListeners(t)}_tryAcquireOrCreate(){this.destroyed||(this._hasFreeResources()?this._doAcquire():this._shouldCreateMoreResources()&&this._doCreate())}_hasFreeResources(){return this.free.length>0}_doAcquire(){for(;this._canAcquire();){const t=this.pendingAcquires.shift(),e=this.free.pop();if(void 0===e||void 0===t){const t="this.free was empty while trying to acquire resource";throw this.log("Tarn: "+t,"warn"),new Error("Internal error, should never happen. "+t)}this.pendingValidations.push(t),this.used.push(e);const n=new r.PendingOperation(this.acquireTimeoutMillis);t.promise.catch(t=>{n.abort()}),n.promise.catch(t=>(this.log("Tarn: resource validator threw an exception "+t.stack,"warn"),!1)).then(n=>{try{n&&!t.isRejected?(this._startReaping(),t.resolve(e.resource)):(u(this.used,e),n?this.free.push(e):(this._destroy(e.resource),setTimeout(()=>{this._tryAcquireOrCreate()},0)),t.isRejected||this.pendingAcquires.unshift(t))}finally{u(this.pendingValidations,t)}}),this._validateResource(e.resource).then(t=>{n.resolve(t)}).catch(t=>{n.reject(t)})}}_canAcquire(){return this.free.length>0&&this.pendingAcquires.length>0}_validateResource(t){try{return Promise.resolve(this.validate(t))}catch(t){return Promise.reject(t)}}_shouldCreateMoreResources(){return this.used.length+this.pendingCreates.length<this.max&&this.pendingCreates.length<this.pendingAcquires.length}_doCreate(){const t=this.pendingAcquires.slice();this._create().promise.then(()=>(this._tryAcquireOrCreate(),null)).catch(e=>{this.propagateCreateError&&0!==this.pendingAcquires.length&&this.pendingAcquires[0].reject(e),t.forEach(t=>{t.possibleTimeoutCause=e}),o.delay(this.createRetryIntervalMillis).then(()=>this._tryAcquireOrCreate())})}_create(){const t=this.eventId++;this._executeEventHandlers("createRequest",t);const e=new r.PendingOperation(this.createTimeoutMillis);var n;return e.promise=e.promise.catch(n=>{throw u(this.pendingCreates,e)&&this._executeEventHandlers("createFail",t,n),n}),this.pendingCreates.push(e),(n=this.creator,new Promise((t,e)=>{const r=(n,r)=>{n?e(n):t(r)};o.tryPromise(()=>n(r)).then(e=>{e&&t(e)}).catch(t=>{e(t)})})).then(n=>e.isRejected?(this.destroyer(n),null):(u(this.pendingCreates,e),this.free.push(new i.Resource(n)),e.resolve(n),this._executeEventHandlers("createSuccess",t,n),null)).catch(n=>(e.isRejected||(u(this.pendingCreates,e)&&this._executeEventHandlers("createFail",t,n),e.reject(n)),null)),e}_destroy(t){const e=this.eventId++;this._executeEventHandlers("destroyRequest",e,t);const n=new r.PendingOperation(this.destroyTimeoutMillis);return Promise.resolve().then(()=>this.destroyer(t)).then(()=>{n.resolve(t)}).catch(t=>{n.reject(t)}),this.pendingDestroys.push(n),n.promise.then(n=>(this._executeEventHandlers("destroySuccess",e,t),n)).catch(n=>this._logDestroyerError(e,t,n)).then(t=>{const e=this.pendingDestroys.findIndex(t=>t===n);return this.pendingDestroys.splice(e,1),t})}_logDestroyerError(t,e,n){this._executeEventHandlers("destroyFail",t,e,n),this.log("Tarn: resource destroyer threw an exception "+n.stack,"warn")}_startReaping(){this.interval||(this._executeEventHandlers("startReaping"),this.interval=setInterval(()=>this.check(),this.reapIntervalMillis))}_stopReaping(){null!==this.interval&&(this._executeEventHandlers("stopReaping"),a.clearInterval(this.interval)),this.interval=null}_executeEventHandlers(t,...e){this.emitter.listeners(t).forEach(n=>{try{n(...e)}catch(e){this.log(`Tarn: event handler "${t}" threw an exception ${e.stack}`,"warn")}})}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(89),i=n(61);e.PendingOperation=class{constructor(t){var e,n;this.timeoutMillis=t,this.deferred=i.defer(),this.possibleTimeoutCause=null,this.isRejected=!1,this.promise=(e=this.deferred.promise,n=t,new Promise((t,i)=>{const o=setTimeout(()=>i(new r.TimeoutError),n);e.then(e=>{clearTimeout(o),t(e)}).catch(t=>{clearTimeout(o),i(t)})})).catch(t=>(t instanceof r.TimeoutError&&(t=this.possibleTimeoutCause?new r.TimeoutError(this.possibleTimeoutCause.message):new r.TimeoutError("operation timed out for an unknown reason")),this.isRejected=!0,Promise.reject(t)))}abort(){this.reject(new Error("aborted"))}reject(t){this.deferred.reject(t)}resolve(t){this.deferred.resolve(t)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.PromiseInspection=class{constructor(t){this._value=t.value,this._error=t.error}value(){return this._value}reason(){return this._error}isRejected(){return!!this._error}isFulfilled(){return!!this._value}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(61);class i{constructor(t){this.resource=t,this.resource=t,this.timestamp=r.now(),this.deferred=r.defer()}get promise(){return this.deferred.promise}resolve(){return this.deferred.resolve(void 0),new i(this.resource)}}e.Resource=i},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var r,i,o,s,a,u=1,c={},l=!1,h=t.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(t);f=f&&f.setTimeout?f:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick((function(){d(t)}))}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){d(t.data)},r=function(t){o.port2.postMessage(t)}):h&&"onreadystatechange"in h.createElement("script")?(i=h.documentElement,r=function(t){var e=h.createElement("script");e.onreadystatechange=function(){d(t),e.onreadystatechange=null,i.removeChild(e),e=null},i.appendChild(e)}):r=function(t){setTimeout(d,0,t)}:(s="setImmediate$"+Math.random()+"$",a=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(s)&&d(+e.data.slice(s.length))},t.addEventListener?t.addEventListener("message",a,!1):t.attachEvent("onmessage",a),r=function(e){t.postMessage(s+e,"*")}),f.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var i={callback:t,args:e};return c[u]=i,r(u),u++},f.clearImmediate=p}function p(t){delete c[t]}function d(t){if(l)setTimeout(d,0,t);else{var e=c[t];if(e){l=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(void 0,n)}}(e)}finally{p(t),l=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(7),n(8))},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){(function(e){const n=/[\0\b\t\n\r\x1a"'\\]/g,r={"\0":"\\0","\b":"\\b","\t":"\\t","\n":"\\n","\r":"\\r","":"\\Z",'"':'\\"',"'":"\\'","\\":"\\\\"};function i(t){return function e(n,r={}){return t(n,e,r)}}function o(t,e,n){return t&&"function"==typeof t.toSQL?t.toSQL(n):JSON.stringify(t)}function s(t,e,n){let r="";for(let i=0;i<t.length;i++){const o=t[i];Array.isArray(o)?r+=(0===i?"":", ")+"("+s(o,e,n)+")":r+=(0===i?"":", ")+e(o,n)}return r}function a(t){return"X"+u(t.toString("hex"))}function u(t,e,i){let o,s=n.lastIndex=0,a="";for(;o=n.exec(t);)a+=t.slice(s,o.index)+r[o[0]],s=n.lastIndex;return 0===s?"'"+t+"'":s<t.length?"'"+a+t.slice(s)+"'":"'"+a+"'"}function c(t,e,n={}){const r=n.timeZone||"local",i=new Date(t);let o,s,a,u,c,h,f;if("local"===r)o=i.getFullYear(),s=i.getMonth()+1,a=i.getDate(),u=i.getHours(),c=i.getMinutes(),h=i.getSeconds(),f=i.getMilliseconds();else{const t=function(t){if("Z"===t)return 0;const e=t.match(/([+\-\s])(\d\d):?(\d\d)?/);if(e)return("-"==e[1]?-1:1)*(parseInt(e[2],10)+(e[3]?parseInt(e[3],10):0)/60)*60;return!1}(r);!1!==t&&0!==t&&i.setTime(i.getTime()+6e4*t),o=i.getUTCFullYear(),s=i.getUTCMonth()+1,a=i.getUTCDate(),u=i.getUTCHours(),c=i.getUTCMinutes(),h=i.getUTCSeconds(),f=i.getUTCMilliseconds()}return l(o,4)+"-"+l(s,2)+"-"+l(a,2)+" "+l(u,2)+":"+l(c,2)+":"+l(h,2)+"."+l(f,3)}function l(t,e){for(t=t.toString();t.length<e;)t="0"+t;return t}t.exports={arrayToList:s,bufferToString:a,dateToString:c,escapeString:u,charsRegex:n,charsMap:r,escapeObject:o,makeEscape:function(t={}){const n=t.escapeDate||c,r=t.escapeArray||s,l=t.escapeBuffer||a,h=t.escapeString||u,f=t.escapeObject||o,p=t.wrap||i;function d(t,i,o){if(null==t)return"NULL";switch(typeof t){case"boolean":return t?"true":"false";case"number":return t+"";case"object":if(!(t instanceof Date))return Array.isArray(t)?r(t,i,o):e.isBuffer(t)?l(t,i,o):f(t,i,o);t=n(t,i,o)}return h(t,i,o)}return p?p(d):d}}}).call(this,n(34).Buffer)},function(t,e,n){"use strict";e.byteLength=function(t){var e=c(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,r=c(t),s=r[0],a=r[1],u=new o(function(t,e,n){return 3*(e+n)/4-n}(0,s,a)),l=0,h=a>0?s-4:s;for(n=0;n<h;n+=4)e=i[t.charCodeAt(n)]<<18|i[t.charCodeAt(n+1)]<<12|i[t.charCodeAt(n+2)]<<6|i[t.charCodeAt(n+3)],u[l++]=e>>16&255,u[l++]=e>>8&255,u[l++]=255&e;2===a&&(e=i[t.charCodeAt(n)]<<2|i[t.charCodeAt(n+1)]>>4,u[l++]=255&e);1===a&&(e=i[t.charCodeAt(n)]<<10|i[t.charCodeAt(n+1)]<<4|i[t.charCodeAt(n+2)]>>2,u[l++]=e>>8&255,u[l++]=255&e);return u},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o=[],s=0,a=n-i;s<a;s+=16383)o.push(l(t,s,s+16383>a?a:s+16383));1===i?(e=t[n-1],o.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=s.length;a<u;++a)r[a]=s[a],i[s.charCodeAt(a)]=a;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function l(t,e,n){for(var i,o,s=[],a=e;a<n;a+=3)i=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
e.read=function(t,e,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,c=u>>1,l=-7,h=n?i-1:0,f=n?-1:1,p=t[e+h];for(h+=f,o=p&(1<<-l)-1,p>>=-l,l+=a;l>0;o=256*o+t[e+h],h+=f,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;l>0;s=256*s+t[e+h],h+=f,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,r),o-=c}return(p?-1:1)*s*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var s,a,u,c=8*o-i-1,l=(1<<c)-1,h=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+h>=1?f/u:f*Math.pow(2,1-h))*u>=2&&(s++,u/=2),s+h>=l?(a=0,s=l):s+h>=1?(a=(e*u-1)*Math.pow(2,i),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;t[n+p]=255&a,p+=d,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;t[n+p]=255&s,p+=d,s/=256,c-=8);t[n+p-d]|=128*g}},function(t,e,n){var r=n(92);t.exports=function(t){return r(t,5)}},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,n){var r=n(37),i=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0)&&(n==e.length-1?e.pop():i.call(e,n,1),--this.size,!0)}},function(t,e,n){var r=n(37);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},function(t,e,n){var r=n(37);t.exports=function(t){return r(this.__data__,t)>-1}},function(t,e,n){var r=n(37);t.exports=function(t,e){var n=this.__data__,i=r(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}},function(t,e,n){var r=n(36);t.exports=function(){this.__data__=new r,this.size=0}},function(t,e){t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},function(t,e){t.exports=function(t){return this.__data__.get(t)}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e,n){var r=n(36),i=n(62),o=n(63);t.exports=function(t,e){var n=this.__data__;if(n instanceof r){var s=n.__data__;if(!i||s.length<199)return s.push([t,e]),this.size=++n.size,this;n=this.__data__=new o(s)}return n.set(t,e),this.size=n.size,this}},function(t,e,n){var r=n(38),i=n(180),o=n(2),s=n(94),a=/^\[object .+?Constructor\]$/,u=Function.prototype,c=Object.prototype,l=u.toString,h=c.hasOwnProperty,f=RegExp("^"+l.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!o(t)||i(t))&&(r(t)?f:a).test(s(t))}},function(t,e,n){var r=n(13),i=Object.prototype,o=i.hasOwnProperty,s=i.toString,a=r?r.toStringTag:void 0;t.exports=function(t){var e=o.call(t,a),n=t[a];try{t[a]=void 0;var r=!0}catch(t){}var i=s.call(t);return r&&(e?t[a]=n:delete t[a]),i}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e,n){var r,i=n(181),o=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";t.exports=function(t){return!!o&&o in t}},function(t,e,n){var r=n(4)["__core-js_shared__"];t.exports=r},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e,n){var r=n(184),i=n(36),o=n(62);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},function(t,e,n){var r=n(185),i=n(186),o=n(187),s=n(188),a=n(189);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=s,u.prototype.set=a,t.exports=u},function(t,e,n){var r=n(39);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},function(t,e,n){var r=n(39),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(e,t)?e[t]:void 0}},function(t,e,n){var r=n(39),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:i.call(e,t)}},function(t,e,n){var r=n(39);t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?"__lodash_hash_undefined__":e,this}},function(t,e,n){var r=n(40);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},function(t,e){t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,n){var r=n(40);t.exports=function(t){return r(this,t).get(t)}},function(t,e,n){var r=n(40);t.exports=function(t){return r(this,t).has(t)}},function(t,e,n){var r=n(40);t.exports=function(t,e){var n=r(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}},function(t,e,n){var r=n(14),i=n(15);t.exports=function(t,e){return t&&r(e,i(e),t)}},function(t,e){t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},function(t,e,n){var r=n(12),i=n(5);t.exports=function(t){return i(t)&&"[object Arguments]"==r(t)}},function(t,e){t.exports=function(){return!1}},function(t,e,n){var r=n(12),i=n(65),o=n(5),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,t.exports=function(t){return o(t)&&i(t.length)&&!!s[r(t)]}},function(t,e,n){var r=n(98)(Object.keys,Object);t.exports=r},function(t,e,n){var r=n(14),i=n(16);t.exports=function(t,e){return t&&r(e,i(e),t)}},function(t,e,n){var r=n(2),i=n(29),o=n(203),s=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return o(t);var e=i(t),n=[];for(var a in t)("constructor"!=a||!e&&s.call(t,a))&&n.push(a);return n}},function(t,e){t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},function(t,e,n){var r=n(14),i=n(69);t.exports=function(t,e){return r(t,i(t),e)}},function(t,e,n){var r=n(14),i=n(101);t.exports=function(t,e){return r(t,i(t),e)}},function(t,e,n){var r=n(11)(n(4),"DataView");t.exports=r},function(t,e,n){var r=n(11)(n(4),"Promise");t.exports=r},function(t,e,n){var r=n(11)(n(4),"Set");t.exports=r},function(t,e,n){var r=n(11)(n(4),"WeakMap");t.exports=r},function(t,e){var n=Object.prototype.hasOwnProperty;t.exports=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&n.call(t,"index")&&(r.index=t.index,r.input=t.input),r}},function(t,e,n){var r=n(72),i=n(212),o=n(213),s=n(214),a=n(106);t.exports=function(t,e,n){var u=t.constructor;switch(e){case"[object ArrayBuffer]":return r(t);case"[object Boolean]":case"[object Date]":return new u(+t);case"[object DataView]":return i(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return a(t,n);case"[object Map]":return new u;case"[object Number]":case"[object String]":return new u(t);case"[object RegExp]":return o(t);case"[object Set]":return new u;case"[object Symbol]":return s(t)}}},function(t,e,n){var r=n(72);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}},function(t,e){var n=/\w*$/;t.exports=function(t){var e=new t.constructor(t.source,n.exec(t));return e.lastIndex=t.lastIndex,e}},function(t,e,n){var r=n(13),i=r?r.prototype:void 0,o=i?i.valueOf:void 0;t.exports=function(t){return o?Object(o.call(t)):{}}},function(t,e,n){var r=n(216),i=n(66),o=n(67),s=o&&o.isMap,a=s?i(s):r;t.exports=a},function(t,e,n){var r=n(23),i=n(5);t.exports=function(t){return i(t)&&"[object Map]"==r(t)}},function(t,e,n){var r=n(218),i=n(66),o=n(67),s=o&&o.isSet,a=s?i(s):r;t.exports=a},function(t,e,n){var r=n(23),i=n(5);t.exports=function(t){return i(t)&&"[object Set]"==r(t)}},function(t,e,n){var r=n(220),i=Math.max;t.exports=function(t,e,n){return e=i(void 0===e?t.length-1:e,0),function(){for(var o=arguments,s=-1,a=i(o.length-e,0),u=Array(a);++s<a;)u[s]=o[e+s];s=-1;for(var c=Array(e+1);++s<e;)c[s]=o[s];return c[e]=n(u),r(t,this,c)}}},function(t,e){t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},function(t,e,n){var r=n(222),i=n(223)(r);t.exports=i},function(t,e,n){var r=n(111),i=n(95),o=n(17),s=i?function(t,e){return i(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:o;t.exports=s},function(t,e){var n=Date.now;t.exports=function(t){var e=0,r=0;return function(){var i=n(),o=16-(i-r);if(r=i,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}},function(t,e,n){var r=n(13),i=n(47),o=n(0),s=n(48),a=r?r.prototype:void 0,u=a?a.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(o(e))return i(e,t)+"";if(s(e))return u?u.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}},function(t,e,n){const{KnexTimeoutError:r}=n(30),{timeout:i}=n(30),{ensureConnectionCallback:o,ensureConnectionStreamCallback:s}=n(226);let a;t.exports=class{constructor(t,e){this.client=t,this.builder=e,this.queries=[],this.connection=void 0}async run(){const t=this;try{const e=await this.ensureConnection(o);return t.builder.emit("end"),e}catch(e){throw t.builder._events&&t.builder._events.error&&t.builder.emit("error",e),e}}stream(t,e){const r="function"==typeof t&&1===arguments.length,i=r?{}:t,o=r?t:e,u="function"==typeof o;a=a||n(227).Transform;const c=this.builder.queryContext();let l;const h=new a({objectMode:!0,transform:(t,e,n)=>{n(null,this.client.postProcessResponse(t,c))},destroy(){l&&l.destroy&&l.destroy(new Error("stream destroyed"))}});h.on("pipe",t=>{l=t});const f=this.ensureConnection(s,{options:i,hasHandler:u,stream:h}).catch(t=>{this.connection||h.emit("error",t)});return u?(o(h),f):h}pipe(t,e){return this.stream(e).pipe(t)}async query(t){const{__knexUid:e,__knexTxId:n}=this.connection;this.builder.emit("query",Object.assign({__knexUid:e,__knexTxId:n},t));const o=this,s=this.builder.queryContext();null!==t&&"object"==typeof t&&(t.queryContext=s);let a=this.client.query(this.connection,t);return t.timeout&&(a=i(a,t.timeout)),a.then(t=>this.client.processResponse(t,o)).then(r=>{const i=this.client.postProcessResponse(r,s);return this.builder.emit("query-response",i,Object.assign({__knexUid:e,__knexTxId:n},t),this.builder),this.client.emit("query-response",i,Object.assign({__knexUid:e,__knexTxId:n},t),this.builder),i}).catch(e=>{if(!(e instanceof r))return Promise.reject(e);const{timeout:n,sql:i,bindings:o}=t;let s;return t.cancelOnTimeout?s=this.client.cancelQuery(this.connection):(this.connection.__knex__disposed=e,s=Promise.resolve()),s.catch(t=>{throw this.connection.__knex__disposed=e,Object.assign(t,{message:`After query timeout of ${n}ms exceeded, cancelling of query failed.`,sql:i,bindings:o,timeout:n})}).then(()=>{throw Object.assign(e,{message:`Defined query timeout of ${n}ms exceeded when running query.`,sql:i,bindings:o,timeout:n})})}).catch(r=>{throw this.builder.emit("query-error",r,Object.assign({__knexUid:e,__knexTxId:n,queryContext:s},t)),r})}async queryArray(t){if(1===t.length){const e=t[0];if(!e.statementsProducer)return this.query(e);const n=(await e.statementsProducer(void 0,this.connection)).map(t=>({sql:t,bindings:e.bindings}));return this.queryArray(n)}const e=[];for(const n of t)e.push(await this.queryArray([n]));return e}async ensureConnection(t,e){if(this.builder._connection&&(this.connection=this.builder._connection),this.connection)return t(this,e);let n;try{n=await this.client.acquireConnection()}catch(t){if(!(t instanceof r))return Promise.reject(t);throw this.builder&&(t.sql=this.builder.sql,t.bindings=this.builder.bindings),t}try{return this.connection=n,await t(this,e)}finally{await this.client.releaseConnection(n)}}}},function(t,e){t.exports={ensureConnectionCallback:function(t){t.client.emit("start",t.builder),t.builder.emit("start",t.builder);const e=t.builder.toSQL();return t.builder._debug&&t.client.logger.debug(e),Array.isArray(e)?t.queryArray(e):t.query(e)},ensureConnectionStreamCallback:function(t,e){try{const n=t.builder.toSQL();if(Array.isArray(n)&&e.hasHandler)throw new Error("The stream may only be used with a single query statement.");return t.client.stream(t.connection,n,e.stream,e.options)}catch(t){throw e.stream.emit("error",t),t}}}},function(t,e,n){t.exports=i;var r=n(3).EventEmitter;function i(){r.call(this)}n(24)(i,r),i.Readable=n(73),i.Writable=n(234),i.Duplex=n(235),i.Transform=n(236),i.PassThrough=n(237),i.Stream=i,i.prototype.pipe=function(t,e){var n=this;function i(e){t.writable&&!1===t.write(e)&&n.pause&&n.pause()}function o(){n.readable&&n.resume&&n.resume()}n.on("data",i),t.on("drain",o),t._isStdio||e&&!1===e.end||(n.on("end",a),n.on("close",u));var s=!1;function a(){s||(s=!0,t.end())}function u(){s||(s=!0,"function"==typeof t.destroy&&t.destroy())}function c(t){if(l(),0===r.listenerCount(this,"error"))throw t}function l(){n.removeListener("data",i),t.removeListener("drain",o),n.removeListener("end",a),n.removeListener("close",u),n.removeListener("error",c),t.removeListener("error",c),n.removeListener("end",l),n.removeListener("close",l),t.removeListener("close",l)}return n.on("error",c),t.on("error",c),n.on("end",l),n.on("close",l),t.on("close",l),t.emit("pipe",n),t}},function(t,e){},function(t,e,n){"use strict";var r=n(74).Buffer,i=n(230);t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n},t.prototype.concat=function(t){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var e,n,i,o=r.allocUnsafe(t>>>0),s=this.head,a=0;s;)e=s.data,n=o,i=a,e.copy(n,i),a+=s.data.length,s=s.next;return o},t}(),i&&i.inspect&&i.inspect.custom&&(t.exports.prototype[i.inspect.custom]=function(){var t=i.inspect({length:this.length});return this.constructor.name+" "+t})},function(t,e){},function(t,e,n){(function(e){function n(t){try{if(!e.localStorage)return!1}catch(t){return!1}var n=e.localStorage[t];return null!=n&&"true"===String(n).toLowerCase()}t.exports=function(t,e){if(n("noDeprecation"))return t;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(e);n("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}}}).call(this,n(7))},function(t,e,n){
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
var r=n(34),i=r.Buffer;function o(t,e){for(var n in t)e[n]=t[n]}function s(t,e,n){return i(t,e,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(o(r,e),e.Buffer=s),s.prototype=Object.create(i.prototype),o(i,s),s.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,n)},s.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=i(t);return void 0!==e?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},s.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},s.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},function(t,e,n){"use strict";t.exports=o;var r=n(118),i=Object.create(n(31));function o(t){if(!(this instanceof o))return new o(t);r.call(this,t)}i.inherits=n(24),i.inherits(o,r),o.prototype._transform=function(t,e,n){n(null,t)}},function(t,e,n){t.exports=n(75)},function(t,e,n){t.exports=n(18)},function(t,e,n){t.exports=n(73).Transform},function(t,e,n){t.exports=n(73).PassThrough},function(t,e,n){t.exports=function(t){function e(t){let n,i,o,s=null;function a(...t){if(!a.enabled)return;const r=a,i=Number(new Date),o=i-(n||i);r.diff=o,r.prev=n,r.curr=i,n=i,t[0]=e.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let s=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,(n,i)=>{if("%%"===n)return"%";s++;const o=e.formatters[i];if("function"==typeof o){const e=t[s];n=o.call(r,e),t.splice(s,1),s--}return n}),e.formatArgs.call(r,t);(r.log||e.log).apply(r,t)}return a.namespace=t,a.useColors=e.useColors(),a.color=e.selectColor(t),a.extend=r,a.destroy=e.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(i!==e.namespaces&&(i=e.namespaces,o=e.enabled(t)),o),set:t=>{s=t}}),"function"==typeof e.init&&e.init(a),a}function r(t,n){const r=e(this.namespace+(void 0===n?":":n)+t);return r.log=this.log,r}function i(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return e.debug=e,e.default=e,e.coerce=function(t){if(t instanceof Error)return t.stack||t.message;return t},e.disable=function(){const t=[...e.names.map(i),...e.skips.map(i).map(t=>"-"+t)].join(",");return e.enable(""),t},e.enable=function(t){let n;e.save(t),e.namespaces=t,e.names=[],e.skips=[];const r=("string"==typeof t?t:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(t=r[n].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))},e.enabled=function(t){if("*"===t[t.length-1])return!0;let n,r;for(n=0,r=e.skips.length;n<r;n++)if(e.skips[n].test(t))return!1;for(n=0,r=e.names.length;n<r;n++)if(e.names[n].test(t))return!0;return!1},e.humanize=n(239),e.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach(n=>{e[n]=t[n]}),e.names=[],e.skips=[],e.formatters={},e.selectColor=function(t){let n=0;for(let e=0;e<t.length;e++)n=(n<<5)-n+t.charCodeAt(e),n|=0;return e.colors[Math.abs(n)%e.colors.length]},e.enable(e.load()),e}},function(t,e){var n=1e3,r=6e4,i=60*r,o=24*i;function s(t,e,n,r){var i=e>=1.5*n;return Math.round(t/n)+" "+r+(i?"s":"")}t.exports=function(t,e){e=e||{};var a=typeof t;if("string"===a&&t.length>0)return function(t){if((t=String(t)).length>100)return;var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!e)return;var s=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"weeks":case"week":case"w":return 6048e5*s;case"days":case"day":case"d":return s*o;case"hours":case"hour":case"hrs":case"hr":case"h":return s*i;case"minutes":case"minute":case"mins":case"min":case"m":return s*r;case"seconds":case"second":case"secs":case"sec":case"s":return s*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}(t);if("number"===a&&isFinite(t))return e.long?function(t){var e=Math.abs(t);if(e>=o)return s(t,e,o,"day");if(e>=i)return s(t,e,i,"hour");if(e>=r)return s(t,e,r,"minute");if(e>=n)return s(t,e,n,"second");return t+" ms"}(t):function(t){var e=Math.abs(t);if(e>=o)return Math.round(t/o)+"d";if(e>=i)return Math.round(t/i)+"h";if(e>=r)return Math.round(t/r)+"m";if(e>=n)return Math.round(t/n)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},function(t,e){t.exports=class{constructor(t){this.client=t}now(t){return"number"==typeof t?this.client.raw(`CURRENT_TIMESTAMP(${t})`):this.client.raw("CURRENT_TIMESTAMP")}}},function(t,e,n){var r=n(242),i=n(76)((function(t,e,n){r(t,e,n)}));t.exports=i},function(t,e,n){var r=n(35),i=n(122),o=n(123),s=n(244),a=n(2),u=n(16),c=n(124);t.exports=function t(e,n,l,h,f){e!==n&&o(n,(function(o,u){if(f||(f=new r),a(o))s(e,n,u,l,t,h,f);else{var p=h?h(c(e,u),o,u+"",e,n,f):void 0;void 0===p&&(p=o),i(e,u,p)}}),u)}},function(t,e){t.exports=function(t){return function(e,n,r){for(var i=-1,o=Object(e),s=r(e),a=s.length;a--;){var u=s[t?a:++i];if(!1===n(o[u],u,o))break}return e}}},function(t,e,n){var r=n(122),i=n(99),o=n(106),s=n(68),a=n(107),u=n(28),c=n(0),l=n(245),h=n(21),f=n(38),p=n(2),d=n(50),g=n(22),m=n(124),y=n(246);t.exports=function(t,e,n,b,v,w,_){var x=m(t,n),E=m(e,n),C=_.get(E);if(C)r(t,n,C);else{var T=w?w(x,E,n+"",t,e,_):void 0,O=void 0===T;if(O){var j=c(E),A=!j&&h(E),N=!j&&!A&&g(E);T=E,j||A||N?c(x)?T=x:l(x)?T=s(x):A?(O=!1,T=i(E,!0)):N?(O=!1,T=o(E,!0)):T=[]:d(E)||u(E)?(T=x,u(x)?T=y(x):p(x)&&!f(x)||(T=a(E))):O=!1}O&&(_.set(E,T),v(T,E,b,w,_),_.delete(E)),r(t,n,T)}}},function(t,e,n){var r=n(9),i=n(5);t.exports=function(t){return i(t)&&r(t)}},function(t,e,n){var r=n(14),i=n(16);t.exports=function(t){return r(t,i(t))}},function(t,e,n){const r=n(248),i=n(253),o=n(256),{isNumber:s}=n(1);t.exports=function(t,e,n,a=1e3){let u=void 0,c=null;if(!s(a)||a<1)throw new TypeError("Invalid chunkSize: "+a);if(!Array.isArray(n))throw new TypeError("Invalid batch: Expected array, got "+typeof n);const l=r(n,a);return Object.assign(Promise.resolve().then(async()=>{return await o(1),n=async t=>{const n=[];for(const r of l)n.push(await t(e).insert(r,u));return i(n)},c?n(c):t.transaction(n);var n}),{returning(t){return u=t,this},transacting(t){return c=t,this}})}},function(t,e,n){var r=n(125),i=n(46),o=n(126),s=Math.ceil,a=Math.max;t.exports=function(t,e,n){e=(n?i(t,e,n):void 0===e)?1:a(o(e),0);var u=null==t?0:t.length;if(!u||e<1)return[];for(var c=0,l=0,h=Array(s(u/e));c<u;)h[l++]=r(t,c,c+=e);return h}},function(t,e,n){var r=n(250);t.exports=function(t){return t?(t=r(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}},function(t,e,n){var r=n(251),i=n(2),o=n(48),s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(o(t))return NaN;if(i(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=i(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=r(t);var n=a.test(t);return n||u.test(t)?c(t.slice(2),n?2:8):s.test(t)?NaN:+t}},function(t,e,n){var r=n(252),i=/^\s+/;t.exports=function(t){return t?t.slice(0,r(t)+1).replace(i,""):t}},function(t,e){var n=/\s/;t.exports=function(t){for(var e=t.length;e--&&n.test(t.charAt(e)););return e}},function(t,e,n){var r=n(254);t.exports=function(t){return(null==t?0:t.length)?r(t,1):[]}},function(t,e,n){var r=n(71),i=n(255);t.exports=function t(e,n,o,s,a){var u=-1,c=e.length;for(o||(o=i),a||(a=[]);++u<c;){var l=e[u];n>0&&o(l)?n>1?t(l,n-1,o,s,a):r(a,l):s||(a[a.length]=l)}return a}},function(t,e,n){var r=n(13),i=n(28),o=n(0),s=r?r.isConcatSpreadable:void 0;t.exports=function(t){return o(t)||i(t)||!!(s&&t&&t[s])}},function(t,e){t.exports=t=>new Promise(e=>setTimeout(e,t))},function(t,e,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function s(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,a,u=s(t),c=1;c<arguments.length;c++){for(var l in n=Object(arguments[c]))i.call(n,l)&&(u[l]=n[l]);if(r){a=r(n);for(var h=0;h<a.length;h++)o.call(n,a[h])&&(u[a[h]]=n[a[h]])}}return u}},function(t,e,n){var r=n(64),i=n(26),o=n(260),s=n(0);t.exports=function(t,e){return(s(t)?r:i)(t,o(e))}},function(t,e,n){var r=n(9);t.exports=function(t,e){return function(n,i){if(null==n)return n;if(!r(n))return t(n,i);for(var o=n.length,s=e?o:-1,a=Object(n);(e?s--:++s<o)&&!1!==i(a[s],s,a););return n}}},function(t,e,n){var r=n(17);t.exports=function(t){return"function"==typeof t?t:r}},function(t,e){t.exports=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}},function(t,e,n){var r=n(70),i=n(132),o=n(10),s=n(0),a=n(141);t.exports=function(t,e){return(s(t)?r:i)(t,a(o(e,3)))}},function(t,e,n){var r=n(264),i=n(272),o=n(139);t.exports=function(t){var e=i(t);return 1==e.length&&e[0][2]?o(e[0][0],e[0][1]):function(n){return n===t||r(n,t,e)}}},function(t,e,n){var r=n(35),i=n(133);t.exports=function(t,e,n,o){var s=n.length,a=s,u=!o;if(null==t)return!a;for(t=Object(t);s--;){var c=n[s];if(u&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++s<a;){var l=(c=n[s])[0],h=t[l],f=c[1];if(u&&c[2]){if(void 0===h&&!(l in t))return!1}else{var p=new r;if(o)var d=o(h,f,l,t,e,p);if(!(void 0===d?i(f,h,3,o,p):d))return!1}}return!0}},function(t,e,n){var r=n(35),i=n(134),o=n(270),s=n(271),a=n(23),u=n(0),c=n(21),l=n(22),h="[object Object]",f=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,p,d,g){var m=u(t),y=u(e),b=m?"[object Array]":a(t),v=y?"[object Array]":a(e),w=(b="[object Arguments]"==b?h:b)==h,_=(v="[object Arguments]"==v?h:v)==h,x=b==v;if(x&&c(t)){if(!c(e))return!1;m=!0,w=!1}if(x&&!w)return g||(g=new r),m||l(t)?i(t,e,n,p,d,g):o(t,e,b,n,p,d,g);if(!(1&n)){var E=w&&f.call(t,"__wrapped__"),C=_&&f.call(e,"__wrapped__");if(E||C){var T=E?t.value():t,O=C?e.value():e;return g||(g=new r),d(T,O,n,p,g)}}return!!x&&(g||(g=new r),s(t,e,n,p,d,g))}},function(t,e,n){var r=n(63),i=n(267),o=n(268);function s(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r;++e<n;)this.add(t[e])}s.prototype.add=s.prototype.push=i,s.prototype.has=o,t.exports=s},function(t,e){t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e){t.exports=function(t,e){return t.has(e)}},function(t,e,n){var r=n(13),i=n(105),o=n(20),s=n(134),a=n(136),u=n(137),c=r?r.prototype:void 0,l=c?c.valueOf:void 0;t.exports=function(t,e,n,r,c,h,f){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!h(new i(t),new i(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var p=a;case"[object Set]":var d=1&r;if(p||(p=u),t.size!=e.size&&!d)return!1;var g=f.get(t);if(g)return g==e;r|=2,f.set(t,e);var m=s(p(t),p(e),r,c,h,f);return f.delete(t),m;case"[object Symbol]":if(l)return l.call(t)==l.call(e)}return!1}},function(t,e,n){var r=n(102),i=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,o,s,a){var u=1&n,c=r(t),l=c.length;if(l!=r(e).length&&!u)return!1;for(var h=l;h--;){var f=c[h];if(!(u?f in e:i.call(e,f)))return!1}var p=a.get(t),d=a.get(e);if(p&&d)return p==e&&d==t;var g=!0;a.set(t,e),a.set(e,t);for(var m=u;++h<l;){var y=t[f=c[h]],b=e[f];if(o)var v=u?o(b,y,f,e,t,a):o(y,b,f,t,e,a);if(!(void 0===v?y===b||s(y,b,n,o,a):v)){g=!1;break}m||(m="constructor"==f)}if(g&&!m){var w=t.constructor,_=e.constructor;w==_||!("constructor"in t)||!("constructor"in e)||"function"==typeof w&&w instanceof w&&"function"==typeof _&&_ instanceof _||(g=!1)}return a.delete(t),a.delete(e),g}},function(t,e,n){var r=n(138),i=n(15);t.exports=function(t){for(var e=i(t),n=e.length;n--;){var o=e[n],s=t[o];e[n]=[o,s,r(s)]}return e}},function(t,e,n){var r=n(133),i=n(274),o=n(278),s=n(81),a=n(138),u=n(139),c=n(33);t.exports=function(t,e){return s(t)&&a(e)?u(c(t),e):function(n){var s=i(n,t);return void 0===s&&s===e?o(n,t):r(e,s,3)}}},function(t,e,n){var r=n(80);t.exports=function(t,e,n){var i=null==t?void 0:r(t,e);return void 0===i?n:i}},function(t,e,n){var r=n(276),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,s=r((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(i,(function(t,n,r,i){e.push(r?i.replace(o,"$1"):n||t)})),e}));t.exports=s},function(t,e,n){var r=n(277);t.exports=function(t){var e=r(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}},function(t,e,n){var r=n(63);function i(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=t.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(i.Cache||r),n}i.Cache=r,t.exports=i},function(t,e,n){var r=n(279),i=n(140);t.exports=function(t,e){return null!=t&&i(t,e,r)}},function(t,e){t.exports=function(t,e){return null!=t&&e in Object(t)}},function(t,e,n){var r=n(281),i=n(282),o=n(81),s=n(33);t.exports=function(t){return o(t)?r(s(t)):i(t)}},function(t,e){t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},function(t,e,n){var r=n(80);t.exports=function(t){return function(e){return r(e,t)}}},function(t,e,n){var r=n(12),i=n(0),o=n(5);t.exports=function(t){return"string"==typeof t||!i(t)&&o(t)&&"[object String]"==r(t)}},function(t,e){t.exports=function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}},function(t,e,n){var r=n(286),i=n(287),o=n(288);t.exports=function(t){return i(t)?o(t):r(t)}},function(t,e){t.exports=function(t){return t.split("")}},function(t,e){var n=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");t.exports=function(t){return n.test(t)}},function(t,e){var n="[\\ud800-\\udfff]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",i="\\ud83c[\\udffb-\\udfff]",o="[^\\ud800-\\udfff]",s="(?:\\ud83c[\\udde6-\\uddff]){2}",a="[\\ud800-\\udbff][\\udc00-\\udfff]",u="(?:"+r+"|"+i+")"+"?",c="[\\ufe0e\\ufe0f]?"+u+("(?:\\u200d(?:"+[o,s,a].join("|")+")[\\ufe0e\\ufe0f]?"+u+")*"),l="(?:"+[o+r+"?",r,s,a,n].join("|")+")",h=RegExp(i+"(?="+i+")|"+l+c,"g");t.exports=function(t){return t.match(h)||[]}},function(t,e,n){var r=n(47);t.exports=function(t,e){return r(e,(function(e){return t[e]}))}},function(t,e,n){const r=n(77);t.exports=class{constructor(t,e,n,r,i){this.schema=e,this.type="analytic",this.method=t,this.order=r||[],this.partitions=i||[],this.alias=n,this.and=this,this.grouping="columns"}partitionBy(t,e){return r(Array.isArray(t)||"string"==typeof t,"The argument to an analytic partitionBy function must be either a string\n            or an array of string."),Array.isArray(t)?this.partitions=this.partitions.concat(t):this.partitions.push({column:t,order:e}),this}orderBy(t,e){return r(Array.isArray(t)||"string"==typeof t,"The argument to an analytic orderBy function must be either a string\n            or an array of string."),Array.isArray(t)?this.order=this.order.concat(t):this.order.push({column:t,order:e}),this}}},function(t,e){t.exports={lockMode:{forShare:"forShare",forUpdate:"forUpdate",forNoKeyUpdate:"forNoKeyUpdate",forKeyShare:"forKeyShare"},waitMode:{skipLocked:"skipLocked",noWait:"noWait"}}},function(t,e){t.exports=function(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}},function(t,e){t.exports=function(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n}},function(t,e,n){const{columnize:r}=n(27);t.exports={replaceKeyBindings:function(t,e){const n={bindings:[]},i=t,o=t.bindings;return{method:"raw",sql:t.sql.replace(/\\?(:(\w+):(?=::)|:(\w+):(?!:)|:(\w+))/g,(function(t,s,a,u,c){if(t!==s)return s;const l=a||u||c,h=t.trim(),f=":"===h[h.length-1],p=o[l];return void 0===p?(Object.prototype.hasOwnProperty.call(o,l)&&n.bindings.push(p),t):f?t.replace(s,r(p,i,e,n)):t.replace(s,e.parameter(p,i,n))})),bindings:n.bindings}},replaceRawArrBindings:function(t,e){const n={bindings:[]},i=t,o=t.bindings.length,s=t.bindings;let a=0;const u=t.sql.replace(/\\?\?\??/g,(function(t){if("\\?"===t)return t;const o=s[a++];return"??"===t?r(o,i,e,n):e.parameter(o,i,n)}));if(o!==a)throw new Error(`Expected ${o} bindings, saw ${a}`);return{method:"raw",sql:u,bindings:n.bindings}}}},function(t,e,n){var r=n(64),i=n(108),o=n(131),s=n(10),a=n(45),u=n(0),c=n(21),l=n(38),h=n(2),f=n(22);t.exports=function(t,e,n){var p=u(t),d=p||c(t)||f(t);if(e=s(e,4),null==n){var g=t&&t.constructor;n=d?p?new g:[]:h(t)&&l(g)?i(a(t)):{}}return(d?r:o)(t,(function(t,r,i){return e(n,t,r,i)})),n}},function(t,e){t.exports=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i}},function(t,e,n){var r=n(298),i=n(299),o=n(10),s=n(0);t.exports=function(t,e){return function(n,a){var u=s(n)?r:i,c=e?e():{};return u(n,t,o(a,2),c)}}},function(t,e){t.exports=function(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var s=t[i];e(r,s,n(s),t)}return r}},function(t,e,n){var r=n(26);t.exports=function(t,e,n,i){return r(t,(function(t,r,o){e(i,t,n(t),o)})),i}},function(t,e){var n=Object.prototype.hasOwnProperty;t.exports=function(t,e){return null!=t&&n.call(t,e)}},function(t,e,n){var r=n(26),i=n(9);t.exports=function(t,e){var n=-1,o=i(t)?Array(t.length):[];return r(t,(function(t,r,i){o[++n]=e(t,r,i)})),o}},function(t,e,n){var r=n(10),i=n(141),o=n(303);t.exports=function(t,e){return o(t,i(r(e)))}},function(t,e,n){var r=n(47),i=n(10),o=n(304),s=n(104);t.exports=function(t,e){if(null==t)return{};var n=r(s(t),(function(t){return[t]}));return e=i(e),o(t,n,(function(t,n){return e(t,n[0])}))}},function(t,e,n){var r=n(80),i=n(305),o=n(52);t.exports=function(t,e,n){for(var s=-1,a=e.length,u={};++s<a;){var c=e[s],l=r(t,c);n(l,c)&&i(u,o(c,t),l)}return u}},function(t,e,n){var r=n(41),i=n(52),o=n(44),s=n(2),a=n(33);t.exports=function(t,e,n,u){if(!s(t))return t;for(var c=-1,l=(e=i(e,t)).length,h=l-1,f=t;null!=f&&++c<l;){var p=a(e[c]),d=n;if("__proto__"===p||"constructor"===p||"prototype"===p)return t;if(c!=h){var g=f[p];void 0===(d=u?u(g,p,f):void 0)&&(d=s(g)?g:o(e[c+1])?[]:{})}r(f,p,d),f=f[p]}return t}},function(t,e,n){const{EventEmitter:r}=n(3),i=n(54),{addQueryContext:o}=n(6),s=n(83),{augmentWithBuilderInterface:a}=n(84);class u extends r{constructor(t){super(),this.client=t,this._sequence=[],t.config&&(this._debug=t.config.debug,s(this,4))}withSchema(t){return this._schema=t,this}toString(){return this.toQuery()}toSQL(){return this.client.schemaCompiler(this).toSQL()}async generateDdlCommands(){return await this.client.schemaCompiler(this).generateDdlCommands()}}["createTable","createTableIfNotExists","createTableLike","createView","createViewOrReplace","createMaterializedView","refreshMaterializedView","dropView","dropViewIfExists","dropMaterializedView","dropMaterializedViewIfExists","createSchema","createSchemaIfNotExists","dropSchema","dropSchemaIfExists","createExtension","createExtensionIfNotExists","dropExtension","dropExtensionIfExists","table","alterTable","view","alterView","hasTable","hasColumn","dropTable","renameTable","renameView","dropTableIfExists","raw"].forEach((function(t){u.prototype[t]=function(){return"createTableIfNotExists"===t&&this.client.logger.warn(["Use async .hasTable to check if table exists and then use plain .createTable. Since ",'.createTableIfNotExists actually just generates plain "CREATE TABLE IF NOT EXIST..." ',"query it will not work correctly if there are any alter table queries generated for ","columns afterwards. To not break old migrations this function is left untouched for now",", but it should not be used when writing new code and it is removed from documentation."].join("")),"table"===t&&(t="alterTable"),"view"===t&&(t="alterView"),this._sequence.push({method:t,args:i(arguments)}),this}})),a(u),o(u),t.exports=u},function(t,e,n){const r=n(79),i=n(87),o=n(54),s=n(6),{isString:a,isFunction:u}=n(1);class c{constructor(t,e,n,r,i){if(this.client=t,this._fn=i,this._method=e,this._schemaName=void 0,this._tableName=n,this._tableNameLike=r,this._statements=[],this._single={},!r&&!u(this._fn))throw new TypeError("A callback function must be supplied to calls against `.createTable` and `.table`")}setSchema(t){this._schemaName=t}toSQL(){return"alter"===this._method&&i(this,l),this._fn&&this._fn.call(this,this),this.client.tableCompiler(this).toSQL()}timestamps(){const t=!0===arguments[0]?"timestamp":"datetime",e=this[t]("created_at"),n=this[t]("updated_at");if(!0===arguments[1]){const t=this.client.raw("CURRENT_TIMESTAMP");e.notNullable().defaultTo(t),n.notNullable().defaultTo(t)}}comment(t){if("string"!=typeof t)throw new TypeError("Table comment must be string");this._single.comment=t}foreign(t,e){const n={column:t,keyName:e};this._statements.push({grouping:"alterTable",method:"foreign",args:[n]});let r={references(t){let e;return a(t)&&(e=t.split(".")),e&&1!==e.length?(n.inTable=e[0],n.references=e[1],r):(n.references=e?e[0]:t,{on(t){if("string"!=typeof t)throw new TypeError("Expected tableName to be a string, got: "+typeof t);return n.inTable=t,r},inTable(){return this.on.apply(this,arguments)}})},withKeyName:t=>(n.keyName=t,r),onUpdate:t=>(n.onUpdate=t,r),onDelete:t=>(n.onDelete=t,r),deferrable:t=>{if(-1!==["mysql","mssql","redshift","mysql2","oracledb"].indexOf(this.client.dialect))throw new Error(this.client.dialect+" does not support deferrable");return n.deferrable=t,r},_columnBuilder:t=>(i(t,r),r=t,t)};return r}}["index","primary","unique","dropPrimary","dropUnique","dropIndex","dropForeign"].forEach(t=>{c.prototype[t]=function(){return this._statements.push({grouping:"alterTable",method:t,args:o(arguments)}),this}});r({mysql:["engine","charset","collate"],postgresql:["inherits"]},(function(t,e){t.forEach((function(t){c.prototype[t]=function(n){if(this.client.dialect!==e)throw new Error(`Knex only supports ${t} statement with ${e}.`);if("alter"===this._method)throw new Error(`Knex does not support altering the ${t} outside of create table, please use knex.raw statement.`);this._single[t]=n}}))})),s.addQueryContext(c);["tinyint","smallint","mediumint","int","bigint","decimal","float","double","real","bit","boolean","serial","date","datetime","timestamp","time","year","geometry","geography","point","char","varchar","tinytext","tinyText","text","mediumtext","mediumText","longtext","longText","binary","varbinary","tinyblob","tinyBlob","mediumblob","mediumBlob","blob","longblob","longBlob","enum","set","bool","dateTime","increments","bigincrements","bigIncrements","integer","biginteger","bigInteger","string","json","jsonb","uuid","enu","specificType"].forEach(t=>{c.prototype[t]=function(){const e=o(arguments),n=this.client.columnBuilder(this,t,e);return this._statements.push({grouping:"columns",builder:n}),n}});const l={renameColumn(t,e){return this._statements.push({grouping:"alterTable",method:"renameColumn",args:[t,e]}),this},dropTimestamps(){return this.dropColumns(["created_at","updated_at"])},setNullable(t){return this._statements.push({grouping:"alterTable",method:"setNullable",args:[t]}),this},dropNullable(t){return this._statements.push({grouping:"alterTable",method:"dropNullable",args:[t]}),this}};l.dropColumn=l.dropColumns=function(){return this._statements.push({grouping:"alterTable",method:"dropColumn",args:o(arguments)}),this},t.exports=c},function(t,e,n){var r=n(14),i=n(76),o=n(16),s=i((function(t,e){r(e,o(e),t)}));t.exports=s},function(t,e,n){var r=n(310),i=n(126),o=Math.max;t.exports=function(t,e,n){var s=null==t?0:t.length;if(!s)return-1;var a=null==n?0:i(n);return a<0&&(a=o(s+a,0)),r(t,e,a)}},function(t,e,n){var r=n(311),i=n(312),o=n(313);t.exports=function(t,e,n){return e==e?o(t,e,n):r(t,i,n)}},function(t,e){t.exports=function(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}},function(t,e){t.exports=function(t){return t!=t}},function(t,e){t.exports=function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}},function(t,e,n){const r=n(87),i=n(54),{addQueryContext:o}=n(6);class s{constructor(t,e,n,i){this.client=t,this._method="add",this._single={},this._modifiers={},this._statements=[],this._type=c[n]||n,this._args=i,this._tableBuilder=e,"alter"===e._method&&r(this,u)}references(t){return this._tableBuilder.foreign.call(this._tableBuilder,this._args[0],void 0,this)._columnBuilder(this).references(t)}}const a={default:"defaultTo",defaultsTo:"defaultTo"};["default","defaultsTo","defaultTo","unsigned","nullable","first","after","comment","collate"].forEach((function(t){const e=a[t]||t;s.prototype[t]=function(){return this._modifiers[e]=i(arguments),this}})),o(s),s.prototype.notNull=s.prototype.notNullable=function(){return this.nullable(!1)},["index","primary","unique"].forEach((function(t){s.prototype[t]=function(){return-1===this._type.toLowerCase().indexOf("increments")&&this._tableBuilder[t].apply(this._tableBuilder,[this._args[0]].concat(i(arguments))),this}}));const u={drop:function(){return this._single.drop=!0,this},alterType:function(t){return this._statements.push({grouping:"alterType",value:t}),this},alter:function(){return this._method="alter",this}},c={float:"floating",enum:"enu",boolean:"bool",string:"varchar",bigint:"bigInteger"};t.exports=s},function(t,e,n){t.exports=n(316)},function(t,e){t.exports=function(t){return t&&t.length?t[0]:void 0}},function(t,e,n){const r=n(55);t.exports=class extends r{constructor(t,e){super(t),this.ref=e,this._schema=null,this._alias=null}withSchema(t){return this._schema=t,this}as(t){return this._alias=t,this}toSQL(){const t=this._schema?`${this._schema}.${this.ref}`:this.ref,e=this.client.formatter(this),n=e.columnize(t),r=this._alias?`${n} as ${e.wrap(this._alias)}`:n;return this.set(r,[]),super.toSQL(...arguments)}}},function(t,e,n){(function(e){const r=n(319),{inspect:i}=n(19),{isString:o,isFunction:s}=n(1);t.exports=class{constructor(t={}){const{log:{debug:n,warn:r,error:i,deprecate:o,inspectionDepth:s,enableColors:a}={}}=t;this._inspectionDepth=s||5,this._enableColors=function(t){if(null!=t)return t;if(e&&e.stdout)return e.stdout.isTTY;return!1}(a),this._debug=n,this._warn=r,this._error=i,this._deprecate=o}_log(t,e,n){if(null!=e&&!s(e))throw new TypeError("Extensions to knex logger must be functions!");s(e)?e(t):(o(t)||(t=i(t,{depth:this._inspectionDepth,colors:this._enableColors})),console.log(n?n(t):t))}debug(t){this._log(t,this._debug)}warn(t){this._log(t,this._warn,r.yellow)}error(t){this._log(t,this._error,r.red)}deprecate(t,e){const n=`${t} is deprecated, please use ${e}`;this._log(n,this._deprecate,r.yellow)}}}).call(this,n(8))},function(t,e,n){"use strict";n.r(e),function(t){n.d(e,"isColorSupported",(function(){return l})),n.d(e,"createColors",(function(){return m})),n.d(e,"reset",(function(){return y})),n.d(e,"bold",(function(){return b})),n.d(e,"dim",(function(){return v})),n.d(e,"italic",(function(){return w})),n.d(e,"underline",(function(){return _})),n.d(e,"inverse",(function(){return x})),n.d(e,"hidden",(function(){return E})),n.d(e,"strikethrough",(function(){return C})),n.d(e,"black",(function(){return T})),n.d(e,"red",(function(){return O})),n.d(e,"green",(function(){return j})),n.d(e,"yellow",(function(){return A})),n.d(e,"blue",(function(){return N})),n.d(e,"magenta",(function(){return S})),n.d(e,"cyan",(function(){return R})),n.d(e,"white",(function(){return I})),n.d(e,"gray",(function(){return k})),n.d(e,"bgBlack",(function(){return q})),n.d(e,"bgRed",(function(){return P})),n.d(e,"bgGreen",(function(){return L})),n.d(e,"bgYellow",(function(){return B})),n.d(e,"bgBlue",(function(){return M})),n.d(e,"bgMagenta",(function(){return $})),n.d(e,"bgCyan",(function(){return U})),n.d(e,"bgWhite",(function(){return F})),n.d(e,"blackBright",(function(){return D})),n.d(e,"redBright",(function(){return W})),n.d(e,"greenBright",(function(){return H})),n.d(e,"yellowBright",(function(){return Q})),n.d(e,"blueBright",(function(){return z})),n.d(e,"magentaBright",(function(){return Y})),n.d(e,"cyanBright",(function(){return V})),n.d(e,"whiteBright",(function(){return G})),n.d(e,"bgBlackBright",(function(){return K})),n.d(e,"bgRedBright",(function(){return J})),n.d(e,"bgGreenBright",(function(){return X})),n.d(e,"bgYellowBright",(function(){return Z})),n.d(e,"bgBlueBright",(function(){return tt})),n.d(e,"bgMagentaBright",(function(){return et})),n.d(e,"bgCyanBright",(function(){return nt})),n.d(e,"bgWhiteBright",(function(){return rt}));var r=n(59);const i=Object({NODE_ENV:"production"})||!1,o=t.argv||[],s="NO_COLOR"in i||o.includes("--no-color"),a="FORCE_COLOR"in i||o.includes("--color"),u="win32"===t.platform,c=r&&r.isatty&&r.isatty(1)&&i.TERM&&"dumb"!==i.TERM,l=!s&&(a||u||c||"CI"in i&&("GITHUB_ACTIONS"in i||"GITLAB_CI"in i||"CIRCLECI"in i)),h=(t,e,n,r,i=e.substring(0,t)+r,o=e.substring(t+n.length),s=o.indexOf(n))=>i+(s<0?o:h(s,o,n,r)),f=(t,e,n=t,r=t.length+1)=>i=>i||""!==i&&void 0!==i?((t,e,n,r,i)=>t<0?n+e+r:n+h(t,e,r,i)+r)((""+i).indexOf(e,r),i,t,e,n):"",p=(t,e,n)=>f(`[${t}m`,`[${e}m`,n),d={reset:p(0,0),bold:p(1,22,"[22m[1m"),dim:p(2,22,"[22m[2m"),italic:p(3,23),underline:p(4,24),inverse:p(7,27),hidden:p(8,28),strikethrough:p(9,29),black:p(30,39),red:p(31,39),green:p(32,39),yellow:p(33,39),blue:p(34,39),magenta:p(35,39),cyan:p(36,39),white:p(37,39),gray:p(90,39),bgBlack:p(40,49),bgRed:p(41,49),bgGreen:p(42,49),bgYellow:p(43,49),bgBlue:p(44,49),bgMagenta:p(45,49),bgCyan:p(46,49),bgWhite:p(47,49),blackBright:p(90,39),redBright:p(91,39),greenBright:p(92,39),yellowBright:p(93,39),blueBright:p(94,39),magentaBright:p(95,39),cyanBright:p(96,39),whiteBright:p(97,39),bgBlackBright:p(100,49),bgRedBright:p(101,49),bgGreenBright:p(102,49),bgYellowBright:p(103,49),bgBlueBright:p(104,49),bgMagentaBright:p(105,49),bgCyanBright:p(106,49),bgWhiteBright:p(107,49)},g=t=>t,m=({useColor:t=l}={})=>t?d:Object.keys(d).reduce((t,e)=>({...t,[e]:g}),{}),{reset:y,bold:b,dim:v,italic:w,underline:_,inverse:x,hidden:E,strikethrough:C,black:T,red:O,green:j,yellow:A,blue:N,magenta:S,cyan:R,white:I,gray:k,bgBlack:q,bgRed:P,bgGreen:L,bgYellow:B,bgBlue:M,bgMagenta:$,bgCyan:U,bgWhite:F,blackBright:D,redBright:W,greenBright:H,yellowBright:Q,blueBright:z,magentaBright:Y,cyanBright:V,whiteBright:G,bgBlackBright:K,bgRedBright:J,bgGreenBright:X,bgYellowBright:Z,bgBlueBright:tt,bgMagentaBright:et,bgCyanBright:nt,bgWhiteBright:rt}=m()}.call(this,n(8))},function(t,e,n){const r=n(6),i=n(87);class o{constructor(t,e,n,r){this.client=t,this._method=e,this._schemaName=void 0,this._columns=void 0,this._fn=r,this._viewName=n,this._statements=[],this._single={}}setSchema(t){this._schemaName=t}columns(t){this._columns=t}as(t){this._selectQuery=t}checkOption(){throw new Error("check option definition is not supported by this dialect.")}localCheckOption(){throw new Error("check option definition is not supported by this dialect.")}cascadedCheckOption(){throw new Error("check option definition is not supported by this dialect.")}toSQL(){return"alter"===this._method&&i(this,s),this._fn.call(this,this),this.client.viewCompiler(this).toSQL()}}const s={column(t){const e=this;return{rename:function(n){return e._statements.push({grouping:"alterView",method:"renameColumn",args:[t,n]}),this},defaultTo:function(n){return e._statements.push({grouping:"alterView",method:"defaultTo",args:[t,n]}),this}}}};r.addQueryContext(o),t.exports=o},function(t,e,n){const r=n(60),{SUPPORTED_CLIENTS:i}=n(82),o=n(322),{resolveClientNameWithAliases:s}=n(6);t.exports={resolveConfig:function(t){let e,a;const u="string"==typeof t?Object.assign(o(t),arguments[2]):t;if(0===arguments.length||!u.client&&!u.dialect)e=r;else if("function"==typeof u.client)e=u.client;else{const t=u.client||u.dialect;if(!i.includes(t))throw new Error(`knex: Unknown configuration option 'client' value ${t}. Note that it is case-sensitive, check documentation for supported values.`);const r=s(t);e=n(331)(`./${r}/index.js`)}return a="string"==typeof u.connection?Object.assign({},u,{connection:o(u.connection).connection}):Object.assign({},u),{resolvedConfig:a,Dialect:e}}}},function(t,e,n){(function(e){const{parse:r}=n(323),i=r,o=e&&e.platform&&"win32"===e.platform;function s(t){const e={};let n=t.pathname;if("/"===n[0]&&(n=n.slice(1)),e.database=n,t.hostname&&(0===t.protocol.indexOf("mssql")?e.server=t.hostname:e.host=t.hostname),t.port&&(e.port=t.port),(t.username||t.password)&&(e.user=decodeURIComponent(t.username)),t.password&&(e.password=decodeURIComponent(t.password)),t.searchParams)for(const[n,r]of t.searchParams.entries()){if(["mysql:","mariadb:"].includes(t.protocol))try{e[n]=JSON.parse(r)}catch(t){e[n]=r}else e[n]=r}return e}t.exports=function(t){const e=function(t){try{return new URL(t)}catch(t){return null}}(t),n=o&&e&&2===e.protocol.length;if(!e||n)return{client:"sqlite3",connection:{filename:t}};let{protocol:r}=e;":"===r.slice(-1)&&(r=r.slice(0,-1));return{client:r,connection:["postgresql","postgres"].includes(r)?i(t):s(e)}}}).call(this,n(8))},function(t,e,n){"use strict";var r=n(324),i=n(330);function o(t){if("/"===t.charAt(0))return{host:(n=t.split(" "))[0],database:n[1]};var e=r.parse(/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(t)?encodeURI(t).replace(/\%25(\d\d)/g,"%$1"):t,!0),n=e.query;for(var o in n)Array.isArray(n[o])&&(n[o]=n[o][n[o].length-1]);var s=(e.auth||":").split(":");if(n.user=s[0],n.password=s.splice(1).join(":"),n.port=e.port,"socket:"==e.protocol)return n.host=decodeURI(e.pathname),n.database=e.query.db,n.client_encoding=e.query.encoding,n;n.host||(n.host=e.hostname);var a=e.pathname;if(!n.host&&a&&/^%2f/i.test(a)){var u=a.split("/");n.host=decodeURIComponent(u[0]),a=u.splice(1).join("/")}switch(a&&"/"===a.charAt(0)&&(a=a.slice(1)||null),n.database=a&&decodeURI(a),"true"!==n.ssl&&"1"!==n.ssl||(n.ssl=!0),"0"===n.ssl&&(n.ssl=!1),(n.sslcert||n.sslkey||n.sslrootcert||n.sslmode)&&(n.ssl={}),n.sslcert&&(n.ssl.cert=i.readFileSync(n.sslcert).toString()),n.sslkey&&(n.ssl.key=i.readFileSync(n.sslkey).toString()),n.sslrootcert&&(n.ssl.ca=i.readFileSync(n.sslrootcert).toString()),n.sslmode){case"disable":n.ssl=!1;break;case"prefer":case"require":case"verify-ca":case"verify-full":break;case"no-verify":n.ssl.rejectUnauthorized=!1}return n}t.exports=o,o.parse=o},function(t,e,n){"use strict";var r=n(325),i=n(326);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=v,e.resolve=function(t,e){return v(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?v(t,!1,!0).resolveObject(e):e},e.format=function(t){i.isString(t)&&(t=v(t));return t instanceof o?t.format():o.prototype.format.call(t)},e.Url=o;var s=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(c),h=["%","/","?",";","#"].concat(l),f=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},b=n(327);function v(t,e,n){if(t&&i.isObject(t)&&t instanceof o)return t;var r=new o;return r.parse(t,e,n),r}o.prototype.parse=function(t,e,n){if(!i.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var o=t.indexOf("?"),a=-1!==o&&o<t.indexOf("#")?"?":"#",c=t.split(a);c[0]=c[0].replace(/\\/g,"/");var v=t=c.join(a);if(v=v.trim(),!n&&1===t.split("#").length){var w=u.exec(v);if(w)return this.path=v,this.href=v,this.pathname=w[1],w[2]?(this.search=w[2],this.query=e?b.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var _=s.exec(v);if(_){var x=(_=_[0]).toLowerCase();this.protocol=x,v=v.substr(_.length)}if(n||_||v.match(/^\/\/[^@\/]+@[^@\/]+/)){var E="//"===v.substr(0,2);!E||_&&m[_]||(v=v.substr(2),this.slashes=!0)}if(!m[_]&&(E||_&&!y[_])){for(var C,T,O=-1,j=0;j<f.length;j++){-1!==(A=v.indexOf(f[j]))&&(-1===O||A<O)&&(O=A)}-1!==(T=-1===O?v.lastIndexOf("@"):v.lastIndexOf("@",O))&&(C=v.slice(0,T),v=v.slice(T+1),this.auth=decodeURIComponent(C)),O=-1;for(j=0;j<h.length;j++){var A;-1!==(A=v.indexOf(h[j]))&&(-1===O||A<O)&&(O=A)}-1===O&&(O=v.length),this.host=v.slice(0,O),v=v.slice(O),this.parseHost(),this.hostname=this.hostname||"";var N="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!N)for(var S=this.hostname.split(/\./),R=(j=0,S.length);j<R;j++){var I=S[j];if(I&&!I.match(p)){for(var k="",q=0,P=I.length;q<P;q++)I.charCodeAt(q)>127?k+="x":k+=I[q];if(!k.match(p)){var L=S.slice(0,j),B=S.slice(j+1),M=I.match(d);M&&(L.push(M[1]),B.unshift(M[2])),B.length&&(v="/"+B.join(".")+v),this.hostname=L.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),N||(this.hostname=r.toASCII(this.hostname));var $=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+$,this.href+=this.host,N&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==v[0]&&(v="/"+v))}if(!g[x])for(j=0,R=l.length;j<R;j++){var F=l[j];if(-1!==v.indexOf(F)){var D=encodeURIComponent(F);D===F&&(D=escape(F)),v=v.split(F).join(D)}}var W=v.indexOf("#");-1!==W&&(this.hash=v.substr(W),v=v.slice(0,W));var H=v.indexOf("?");if(-1!==H?(this.search=v.substr(H),this.query=v.substr(H+1),e&&(this.query=b.parse(this.query)),v=v.slice(0,H)):e&&(this.search="",this.query={}),v&&(this.pathname=v),y[x]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){$=this.pathname||"";var Q=this.search||"";this.path=$+Q}return this.href=this.format(),this},o.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,s="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(s=b.stringify(this.query));var a=this.search||s&&"?"+s||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||y[e])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),e+o+(n=n.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(a=a.replace("#","%23"))+r},o.prototype.resolve=function(t){return this.resolveObject(v(t,!1,!0)).format()},o.prototype.resolveObject=function(t){if(i.isString(t)){var e=new o;e.parse(t,!1,!0),t=e}for(var n=new o,r=Object.keys(this),s=0;s<r.length;s++){var a=r[s];n[a]=this[a]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var u=Object.keys(t),c=0;c<u.length;c++){var l=u[c];"protocol"!==l&&(n[l]=t[l])}return y[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!y[t.protocol]){for(var h=Object.keys(t),f=0;f<h.length;f++){var p=h[f];n[p]=t[p]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||m[t.protocol])n.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),n.pathname=d.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var g=n.pathname||"",b=n.search||"";n.path=g+b}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var v=n.pathname&&"/"===n.pathname.charAt(0),w=t.host||t.pathname&&"/"===t.pathname.charAt(0),_=w||v||n.host&&t.pathname,x=_,E=n.pathname&&n.pathname.split("/")||[],C=(d=t.pathname&&t.pathname.split("/")||[],n.protocol&&!y[n.protocol]);if(C&&(n.hostname="",n.port=null,n.host&&(""===E[0]?E[0]=n.host:E.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),_=_&&(""===d[0]||""===E[0])),w)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,E=d;else if(d.length)E||(E=[]),E.pop(),E=E.concat(d),n.search=t.search,n.query=t.query;else if(!i.isNullOrUndefined(t.search)){if(C)n.hostname=n.host=E.shift(),(N=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=N.shift(),n.host=n.hostname=N.shift());return n.search=t.search,n.query=t.query,i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!E.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var T=E.slice(-1)[0],O=(n.host||t.host||E.length>1)&&("."===T||".."===T)||""===T,j=0,A=E.length;A>=0;A--)"."===(T=E[A])?E.splice(A,1):".."===T?(E.splice(A,1),j++):j&&(E.splice(A,1),j--);if(!_&&!x)for(;j--;j)E.unshift("..");!_||""===E[0]||E[0]&&"/"===E[0].charAt(0)||E.unshift(""),O&&"/"!==E.join("/").substr(-1)&&E.push("");var N,S=""===E[0]||E[0]&&"/"===E[0].charAt(0);C&&(n.hostname=n.host=S?"":E.length?E.shift():"",(N=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=N.shift(),n.host=n.hostname=N.shift()));return(_=_||n.host&&E.length)&&!S&&E.unshift(""),E.length?n.pathname=E.join("/"):(n.pathname=null,n.path=null),i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},o.prototype.parseHost=function(){var t=this.host,e=a.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,n){(function(t,r){var i;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(o){e&&e.nodeType,t&&t.nodeType;var s="object"==typeof r&&r;s.global!==s&&s.window!==s&&s.self;var a,u=2147483647,c=/^xn--/,l=/[^\x20-\x7E]/,h=/[\x2E\u3002\uFF0E\uFF61]/g,f={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,d=String.fromCharCode;function g(t){throw new RangeError(f[t])}function m(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function y(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),r+m((t=t.replace(h,".")).split("."),e).join(".")}function b(t){for(var e,n,r=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function v(t){return m(t,(function(t){var e="";return t>65535&&(e+=d((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=d(t)})).join("")}function w(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function _(t,e,n){var r=0;for(t=n?p(t/700):t>>1,t+=p(t/e);t>455;r+=36)t=p(t/35);return p(r+36*t/(t+38))}function x(t){var e,n,r,i,o,s,a,c,l,h,f,d=[],m=t.length,y=0,b=128,w=72;for((n=t.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&g("not-basic"),d.push(t.charCodeAt(r));for(i=n>0?n+1:0;i<m;){for(o=y,s=1,a=36;i>=m&&g("invalid-input"),((c=(f=t.charCodeAt(i++))-48<10?f-22:f-65<26?f-65:f-97<26?f-97:36)>=36||c>p((u-y)/s))&&g("overflow"),y+=c*s,!(c<(l=a<=w?1:a>=w+26?26:a-w));a+=36)s>p(u/(h=36-l))&&g("overflow"),s*=h;w=_(y-o,e=d.length+1,0==o),p(y/e)>u-b&&g("overflow"),b+=p(y/e),y%=e,d.splice(y++,0,b)}return v(d)}function E(t){var e,n,r,i,o,s,a,c,l,h,f,m,y,v,x,E=[];for(m=(t=b(t)).length,e=128,n=0,o=72,s=0;s<m;++s)(f=t[s])<128&&E.push(d(f));for(r=i=E.length,i&&E.push("-");r<m;){for(a=u,s=0;s<m;++s)(f=t[s])>=e&&f<a&&(a=f);for(a-e>p((u-n)/(y=r+1))&&g("overflow"),n+=(a-e)*y,e=a,s=0;s<m;++s)if((f=t[s])<e&&++n>u&&g("overflow"),f==e){for(c=n,l=36;!(c<(h=l<=o?1:l>=o+26?26:l-o));l+=36)x=c-h,v=36-h,E.push(d(w(h+x%v,0))),c=p(x/v);E.push(d(w(c,0))),o=_(n,y,r==i),n=0,++r}++n,++e}return E.join("")}a={version:"1.4.1",ucs2:{decode:b,encode:v},decode:x,encode:E,toASCII:function(t){return y(t,(function(t){return l.test(t)?"xn--"+E(t):t}))},toUnicode:function(t){return y(t,(function(t){return c.test(t)?x(t.slice(4).toLowerCase()):t}))}},void 0===(i=function(){return a}.call(e,n,e,t))||(t.exports=i)}()}).call(this,n(43)(t),n(7))},function(t,e,n){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,n){"use strict";e.decode=e.parse=n(328),e.encode=e.stringify=n(329)},function(t,e,n){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,o){e=e||"&",n=n||"=";var s={};if("string"!=typeof t||0===t.length)return s;var a=/\+/g;t=t.split(e);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var c=t.length;u>0&&c>u&&(c=u);for(var l=0;l<c;++l){var h,f,p,d,g=t[l].replace(a,"%20"),m=g.indexOf(n);m>=0?(h=g.substr(0,m),f=g.substr(m+1)):(h=g,f=""),p=decodeURIComponent(h),d=decodeURIComponent(f),r(s,p)?i(s[p])?s[p].push(d):s[p]=[s[p],d]:s[p]=d}return s};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,n){"use strict";var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,n,a){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?o(s(t),(function(s){var a=encodeURIComponent(r(s))+n;return i(t[s])?o(t[s],(function(t){return a+encodeURIComponent(r(t))})).join(e):a+encodeURIComponent(r(t[s]))})).join(e):a?encodeURIComponent(r(a))+n+encodeURIComponent(r(t)):""};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function o(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var s=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},function(t,e){},function(t,e,n){var r={"./sqlite3/index.js":332};function i(t){var e=o(t);return n(e)}function o(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}i.keys=function(){return Object.keys(r)},i.resolve=o,t.exports=i,i.id=331},function(t,e,n){const r=n(109),i=n(146),{promisify:o}=n(19),s=n(60),a=n(55),u=n(333),c=n(334),l=n(335),h=n(338),f=n(339),p=n(341),d=n(342),g=n(150);class m extends s{constructor(t){super(t),void 0===t.useNullAsDefault&&this.logger.warn("sqlite does not support inserting default values. Set the `useNullAsDefault` flag to hide this warning. (see docs http://knexjs.org/#Builder-insert).")}_driver(){return n(349)}schemaCompiler(){return new l(this,...arguments)}transaction(){return new u(this,...arguments)}queryCompiler(t,e){return new c(this,t,e)}viewCompiler(t,e){return new p(this,t,e)}columnCompiler(){return new h(this,...arguments)}tableCompiler(){return new f(this,...arguments)}ddl(t,e,n){return new d(this,t,e,n)}wrapIdentifierImpl(t){return"*"!==t?`\`${t.replace(/`/g,"``")}\``:"*"}acquireRawConnection(){return new Promise((t,e)=>{let n=this.driver.OPEN_READWRITE|this.driver.OPEN_CREATE;if(this.connectionSettings.flags){if(!Array.isArray(this.connectionSettings.flags))throw new Error("flags must be an array of strings");this.connectionSettings.flags.forEach(t=>{if(!t.startsWith("OPEN_")||!this.driver[t])throw new Error(`flag ${t} not supported by node-sqlite3`);n|=this.driver[t]})}const r=new this.driver.Database(this.connectionSettings.filename,n,n=>{if(n)return e(n);t(r)})})}async destroyRawConnection(t){return o(e=>t.close(e))()}_query(t,e){if(!e.sql)throw new Error("The query is empty");const{method:n}=e;let r;switch(n){case"insert":case"update":case"counter":case"del":r="run";break;default:r="all"}return new Promise((function(n,i){if(!t||!t[r])return i(new Error(`Error calling ${r} on connection.`));t[r](e.sql,e.bindings,(function(t,r){return t?i(t):(e.response=r,e.context=this,n(e))}))}))}_stream(t,e,n){if(!e.sql)throw new Error("The query is empty");const r=this;return new Promise((function(i,o){return n.on("error",o),n.on("end",i),r._query(t,e).then(t=>t.response).then(t=>t.forEach(t=>n.write(t))).catch((function(t){n.emit("error",t)})).then((function(){n.end()}))}))}processResponse(t,e){const n=t.context,{response:r}=t;if(t.output)return t.output.call(e,r);switch(t.method){case"select":return r;case"first":return r[0];case"pluck":return i(r,t.pluck);case"insert":return[n.lastID];case"del":case"update":case"counter":return n.changes;default:return r}}poolDefaults(){return r({min:1,max:1},super.poolDefaults())}formatter(t){return new g(this,t)}values(t,e,n){return Array.isArray(t)?Array.isArray(t[0])?`( values ${t.map(t=>`(${this.parameterize(t,void 0,e,n)})`).join(", ")})`:`(${this.parameterize(t,void 0,e,n)})`:t instanceof a?`(${this.parameter(t,e,n)})`:this.parameter(t,e,n)}}Object.assign(m.prototype,{dialect:"sqlite3",driverName:"sqlite3"}),t.exports=m},function(t,e,n){const r=n(119);t.exports=class extends r{begin(t){return this.isolationLevel&&this.client.logger.warn("sqlite3 only supports serializable transactions, ignoring the isolation level param"),this.query(t,"BEGIN;")}}},function(t,e,n){const r=n(111),i=n(79),o=n(17),s=n(32),a=n(85),u=n(144),c=n(128),{isString:l}=n(1),{wrapString:h}=n(27),f=r("");t.exports=class extends u{constructor(t,e,n){super(t,e,n);const{returning:r}=this.single;r&&this.client.logger.warn(".returning() is not supported by sqlite3 and will not have any effect."),this.forShare=f,this.forKeyShare=f,this.forUpdate=f,this.forNoKeyUpdate=f}insert(){const t=this.single.insert||[];let e=this.with()+`insert into ${this.tableName} `;if(Array.isArray(t)){if(0===t.length)return"";if(1===t.length&&t[0]&&s(t[0]))return e+this._emptyInsertValue}else if("object"==typeof t&&s(t))return e+this._emptyInsertValue;const n=this._prepInsert(t);if(l(n))return e+n;if(0===n.columns.length)return"";if(e+=`(${this.formatter.columnize(n.columns)})`,null!==this.client.valueForUndefined&&n.values.forEach(t=>{i(t,t=>{if(void 0===t)throw new TypeError("`sqlite` does not support inserting default values. Specify values explicitly or use the `useNullAsDefault` config flag. (see docs http://knexjs.org/#Builder-insert).")})}),1===n.values.length){e+=` values (${this.client.parameterize(n.values[0],this.client.valueForUndefined,this.builder,this.bindingsHolder)})`;const{onConflict:r,ignore:i,merge:o}=this.single;if(r&&i)e+=this._ignore(r);else if(r&&o){e+=this._merge(o.updates,r,t);const n=this.where();n&&(e+=" "+n)}return e}const r=[];let o=-1;for(;++o<n.values.length;){let t=-1;const e=r[o]=[];let i=n.values[o];for(i=void 0===i?this.client.valueForUndefined:i;++t<n.columns.length;)e.push(this.client.alias(this.client.parameter(i[t],this.builder,this.bindingsHolder),this.formatter.wrap(n.columns[t])));r[o]=e.join(", ")}e+=" select "+r.join(" union all select ");const{onConflict:a,ignore:u,merge:c}=this.single;return a&&u?e+=" where true"+this._ignore(a):a&&c&&(e+=" where true"+this._merge(c.updates,a,t)),e}_ignore(t){return!0===t?" on conflict do nothing":` on conflict (${this.formatter.columnize(t)}) do nothing`}_merge(t,e,n){let r=` on conflict (${this.formatter.columnize(e)}) do update set `;if(t&&Array.isArray(t))return r+=t.map(t=>h(t.split(".").pop(),this.formatter.builder,this.client,this.formatter)).map(t=>`${t} = excluded.${t}`).join(", "),r;if(t&&"object"==typeof t){const e=this._prepUpdate(t);return r+="string"==typeof e?e:e.join(","),r}{const t=this._prepInsert(n);if("string"==typeof t)throw new Error("If using merge with a raw insert query, then updates must be provided");return r+=t.columns.map(t=>h(t.split(".").pop(),this.builder,this.client)).map(t=>`${t} = excluded.${t}`).join(", "),r}}truncate(){const{table:t}=this.single;return{sql:"delete from "+this.tableName,output(){return this.query({sql:`delete from sqlite_sequence where name = '${t}'`}).catch(c)}}}columnInfo(){const t=this.single.columnInfo;return{sql:`PRAGMA table_info(\`${this.client.customWrapIdentifier(this.single.table,o)}\`)`,output(e){const n=/.*\((\d+)\)/,r=a(e,(function(t,e){let{type:r}=e,i=r.match(n);return i&&(i=i[1]),r=i?r.split("(")[0]:r,t[e.name]={type:r.toLowerCase(),maxLength:i,nullable:!e.notnull,defaultValue:e.dflt_value},t}),{});return t&&r[t]||r}}}limit(){const t=!this.single.limit&&0!==this.single.limit;return t&&!this.single.offset?"":"limit "+this.client.parameter(t?-1:this.single.limit,this.builder,this.bindingsHolder)}}},function(t,e,n){const r=n(147),i=n(336);t.exports=class extends r{constructor(t,e){super(t,e)}hasTable(t){const e="select * from sqlite_master where type = 'table' and name = "+this.client.parameter(t,this.builder,this.bindingsHolder);this.pushQuery({sql:e,output:t=>t.length>0})}hasColumn(t,e){this.pushQuery({sql:`PRAGMA table_info(${this.formatter.wrap(t)})`,output(t){return i(t,t=>this.client.wrapIdentifier(t.name.toLowerCase())===this.client.wrapIdentifier(e.toLowerCase()))}})}renameTable(t,e){this.pushQuery(`alter table ${this.formatter.wrap(t)} rename to ${this.formatter.wrap(e)}`)}async generateDdlCommands(){const t=this.builder._sequence;for(let e=0,n=t.length;e<n;e++){const n=t[e];this[n.method].apply(this,n.args)}const e=[],n=this.sequence;for(const t of n){const n=t.statementsProducer?await t.statementsProducer():t.sql;Array.isArray(n)?e.push(...n):e.push(n)}return{pre:[],sql:e,post:[]}}}},function(t,e,n){var r=n(135),i=n(10),o=n(337),s=n(0),a=n(46);t.exports=function(t,e,n){var u=s(t)?r:o;return n&&a(t,e,n)&&(e=void 0),u(t,i(e,3))}},function(t,e,n){var r=n(26);t.exports=function(t,e){var n;return r(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}},function(t,e,n){const r=n(149);class i extends r{constructor(){super(...arguments),this.modifiers=["nullable","defaultTo"]}enu(t){return`text check (${this.formatter.wrap(this.args[0])} in ('${t.join("', '")}'))`}}i.prototype.json="json",i.prototype.jsonb="json",i.prototype.double=i.prototype.decimal=i.prototype.floating="float",i.prototype.timestamp="datetime",t.exports=i},function(t,e,n){const r=n(340),i=n(142),o=n(17),{isObject:s}=n(1),a=n(148),{formatDefault:u}=n(56);t.exports=class extends a{constructor(){super(...arguments)}createQuery(t,e,n){let r=(e?"create table if not exists ":"create table ")+this.tableName();n&&this.tableNameLike()?r+=" as select * from "+this.tableNameLike()+" where 0=1":(r+=" ("+t.sql.join(", "),r+=this.foreignKeys()||"",r+=this.primaryKeys()||"",r+=")"),this.pushQuery(r)}addColumns(t,e,n){if(e===this.alterColumnsPrefix){const t=this,e=n.map(t=>{const e=this.client.customWrapIdentifier(t.getColumnName(),o,t.columnBuilder.queryContext()),n=t.getColumnType();return{name:e,type:n,defaultTo:t.modified.defaultTo?u(t.modified.defaultTo[0],n,this.client):null,notNull:t.modified.nullable&&!1===t.modified.nullable[0]}});this.pushQuery({sql:`PRAGMA table_info(${this.tableName()})`,output(n){return t.client.ddl(t,n,this.connection).alterColumn(e)}})}else for(let e=0,n=t.sql.length;e<n;e++)this.pushQuery({sql:`alter table ${this.tableName()} add column ${t.sql[e]}`,bindings:t.bindings[e]})}dropUnique(t,e){e=e?this.formatter.wrap(e):this._indexCommand("unique",this.tableNameRaw,t),this.pushQuery("drop index "+e)}dropForeign(t,e){const n=this;t=(t=Array.isArray(t)?t:[t]).map(t=>this.client.customWrapIdentifier(t,o)),e=this.client.customWrapIdentifier(e,o),this.pushQuery({sql:`PRAGMA table_info(${this.tableName()})`,output(r){return n.client.ddl(n,r,this.connection).dropForeign(t,e)}})}dropPrimary(t){const e=this;t=this.client.customWrapIdentifier(t,o),this.pushQuery({sql:`PRAGMA table_info(${this.tableName()})`,output(n){return e.client.ddl(e,n,this.connection).dropPrimary(t)}})}dropIndex(t,e){e=e?this.formatter.wrap(e):this._indexCommand("index",this.tableNameRaw,t),this.pushQuery("drop index "+e)}unique(t,e){let n;s(e)&&({indexName:e,deferrable:n}=e),n&&"not deferrable"!==n&&this.client.logger.warn(`sqlite3: unique index \`${e}\` will not be deferrable ${n} because sqlite3 does not support deferred constraints.`),e=e?this.formatter.wrap(e):this._indexCommand("unique",this.tableNameRaw,t),t=this.formatter.columnize(t),this.pushQuery(`create unique index ${e} on ${this.tableName()} (${t})`)}index(t,e,n){let r;e=e?this.formatter.wrap(e):this._indexCommand("index",this.tableNameRaw,t),t=this.formatter.columnize(t),s(n)&&({predicate:r}=n);const i=r?" "+this.client.queryCompiler(r).where():"";this.pushQuery(`create index ${e} on ${this.tableName()} (${t})${i}`)}primary(t,e){const n=this;let r;t=(t=Array.isArray(t)?t:[t]).map(t=>this.client.customWrapIdentifier(t,o)),s(e)&&({constraintName:e,deferrable:r}=e),r&&"not deferrable"!==r&&this.client.logger.warn(`sqlite3: primary key constraint \`${e}\` will not be deferrable ${r} because sqlite3 does not support deferred constraints.`),e=this.client.customWrapIdentifier(e,o),"create"!==this.method&&"createIfNot"!==this.method&&this.pushQuery({sql:`PRAGMA table_info(${this.tableName()})`,output(r){return n.client.ddl(n,r,this.connection).primary(t,e)}})}foreign(t){const e=this;"create"!==this.method&&"createIfNot"!==this.method&&(t.column=Array.isArray(t.column)?t.column:[t.column],t.column=t.column.map(t=>this.client.customWrapIdentifier(t,o)),t.inTable=this.client.customWrapIdentifier(t.inTable,o),t.references=Array.isArray(t.references)?t.references:[t.references],t.references=t.references.map(t=>this.client.customWrapIdentifier(t,o)),this.pushQuery({sql:`PRAGMA table_info(${this.tableName()})`,statementsProducer:(n,r)=>e.client.ddl(e,n,r).foreign(t)}))}primaryKeys(){const t=r(this.grouped.alterTable||[],{method:"primary"});if(t.length>0&&t[0].args.length>0){const e=t[0].args[0];let n=t[0].args[1]||"";return n&&(n=" constraint "+this.formatter.wrap(n)),`,${n} primary key (${this.formatter.columnize(e)})`}}foreignKeys(){let t="";const e=r(this.grouped.alterTable||[],{method:"foreign"});for(let n=0,r=e.length;n<r;n++){const r=e[n].args[0],i=this.formatter.columnize(r.column),o=this.formatter.columnize(r.references),s=this.formatter.wrap(r.inTable);let a=r.keyName||"";a&&(a=" constraint "+this.formatter.wrap(a)),t+=`,${a} foreign key(${i}) references ${s}(${o})`,r.onDelete&&(t+=" on delete "+r.onDelete),r.onUpdate&&(t+=" on update "+r.onUpdate)}return t}createTableBlock(){return this.getColumns().concat().join(",")}renameColumn(t,e){this.pushQuery({sql:`alter table ${this.tableName()} rename ${this.formatter.wrap(t)} to ${this.formatter.wrap(e)}`})}_setNullableState(t,e){const n=this;this.pushQuery({sql:`PRAGMA table_info(${this.tableName()})`,statementsProducer:(r,i)=>n.client.ddl(n,r,i).setNullable(t,e)})}dropColumn(){const t=this,e=i(arguments).map(t=>this.client.customWrapIdentifier(t,o));this.pushQuery({sql:`PRAGMA table_info(${this.tableName()})`,output(n){return t.client.ddl(t,n,this.connection).dropColumn(e)}})}}},function(t,e,n){var r=n(70),i=n(132),o=n(10),s=n(0);t.exports=function(t,e){return(s(t)?r:i)(t,o(e,3))}},function(t,e,n){const r=n(151);t.exports=class extends r{constructor(t,e){super(t,e)}}},function(t,e,n){const r=n(17),{nanonum:i}=n(86),{createNewTable:o,copyData:s,dropOriginal:a,renameTable:u,getTableSql:c}=n(343),{parseCreateTable:l,parseCreateIndex:h}=n(344),{compileCreateTable:f,compileCreateIndex:p}=n(347),{isEqualId:d,includesId:g}=n(348);t.exports=class{constructor(t,e,n,o){this.client=t,this.tableCompiler=e,this.pragma=n,this.tableNameRaw=this.tableCompiler.tableNameRaw,this.alteredName="_knex_temp_alter"+i(3),this.connection=o,this.formatter=t=>this.client.customWrapIdentifier(t,r),this.wrap=t=>this.client.wrapIdentifierImpl(t)}tableName(){return this.formatter(this.tableNameRaw)}getTableSql(){const t=this.tableName();return this.trx.disableProcessing(),this.trx.raw(c(t)).then(t=>(this.trx.enableProcessing(),{createTable:t.filter(t=>"table"===t.type)[0].sql,createIndices:t.filter(t=>"index"===t.type).map(t=>t.sql)}))}renameTable(){return this.trx.raw(u(this.alteredName,this.tableName()))}dropOriginal(){return this.trx.raw(a(this.tableName()))}copyData(t){return this.trx.raw(s(this.tableName(),this.alteredName,t))}createNewTable(t){return this.trx.raw(o(t,this.tableName(),this.alteredName))}alterColumn(t){return this.client.transaction(async e=>{this.trx=e;const{createTable:n,createIndices:r}=await this.getTableSql(),i=l(n);i.columns=i.columns.map(e=>{const n=t.find(t=>d(t.name,e.name));return n&&(e.type=n.type,e.constraints.default=null!==n.defaultTo?{name:null,value:n.defaultTo,expression:!1}:null,e.constraints.notnull=n.notNull?{name:null,conflict:null}:null,e.constraints.null=n.notNull?null:e.constraints.null),e});const o=f(i,this.wrap);return this.alter(o,r)},{connection:this.connection})}dropColumn(t){return this.client.transaction(async e=>{this.trx=e;const{createTable:n,createIndices:r}=await this.getTableSql(),i=l(n);if(i.columns=i.columns.filter(e=>e.expression||!g(t,e.name)),0===i.columns.length)throw new Error("Unable to drop last column from table");i.constraints=i.constraints.filter(e=>"PRIMARY KEY"===e.type||"UNIQUE"===e.type?e.columns.every(e=>e.expression||!g(t,e.name)):"FOREIGN KEY"!==e.type||e.columns.every(e=>!g(t,e))&&(e.references.table!==i.table||e.references.columns.every(e=>!g(t,e))));const o=i.columns.map(t=>t.name),s=f(i,this.wrap),a=[];for(const e of r){const n=h(e);n.columns=n.columns.filter(e=>e.expression||!g(t,e.name)),n.columns.length>0&&a.push(p(n,this.wrap))}return this.alter(s,a,o)},{connection:this.connection})}dropForeign(t,e){return this.client.transaction(async n=>{this.trx=n;const{createTable:r,createIndices:i}=await this.getTableSql(),o=l(r);e||(o.columns=o.columns.map(e=>({...e,references:g(t,e.name)?null:e.references}))),o.constraints=o.constraints.filter(n=>"FOREIGN KEY"!==n.type||(e?!n.name||!d(n.name,e):n.columns.every(e=>!g(t,e))));const s=f(o,this.wrap);return this.alter(s,i)},{connection:this.connection})}dropPrimary(t){return this.client.transaction(async e=>{this.trx=e;const{createTable:n,createIndices:r}=await this.getTableSql(),i=l(n);i.columns=i.columns.map(t=>({...t,primary:null})),i.constraints=i.constraints.filter(e=>"PRIMARY KEY"!==e.type||!!t&&(!e.name||!d(e.name,t)));const o=f(i,this.wrap);return this.alter(o,r)},{connection:this.connection})}primary(t,e){return this.client.transaction(async n=>{this.trx=n;const{createTable:r,createIndices:i}=await this.getTableSql(),o=l(r);o.columns=o.columns.map(t=>({...t,primary:null})),o.constraints=o.constraints.filter(t=>"PRIMARY KEY"!==t.type),o.constraints.push({type:"PRIMARY KEY",name:e||null,columns:t.map(t=>({name:t,expression:!1,collation:null,order:null})),conflict:null});const s=f(o,this.wrap);return this.alter(s,i)},{connection:this.connection})}foreign(t){return this.client.transaction(async e=>{this.trx=e;const{createTable:n,createIndices:r}=await this.getTableSql(),i=l(n);i.constraints.push({type:"FOREIGN KEY",name:t.keyName||null,columns:t.column,references:{table:t.inTable,columns:t.references,delete:t.onDelete||null,update:t.onUpdate||null,match:null,deferrable:null}});const o=f(i,this.wrap);return this.generateAlterCommands(o,r)},{connection:this.connection})}setNullable(t,e){return this.client.transaction(async n=>{this.trx=n;const{createTable:r,createIndices:i}=await this.getTableSql(),o=l(r),s=o.columns.find(e=>d(t,e.name));if(!s)throw new Error(`.setNullable: Column ${t} does not exist in table ${this.tableName()}.`);s.constraints.notnull=e?null:{name:null,conflict:null},s.constraints.null=e?s.constraints.null:null;const a=f(o,this.wrap);return this.generateAlterCommands(a,i)},{connection:this.connection})}async alter(t,e,n){await this.createNewTable(t),await this.copyData(n),await this.dropOriginal(),await this.renameTable();for(const t of e)await this.trx.raw(t)}generateAlterCommands(t,e,n){const r=[];r.push(o(t,this.tableName(),this.alteredName)),r.push(s(this.tableName(),this.alteredName,n)),r.push(a(this.tableName())),r.push(u(this.alteredName,this.tableName()));for(const t of e)r.push(t);return r}}},function(t,e){t.exports={createNewTable:function(t,e,n){return t.replace(e,n)},copyData:function(t,e,n){return`INSERT INTO ${e} SELECT ${void 0===n?"*":n.map(t=>`"${t}"`).join(", ")} FROM ${t};`},dropOriginal:function(t){return`DROP TABLE "${t}"`},renameTable:function(t,e){return`ALTER TABLE "${t}" RENAME TO "${e}"`},getTableSql:function(t){return`SELECT type, sql FROM sqlite_master WHERE (type="table" OR (type="index" AND sql IS NOT NULL)) AND tbl_name="${t}"`}}},function(t,e,n){const{tokenize:r}=n(345),{s:i,a:o,m:s,o:a,l:u,n:c,t:l,e:h,f:f}=n(346),p={keyword:/(?:ABORT|ACTION|ADD|AFTER|ALL|ALTER|ALWAYS|ANALYZE|AND|AS|ASC|ATTACH|AUTOINCREMENT|BEFORE|BEGIN|BETWEEN|BY|CASCADE|CASE|CAST|CHECK|COLLATE|COLUMN|COMMIT|CONFLICT|CONSTRAINT|CREATE|CROSS|CURRENT|CURRENT_DATE|CURRENT_TIME|CURRENT_TIMESTAMP|DATABASE|DEFAULT|DEFERRED|DEFERRABLE|DELETE|DESC|DETACH|DISTINCT|DO|DROP|END|EACH|ELSE|ESCAPE|EXCEPT|EXCLUSIVE|EXCLUDE|EXISTS|EXPLAIN|FAIL|FILTER|FIRST|FOLLOWING|FOR|FOREIGN|FROM|FULL|GENERATED|GLOB|GROUP|GROUPS|HAVING|IF|IGNORE|IMMEDIATE|IN|INDEX|INDEXED|INITIALLY|INNER|INSERT|INSTEAD|INTERSECT|INTO|IS|ISNULL|JOIN|KEY|LAST|LEFT|LIKE|LIMIT|MATCH|MATERIALIZED|NATURAL|NO|NOT|NOTHING|NOTNULL|NULL|NULLS|OF|OFFSET|ON|OR|ORDER|OTHERS|OUTER|OVER|PARTITION|PLAN|PRAGMA|PRECEDING|PRIMARY|QUERY|RAISE|RANGE|RECURSIVE|REFERENCES|REGEXP|REINDEX|RELEASE|RENAME|REPLACE|RESTRICT|RETURNING|RIGHT|ROLLBACK|ROW|ROWS|SAVEPOINT|SELECT|SET|TABLE|TEMP|TEMPORARY|THEN|TIES|TO|TRANSACTION|TRIGGER|UNBOUNDED|UNION|UNIQUE|UPDATE|USING|VACUUM|VALUES|VIEW|VIRTUAL|WHEN|WHERE|WINDOW|WITH|WITHOUT)(?=\s+|-|\(|\)|;|\+|\*|\/|%|==|=|<=|<>|<<|<|>=|>>|>|!=|,|&|~|\|\||\||\.)/,id:/"[^"]*(?:""[^"]*)*"|`[^`]*(?:``[^`]*)*`|\[[^[\]]*\]|[a-z_][a-z0-9_$]*/,string:/'[^']*(?:''[^']*)*'/,blob:/x'(?:[0-9a-f][0-9a-f])+'/,numeric:/(?:\d+(?:\.\d*)?|\.\d+)(?:e(?:\+|-)?\d+)?|0x[0-9a-f]+/,variable:/\?\d*|[@$:][a-z0-9_$]+/,operator:/-|\(|\)|;|\+|\*|\/|%|==|=|<=|<>|<<|<|>=|>>|>|!=|,|&|~|\|\||\||\./,_ws:/\s+/};function d(t){return o([l({text:"TEMP"}),l({text:"TEMPORARY"}),h],t=>({temporary:null!==t}))(t)}function g(t){return a(i([l({text:"WITHOUT"}),l({text:"ROWID"})]),t=>({rowid:null!==t}))(t)}function m(t){return o([i([y,l({text:","}),m],t=>({columns:[t[0]].concat(t[2].columns)})),i([y],t=>({columns:[t[0]]}))])(t)}function y(t){return i([i([ot],t=>({name:t[0]})),b,v],t=>Object.assign({},...t))(t)}function b(t){return a(i([s(l({type:"id"})),o([i([l({text:"("}),ut,l({text:","}),ut,l({text:")"})],t=>`(${t[1]}, ${t[3]})`),i([l({text:"("}),ut,l({text:")"})],t=>`(${t[1]})`),h])],t=>`${t[0].join(" ")}${t[1]||""}`),t=>({type:t}))(t)}function v(t){return a(s(w),t=>({constraints:Object.assign({primary:null,notnull:null,null:null,unique:null,check:null,default:null,collate:null,references:null,as:null},...t||[])}))(t)}function w(t){return o([_,E,C,T,O,j,A,N,S])(t)}function _(t){return i([Q,l({text:"PRIMARY"},t=>null),l({text:"KEY"},t=>null),nt,P,x],t=>({primary:Object.assign({},...t.filter(t=>null!==t))}))(t)}function x(t){return a(l({text:"AUTOINCREMENT"}),t=>({autoincrement:null!==t}))(t)}function E(t){return i([Q,l({text:"NOT"},t=>null),l({text:"NULL"},t=>null),P],t=>({notnull:Object.assign({},...t.filter(t=>null!==t))}))(t)}function C(t){return i([Q,l({text:"NULL"},t=>null),P],t=>({null:Object.assign({},...t.filter(t=>null!==t))}))(t)}function T(t){return i([Q,l({text:"UNIQUE"},t=>null),P],t=>({unique:Object.assign({},...t.filter(t=>null!==t))}))(t)}function O(t){return i([Q,l({text:"CHECK"},t=>null),l({text:"("},t=>null),i([it],t=>({expression:t[0]})),l({text:")"},t=>null)],t=>({check:Object.assign({},...t.filter(t=>null!==t))}))(t)}function j(t){return i([Q,l({text:"DEFAULT"},t=>null),o([i([l({text:"("}),it,l({text:")"})],t=>({value:t[1],expression:!0})),i([at],t=>({value:t[0],expression:!1})),i([ut],t=>({value:t[0],expression:!1}))])],t=>({default:Object.assign({},...t.filter(t=>null!==t))}))(t)}function A(t){return i([Q,l({text:"COLLATE"},t=>null),l({type:"id"},t=>({collation:t.text}))],t=>({collate:Object.assign({},...t.filter(t=>null!==t))}))(t)}function N(t){return i([Q,i([M],t=>t[0].references)],t=>({references:Object.assign({},...t.filter(t=>null!==t))}))(t)}function S(t){return i([Q,a(i([l({text:"GENERATED"}),l({text:"ALWAYS"})]),t=>({generated:null!==t})),l({text:"AS"},t=>null),l({text:"("},t=>null),i([it],t=>({expression:t[0]})),l({text:")"},t=>null),o([l({text:"STORED"}),l({text:"VIRTUAL"}),h],t=>({mode:t?t.toUpperCase():null}))],t=>({as:Object.assign({},...t.filter(t=>null!==t))}))(t)}function R(t){return a(s(i([l({text:","}),I],t=>t[1])),t=>({constraints:t||[]}))(t)}function I(t){return o([k,q,L,B])(t)}function k(t){return i([Q,l({text:"PRIMARY"},t=>null),l({text:"KEY"},t=>null),l({text:"("},t=>null),X,l({text:")"},t=>null),P],t=>Object.assign({type:"PRIMARY KEY"},...t.filter(t=>null!==t)))(t)}function q(t){return i([Q,l({text:"UNIQUE"},t=>null),l({text:"("},t=>null),X,l({text:")"},t=>null),P],t=>Object.assign({type:"UNIQUE"},...t.filter(t=>null!==t)))(t)}function P(t){return a(i([l({text:"ON"}),l({text:"CONFLICT"}),o([l({text:"ROLLBACK"}),l({text:"ABORT"}),l({text:"FAIL"}),l({text:"IGNORE"}),l({text:"REPLACE"})])],t=>t[2]),t=>({conflict:t?t.toUpperCase():null}))(t)}function L(t){return i([Q,l({text:"CHECK"},t=>null),l({text:"("},t=>null),i([it],t=>({expression:t[0]})),l({text:")"},t=>null)],t=>Object.assign({type:"CHECK"},...t.filter(t=>null!==t)))(t)}function B(t){return i([Q,l({text:"FOREIGN"},t=>null),l({text:"KEY"},t=>null),l({text:"("},t=>null),U,l({text:")"},t=>null),M],t=>Object.assign({type:"FOREIGN KEY"},...t.filter(t=>null!==t)))(t)}function M(t){return i([l({text:"REFERENCES"},t=>null),K,$,a(s(o([F,D,W])),t=>Object.assign({delete:null,update:null,match:null},...t||[])),H],t=>({references:Object.assign({},...t.filter(t=>null!==t))}))(t)}function $(t){return a(i([l({text:"("}),U,l({text:")"})],t=>t[1]),t=>({columns:t?t.columns:[]}))(t)}function U(t){return i([a(s(i([ot,l({text:","})],t=>t[0])),t=>null!==t?t:[]),ot],t=>({columns:t[0].concat([t[1]])}))(t)}function F(t){return i([l({text:"ON"}),l({text:"DELETE"}),st],t=>({delete:t[2]}))(t)}function D(t){return i([l({text:"ON"}),l({text:"UPDATE"}),st],t=>({update:t[2]}))(t)}function W(t){return i([l({text:"MATCH"}),o([l({type:"keyword"}),l({type:"id"})])],t=>({match:t[1]}))(t)}function H(t){return a(i([a(l({text:"NOT"})),l({text:"DEFERRABLE"}),a(i([l({text:"INITIALLY"}),o([l({text:"DEFERRED"}),l({text:"IMMEDIATE"})])],t=>t[1].toUpperCase()))]),t=>({deferrable:t?{not:null!==t[0],initially:t[2]}:null}))(t)}function Q(t){return a(i([l({text:"CONSTRAINT"}),ot],t=>t[1]),t=>({name:t}))(t)}function z(t){return a(l({text:"UNIQUE"}),t=>({unique:null!==t}))(t)}function Y(t){return a(i([l({text:"IF"}),l({text:"NOT"}),l({text:"EXISTS"})]),t=>({exists:null!==t}))(t)}function V(t){return a(i([ot,l({text:"."})],t=>t[0]),t=>({schema:t}))(t)}function G(t){return i([ot],t=>({index:t[0]}))(t)}function K(t){return i([ot],t=>({table:t[0]}))(t)}function J(t){return a(i([l({text:"WHERE"}),it],t=>t[1]),t=>({where:t}))(t)}function X(t){return o([i([Z,l({text:","}),X],t=>({columns:[t[0]].concat(t[2].columns)})),i([tt,l({text:","}),X],t=>({columns:[t[0]].concat(t[2].columns)})),u({do:Z,next:l({text:")"})},t=>({columns:[t]})),u({do:tt,next:l({text:")"})},t=>({columns:[t]}))])(t)}function Z(t){return i([i([ot],t=>({name:t[0],expression:!1})),et,nt],t=>Object.assign({},...t.filter(t=>null!==t)))(t)}function tt(t){return i([i([rt],t=>({name:t[0],expression:!0})),et,nt],t=>Object.assign({},...t.filter(t=>null!==t)))(t)}function et(t){return a(i([l({text:"COLLATE"}),l({type:"id"})],t=>t[1]),t=>({collation:t}))(t)}function nt(t){return o([l({text:"ASC"}),l({text:"DESC"}),h],t=>({order:t?t.toUpperCase():null}))(t)}function rt(t){return s(o([c({do:l({type:"keyword"}),not:o([l({text:"COLLATE"}),l({text:"ASC"}),l({text:"DESC"})])}),l({type:"id"}),l({type:"string"}),l({type:"blob"}),l({type:"numeric"}),l({type:"variable"}),c({do:l({type:"operator"}),not:o([l({text:"("}),l({text:")"}),l({text:","})])}),i([l({text:"("}),a(it),l({text:")"})],t=>t[1]||[])]))(t)}function it(t){return s(o([l({type:"keyword"}),l({type:"id"}),l({type:"string"}),l({type:"blob"}),l({type:"numeric"}),l({type:"variable"}),c({do:l({type:"operator"}),not:o([l({text:"("}),l({text:")"})])}),i([l({text:"("}),a(it),l({text:")"})],t=>t[1]||[])]))(t)}function ot(t){return o([l({type:"id"}),l({type:"string"})],t=>/^["`['][^]*["`\]']$/.test(t)?t.substring(1,t.length-1):t)(t)}function st(t){return o([i([l({text:"SET"}),l({text:"NULL"})],t=>`${t[0]} ${t[1]}`),i([l({text:"SET"}),l({text:"DEFAULT"})],t=>`${t[0]} ${t[1]}`),l({text:"CASCADE"}),l({text:"RESTRICT"}),i([l({text:"NO"}),l({text:"ACTION"})],t=>`${t[0]} ${t[1]}`)],t=>t.toUpperCase())(t)}function at(t){return o([l({type:"numeric"}),l({type:"string"}),l({type:"id"}),l({type:"blob"}),l({text:"NULL"}),l({text:"TRUE"}),l({text:"FALSE"}),l({text:"CURRENT_TIME"}),l({text:"CURRENT_DATE"}),l({text:"CURRENT_TIMESTAMP"})])(t)}function ut(t){return i([o([l({text:"+"}),l({text:"-"}),h]),l({type:"numeric"})],t=>`${t[0]||""}${t[1]}`)(t)}t.exports={parseCreateTable:function(t){const e=(n={input:r(t,p)},i([l({text:"CREATE"},t=>null),d,l({text:"TABLE"},t=>null),Y,V,K,l({text:"("},t=>null),m,R,l({text:")"},t=>null),g,f],t=>Object.assign({},...t.filter(t=>null!==t)))(n));var n;if(!e.success)throw new Error(`Parsing CREATE TABLE failed at [${e.input.slice(e.index).map(t=>t.text).join(" ")}] of "${t}"`);return e.ast},parseCreateIndex:function(t){const e=(n={input:r(t,p)},i([l({text:"CREATE"},t=>null),z,l({text:"INDEX"},t=>null),Y,V,G,l({text:"ON"},t=>null),K,l({text:"("},t=>null),X,l({text:")"},t=>null),J,f],t=>Object.assign({},...t.filter(t=>null!==t)))(n));var n;if(!e.success)throw new Error(`Parsing CREATE INDEX failed at [${e.input.slice(e.index).map(t=>t.text).join(" ")}] of "${t}"`);return e.ast}}},function(t,e){t.exports={tokenize:function(t,e){const n=new RegExp(Object.entries(e).map(([t,e])=>`(?<${t}>${e.source})`).join("|"),"yi");let r=0;const i=[];for(;r<t.length;){n.lastIndex=r;const e=t.match(n);if(null===e)throw new Error(`No matching tokenizer rule found at: [${t.substring(r)}]`);{const[t,n]=Object.entries(e.groups).find(([t,e])=>void 0!==e);r+=n.length,t.startsWith("_")||i.push({type:t,text:n})}}return i}}},function(t,e){t.exports={s:function(t,e=(t=>t)){return function({index:n=0,input:r}){let i=n;const o=[];for(const e of t){const t=e({index:i,input:r});if(!t.success)return t;i=t.index,o.push(t.ast)}return{success:!0,ast:e(o),index:i,input:r}}},a:function(t,e=(t=>t)){return function({index:n=0,input:r}){for(const i of t){const t=i({index:n,input:r});if(t.success)return{success:!0,ast:e(t.ast),index:t.index,input:r}}return{success:!1,ast:null,index:n,input:r}}},m:function(t,e=(t=>t)){return function({index:n=0,input:r}){let i={},o=n;const s=[];do{i=t({index:o,input:r}),i.success&&(o=i.index,s.push(i.ast))}while(i.success);return s.length>0?{success:!0,ast:e(s),index:o,input:r}:{success:!1,ast:null,index:o,input:r}}},o:function(t,e=(t=>t)){return function({index:n=0,input:r}){const i=t({index:n,input:r});return i.success?{success:!0,ast:e(i.ast),index:i.index,input:r}:{success:!0,ast:e(null),index:n,input:r}}},l:function(t,e=(t=>t)){return function({index:n=0,input:r}){const i=t.do({index:n,input:r});if(i.success){if(t.next({index:i.index,input:r}).success)return{success:!0,ast:e(i.ast),index:i.index,input:r}}return{success:!1,ast:null,index:n,input:r}}},n:function(t,e=(t=>t)){return function({index:n=0,input:r}){const i=t.do({index:n,input:r});if(i.success){if(!t.not({index:n,input:r}).success)return{success:!0,ast:e(i.ast),index:i.index,input:r}}return{success:!1,ast:null,index:n,input:r}}},t:function(t,e=(t=>t.text)){return function({index:n=0,input:r}){const i=r[n];return void 0===i||void 0!==t.type&&t.type!==i.type||void 0!==t.text&&t.text.toUpperCase()!==i.text.toUpperCase()?{success:!1,ast:null,index:n,input:r}:{success:!0,ast:e(i),index:n+1,input:r}}},e:function({index:t=0,input:e}){return{success:!0,ast:null,index:t,input:e}},f:function({index:t=0,input:e}){return{success:t===e.length,ast:null,index:t,input:e}}}},function(t,e){function n(t,e){return null!==t.conflict?" ON CONFLICT "+t.conflict:""}function r(t,e){return`REFERENCES ${u(t,e)}${function(t,e){return t.columns.length>0?` (${i(t,e)})`:""}(t,e)}${function(t,e){return`${function(t,e){return null!==t.delete?" ON DELETE "+t.delete:""}(t)}${function(t,e){return null!==t.update?" ON UPDATE "+t.update:""}(t)}${function(t,e){return null!==t.match?" MATCH "+t.match:""}(t)}`}(t)}${function(t,e){return null!==t?` ${t.not?"NOT ":""}DEFERRABLE${null!==t.initially?" INITIALLY "+t.initially:""}`:""}(t.deferrable)}`}function i(t,e){return t.columns.map(t=>p(t,e)).join(", ")}function o(t,e){return null!==t.name?`CONSTRAINT ${p(t.name,e)} `:""}function s(t,e){return t.exists?" IF NOT EXISTS":""}function a(t,e){return null!==t.schema?p(t.schema,e)+".":""}function u(t,e){return p(t.table,e)}function c(t,e){return t.columns.map(t=>t.expression?function(t,e){return`${function(t,e){return f(t,e)}(t.name,e)}${l(t,e)}${h(t,e)}`}(t,e):function(t,e){return`${p(t.name,e)}${l(t,e)}${h(t,e)}`}(t,e)).join(", ")}function l(t,e){return null!==t.collation?" COLLATE "+t.collation:""}function h(t,e){return null!==t.order?" "+t.order:""}function f(t,e){return t.reduce((t,e)=>Array.isArray(e)?`${t}(${f(e)})`:t?`${t} ${e}`:e,"")}function p(t,e){return e(t)}t.exports={compileCreateTable:function(t,e=(t=>t)){return function(t,e){return`CREATE${function(t,e){return t.temporary?" TEMP":""}(t)} TABLE${s(t,e)} ${a(t,e)}${u(t,e)} (${function(t,e){return t.columns.map(t=>function(t,e){return`${p(t.name,e)}${function(t,e){return null!==t.type?" "+t.type:""}(t)}${function(t,e){return`${function(t,e){return null!==t.primary?` ${o(t.primary,e)}PRIMARY KEY${h(t.primary,e)}${n(t.primary,e)}${function(t,e){return t.autoincrement?" AUTOINCREMENT":""}(t.primary)}`:""}(t,e)}${function(t,e){return null!==t.notnull?` ${o(t.notnull,e)}NOT NULL${n(t.notnull,e)}`:""}(t,e)}${function(t,e){return null!==t.null?` ${o(t.null,e)}NULL${n(t.null,e)}`:""}(t,e)}${function(t,e){return null!==t.unique?` ${o(t.unique,e)}UNIQUE${n(t.unique,e)}`:""}(t,e)}${function(t,e){return null!==t.check?` ${o(t.check,e)}CHECK (${f(t.check.expression,e)})`:""}(t,e)}${function(t,e){return null!==t.default?` ${o(t.default,e)}DEFAULT ${t.default.expression?`(${f(t.default.value,e)})`:t.default.value}`:""}(t,e)}${function(t,e){return null!==t.collate?` ${o(t.collate,e)}COLLATE ${t.collate.collation}`:""}(t,e)}${function(t,e){return null!==t.references?` ${o(t.references,e)}${r(t.references,e)}`:""}(t,e)}${function(t,e){return null!==t.as?` ${o(t.as,e)}${t.as.generated?"GENERATED ALWAYS ":""}AS (${f(t.as.expression,e)})${null!==t.as.mode?" "+t.as.mode:""}`:""}(t,e)}`}(t.constraints,e)}`}(t,e)).join(", ")}(t,e)}${function(t,e){return t.constraints.reduce((t,s)=>`${t}, ${function(t,e){switch(t.type){case"PRIMARY KEY":return function(t,e){return`${o(t,e)}PRIMARY KEY (${c(t,e)})${n(t,e)}`}(t,e);case"UNIQUE":return function(t,e){return`${o(t,e)}UNIQUE (${c(t,e)})${n(t,e)}`}(t,e);case"CHECK":return function(t,e){return`${o(t,e)}CHECK (${f(t.expression,e)})`}(t,e);case"FOREIGN KEY":return function(t,e){return`${o(t,e)}FOREIGN KEY (${i(t,e)}) ${r(t.references,e)}`}(t,e)}}(s,e)}`,"")}(t,e)})${function(t,e){return t.rowid?" WITHOUT ROWID":""}(t)}`}(t,e)},compileCreateIndex:function(t,e=(t=>t)){return function(t,e){return`CREATE${function(t,e){return t.unique?" UNIQUE":""}(t)} INDEX${s(t,e)} ${a(t,e)}${function(t,e){return p(t.index,e)}(t,e)} on ${u(t,e)} (${c(t,e)})${function(t,e){return null!==t.where?" where "+f(t.where):""}(t)}`}(t,e)}}},function(t,e){function n(t,e){return t.toLowerCase()===e.toLowerCase()}t.exports={isEqualId:n,includesId:function(t,e){return t.some(t=>n(t,e))}}},function(t,e){}])}));
//# sourceMappingURL=knex.js.map